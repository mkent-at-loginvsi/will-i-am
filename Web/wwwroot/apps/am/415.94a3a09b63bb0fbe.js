"use strict";(self.webpackChunkAutomationMachine=self.webpackChunkAutomationMachine||[]).push([[415],{24415:(Fi,V,c)=>{c.r(V),c.d(V,{DashboardModule:()=>Hi});var T=c(36895),_e=c(151),be=c(82038),$=c(14353),Te=c(77604),Se=c(1059),z=c(87545),ve=c(92014),Ae=c(44290),A=c(80013),g=c(12320),H=c(96308),d=c(30671),Ce=c(66216),p=c(8929),xe=c(61715),F=c(36787),Ze=c(68896),_=c(65938),Z=(()=>{return(n=Z||(Z={}))[n.Info=0]="Info",n[n.Status=1]="Status",n[n.Error=2]="Error",Z;var n})(),e=c(94650),b=c(67339),D=c(57561),C=c(80529),x=c(6184);let ke=(()=>{class n extends D.q{constructor(t,i){super(t,i)}getCurrentHistoryLogFile(t,i){return this.get(b.f.ENVIRONMENT_HISTORY_CURRENT_LOG_FILE(t,i))}getPrevHistoryLogFile(t,i,s){return this.get(b.f.ENVIRONMENT_HISTORY_PREV_LOG_FILE(t,i,s))}getNextHistoryLogFile(t,i,s){return this.get(b.f.ENVIRONMENT_HISTORY_NEXT_LOG_FILE(t,i,s))}getActiveLogEntries(t,i){return this.get(b.f.ENVIRONMENT_ACTIVE_LOG_FILE(t,i))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN),e.LFG(x.w))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ye=c(19737),O=c(3848),M=c(89502),Y=c(24633),L=c(4859);function De(n,o){if(1&n&&(e.TgZ(0,"mat-list-item",21),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.qZA()),2&n){const t=o.$implicit;e.ekj("text-danger",t.isError),e.xp6(2),e.AsE(" [",e.xi3(3,4,t.dateTime,"yyyy-MM-dd HH:mm:ss"),"] ",t.text," ")}}function Ie(n,o){if(1&n&&(e.TgZ(0,"mat-list-item",21),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.ekj("text-danger",t.isError),e.xp6(1),e.AsE(" [",e.xi3(3,4,t.dateTime,"yyyy-MM-dd HH:mm:ss"),"] ",t.text," ")}}let Ne=(()=>{class n{constructor(t,i,s){this.data=t,this.dialog=i,this.logEntriesService=s,this.icons=g.R.icons.fontAwesome,this.historicalLogs=[],this.activeLogs=[],this.counter=5,this.onPrevFile=new p.xQ,this.onNextFile=new p.xQ,this.onTabChange=new p.xQ,this.clickDelay=100,this.computerId=t.computerId,this.environmentId=t.environmentId,this.currentTab=0,this.hasPrevious=!1,this.activeLogs=[]}ngOnInit(){this.historicLogName="",this.activeLogName="",this.activeLogs=[],this.historicalLogs=[],this.fetchCurrentLogFile(),this.logEntriesService.getActiveLogEntries(this.environmentId,this.computerId).subscribe(t=>{t?t&&t.entries&&(this.activeLogName=t.fileName,this.activeLogs=[...t.entries.map(i=>({...i,isError:i.type===Z.Error}))]):(this.activeLogName="",this.activeLogs=[])})}fetchCurrentLogFile(){this.logEntriesService.getCurrentHistoryLogFile(this.environmentId,this.computerId).subscribe(t=>{t&&(this.hasPrevious=t.hasPrevious,this.historicLogName=t.fileName,this.historicalLogs=[...t.entries.map(i=>({...i,isError:i.type===Z.Error}))])})}startTimer(){this.counter=5,this.showSpinner=!0,this.updateMessage=`Updating in ${this.counter}`,this.intervalId=window.setInterval(function(){this.counter--,this.updateMessage=`Updating in ${this.counter}`,0===this.counter&&(this.showSpinner=!1,window.clearInterval(this.intervalId),this.activeEntriesSubscription=this.logEntriesService.getActiveLogEntries(this.environmentId,this.computerId).subscribe(function(t){t?t&&t.entries&&(this.activeLogName=t.fileName,this.activeLogs=[...t.entries.map(i=>({...i,isError:i.type===Z.Error}))]):(this.activeLogName="",this.activeLogs=[]),this.activeEntriesSubscription&&this.activeEntriesSubscription.unsubscribe(),this.startTimer()}.bind(this)))}.bind(this),1e3)}ngAfterViewInit(){this.prevSubscription=this.onPrevFile.pipe((0,A.b)(this.clickDelay)).subscribe(t=>{this.logEntriesService.getPrevHistoryLogFile(this.environmentId,this.computerId,this.historicLogName).subscribe(i=>{i&&(this.historicLogName=i.fileName,this.hasPrevious=i.hasPrevious,this.historicalLogs=[...i.entries.map(s=>({...s,isError:s.type===Z.Error}))])})}),this.nextSubscription=this.onNextFile.pipe((0,A.b)(this.clickDelay)).subscribe(t=>{this.logEntriesService.getNextHistoryLogFile(this.environmentId,this.computerId,this.historicLogName).subscribe(i=>{i&&(this.historicLogName=i.fileName,this.hasPrevious=i.hasPrevious,this.historicalLogs=[...i.entries.map(s=>({...s,isError:s.type===Z.Error}))])})}),this.tabChangeSubscription=this.onTabChange.pipe((0,A.b)(1e3)).subscribe(t=>{this.currentTab!==t.index&&(this.hideButtonBar=1===t.index,this.currentTab=t.index,1===t.index?(this.intervalId&&window.clearInterval(this.intervalId),this.startTimer()):this.intervalId&&window.clearInterval(this.intervalId))})}unSubscribeAll(){this.timerSubscription&&this.timerSubscription.unsubscribe(),this.spinnerSubscription&&this.spinnerSubscription.unsubscribe(),this.tabChangeSubscription&&this.tabChangeSubscription.unsubscribe(),this.nextSubscription&&this.nextSubscription.unsubscribe(),this.prevSubscription&&this.prevSubscription.unsubscribe()}ngOnDestroy(){this.unSubscribeAll(),this.intervalId&&window.clearInterval(this.intervalId)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.WI),e.Y36(_.so),e.Y36(ke))},n.\u0275cmp=e.Xpm({type:n,selectors:[["logging-history"]],decls:31,vars:11,consts:[[3,"dialog"],["mat-dialog-content",""],[3,"selectedTabChange"],["label","HISTORICAL LOGS"],["id","historyLogs"],["mat-subheader",""],["class","pl-4",3,"text-danger",4,"ngFor","ngForOf"],["label","ACTIVE LOGS"],["id","currentActiveLog"],[1,"pl-2"],[1,"fas","fa-spinner","fa-pulse"],["class","pl-4",4,"ngFor","ngForOf"],[1,"mat-dialog-actions"],[1,"container","pl-0","pr-0"],[1,"row","no-gutters"],[1,"col","text-left"],["mat-raised-button","",3,"disabled","click"],[1,"fas","fa-chevron-double-left"],[1,"col","text-right"],["mat-raised-button","",3,"click"],[1,"fas","fa-chevron-double-right"],[1,"pl-4"]],template:function(t,i){1&t&&(e._UZ(0,"am-close-dialog-button",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-tab-group",2),e.NdJ("selectedTabChange",function(a){return i.onTabChange.next(a)}),e.TgZ(3,"mat-tab",3),e.TgZ(4,"div",4),e.TgZ(5,"perfect-scrollbar"),e.TgZ(6,"mat-list"),e.TgZ(7,"h3",5),e._uU(8),e.qZA(),e.YNc(9,De,4,7,"mat-list-item",6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"mat-tab",7),e.TgZ(11,"div",8),e.TgZ(12,"perfect-scrollbar"),e.TgZ(13,"mat-list"),e.TgZ(14,"h3",5),e._uU(15),e.TgZ(16,"span",9),e._UZ(17,"i",10),e._uU(18),e.qZA(),e.qZA(),e.YNc(19,Ie,4,7,"mat-list-item",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",12),e.TgZ(21,"div",13),e.TgZ(22,"div",14),e.TgZ(23,"div",15),e.TgZ(24,"button",16),e.NdJ("click",function(a){return i.onPrevFile.next(a)}),e._UZ(25,"i",17),e._uU(26," Older Log "),e.qZA(),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"button",19),e.NdJ("click",function(a){return i.onNextFile.next(a)}),e._uU(29,"Newer log "),e._UZ(30,"i",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("dialog",i.dialog),e.xp6(8),e.Oqu(i.historicLogName),e.xp6(1),e.Q6J("ngForOf",i.historicalLogs),e.xp6(6),e.hij(" ",i.activeLogName," "),e.xp6(1),e.ekj("invisible",!i.showSpinner),e.xp6(2),e.hij(" ",i.updateMessage,""),e.xp6(1),e.Q6J("ngForOf",i.activeLogs),e.xp6(1),e.ekj("invisible",i.hideButtonBar),e.xp6(4),e.Q6J("disabled",!i.hasPrevious))},directives:[ye.k,_.xY,O.SP,O.uX,M.Vv,Y.i$,Y.gs,T.sg,Y.Tg,L.lW],pipes:[T.uU],styles:[".mat-subheader[_ngcontent-%COMP%]{color:#000}.mat-subheader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-style:italic}.mat-dialog-content[_ngcontent-%COMP%]{overflow:hidden;max-height:75vh!important;min-height:75vh!important}.mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{min-height:20px;height:auto!important;font-size:14px}#historyLogs[_ngcontent-%COMP%], #currentActiveLog[_ngcontent-%COMP%]{min-height:60vh;max-width:900px;min-width:900px;height:60vh;overflow:hidden;position:relative}"]}),n})();var Me=c(75778);class we{constructor(o,t,i,s,a){this.toggleAll=()=>{this.actions=this.actions.map(l=>({...l,isMarked:!this.isAllActionsSelected})),this.isAllActionsSelected=!this.isAllActionsSelected;const r=this.actions.filter(l=>l.isMarked);this.isAnyActionSelected=r.length>0&&!this.isAllActionsSelected},this.name=i,this.category=s,this.actions=a,this.isMarked=t,this.id=o,this.isAllActionsSelected=!1,this.isAnyActionSelected=!1}}class Ee{constructor(o,t,i,s){this.name=o,this.action=t,this.completed=i,this.isMarked=!1,this.id=s}}let Oe=(()=>{class n extends D.q{constructor(t,i){super(t,i)}getTrackingData(t,i){return this.get(b.f.ENVIRONMENT_TRACKING_DATA(t,i))}resetTrackingData(t,i,s,a){return this.post(b.f.RESET_ENVIRONMENT_TRACKING_DATA(t,i),{actionIds:s,packageIds:a})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN),e.LFG(x.w))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var q=c(59549),K=c(44144),W=c(56709),B=c(10266),I=c(37084);function Le(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-header-cell",37),e.TgZ(1,"mat-checkbox",38),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(){return e.CHM(t),e.oxw().onToggleAllEntries.next()}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.isAllRecordsSelected)("indeterminate",t.isAnyRecordsSelected)}}function qe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-cell",39),e.TgZ(1,"mat-checkbox",40),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(){const a=e.CHM(t).$implicit;return e.oxw().onToggleEntry.next(a)}),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isMarked)}}function Re(n,o){1&n&&(e.TgZ(0,"mat-header-cell",41),e._uU(1,"Name"),e.qZA())}function Ue(n,o){if(1&n&&(e.TgZ(0,"mat-cell",42),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function He(n,o){1&n&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"Category"),e.qZA())}function Fe(n,o){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.category," ")}}function Ye(n,o){1&n&&e._UZ(0,"mat-header-row",43)}function Pe(n,o){1&n&&e._UZ(0,"mat-row",43)}function Je(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-header-cell",37),e.TgZ(1,"mat-checkbox",50),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(s){return e.CHM(t),e.oxw().$implicit.toggleAll(s)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.isAllActionsSelected)("indeterminate",t.isAnyActionSelected)}}function Qe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-cell",39),e.TgZ(1,"mat-checkbox",40),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(s){const r=e.CHM(t).$implicit,l=e.oxw().$implicit;return e.oxw().toggleEntryAction(s,r,l)}),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isMarked)}}function je(n,o){1&n&&(e.TgZ(0,"mat-header-cell",51),e._uU(1,"Action"),e.qZA())}function Ge(n,o){if(1&n&&(e.TgZ(0,"mat-cell",42),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Ve(n,o){1&n&&(e.TgZ(0,"mat-header-cell",41),e._uU(1,"Action set"),e.qZA())}function $e(n,o){if(1&n&&(e.TgZ(0,"mat-cell",42),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.action," ")}}function ze(n,o){1&n&&e._UZ(0,"mat-header-row",43)}function Ke(n,o){1&n&&e._UZ(0,"mat-row",43)}const X=function(){return["marker","name","set"]};function We(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",44),e.TgZ(1,"mat-expansion-panel-header",43),e.TgZ(2,"div",45),e.TgZ(3,"mat-checkbox",40),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(){const a=e.CHM(t).$implicit;return e.oxw().onToggleEntry.next(a)}),e.qZA(),e.qZA(),e.TgZ(4,"div",46),e._uU(5),e.qZA(),e.TgZ(6,"div",47),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"mat-table",13,14),e.ynx(10,15),e.YNc(11,Je,2,2,"mat-header-cell",16),e.YNc(12,Qe,2,1,"mat-cell",17),e.BQk(),e.ynx(13,18),e.YNc(14,je,2,0,"mat-header-cell",48),e.YNc(15,Ge,2,1,"mat-cell",20),e.BQk(),e.ynx(16,49),e.YNc(17,Ve,2,0,"mat-header-cell",19),e.YNc(18,$e,2,1,"mat-cell",20),e.BQk(),e.YNc(19,ze,1,0,"mat-header-row",24),e.YNc(20,Ke,1,0,"mat-row",25),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(3),e.Q6J("checked",t.isMarked),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.category," "),e.xp6(1),e.Q6J("dataSource",t.actions),e.xp6(11),e.Q6J("matHeaderRowDef",e.DdM(6,X)),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(7,X))}}function Be(n,o){if(1&n&&(e.TgZ(0,"div",52),e._UZ(1,"i",53),e.TgZ(2,"span",54),e._uU(3),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.isLoading?"Loading...":"Resetting...")}}const Xe=function(){return[]};let et=(()=>{class n{constructor(t,i,s){this.data=t,this.dialog=i,this.trackingDataHttpService=s,this.icons=g.R.icons.fontAwesome,this.trackingData=[],this.trackingDataList=[],this.clickDelay=100,this.displayedColumns=["marker","name","category"],this.onToggleEntry=new p.xQ,this.onToggleAllEntries=new p.xQ,this.onResetTrackingData=new p.xQ,this.onSearch=new p.xQ,this.isLoading=!1,this.isResetting=!1,this.actionName=t.actionName,this.actionDescription=t.actionDescription,this.environmentId=t.environmentId,this.computerId=t.computer.id,this.isAllRecordsSelected=!1,this.isAnyRecordsSelected=!1}ngOnInit(){this.isLoading=!0,this.getTrackingData()}getTrackingData(){this.isLoading=!0,this.trackingDataHttpService.getTrackingData(this.environmentId,this.computerId).subscribe(t=>{try{const i=t.map(s=>{const a=[];for(let r of s.actionSets)for(let l of r.actions)a.push(new Ee(l.name,r.name,l.completed,l.id));return new we(s.id,!1,s.name,s.category,a)});this.trackingData=i,this.trackingDataList=i}finally{this.isLoading=!1}},t=>{this.isLoading=!1})}toggleEntryAction(t,i,s){const a=s.actions.find(l=>l.action===i.action);a.isMarked=!a.isMarked;const r=s.actions.filter(l=>l.isMarked);s.isAllActionsSelected=r.length===s.actions.length&&s.actions.length>0,s.isAnyActionSelected=r.length>0&&!s.isAllActionsSelected}applyFilter(t){this.isAnyRecordsSelected=!1,this.isAllRecordsSelected=!1,t||(this.trackingDataList=[...this.trackingData]),this.trackingDataList=[...this.trackingData.filter(i=>i.category&&i.category.toUpperCase().indexOf(t.toUpperCase())>=0||i.name&&i.name.toUpperCase().indexOf(t.toUpperCase())>=0)]}toggleEntry(t,i){i.isMarked=!i.isMarked;const s=this.trackingDataList.filter(a=>a.isMarked);this.isAllRecordsSelected=s.length===this.trackingDataList.length&&this.trackingDataList.length>0,this.isAnyRecordsSelected=s.length>0&&!this.isAllRecordsSelected}toggleAllEntries(t){this.trackingDataList=this.trackingDataList.map(s=>({...s,isMarked:!this.isAllRecordsSelected})),this.isAllRecordsSelected=this.trackingDataList.length>0&&!this.isAllRecordsSelected;const i=this.trackingDataList.filter(s=>s.isMarked);this.isAnyRecordsSelected=i.length>0&&!this.isAllRecordsSelected}ngAfterViewInit(){this.onToggleEntry.subscribe(t=>{this.toggleEntry(null,t)}),this.onToggleAllEntries.subscribe(()=>{this.toggleAllEntries(null)}),this.onSearch.pipe((0,A.b)(400)).pipe((0,Me.x)()).subscribe(t=>{this.applyFilter(t)}),this.onResetTrackingData.pipe((0,A.b)(this.clickDelay)).subscribe(()=>{this.isResetting=!0;const t=this.trackingDataList.map(s=>s.actions.filter(a=>a.isMarked).map(a=>a.id)).reduce((s,a)=>[...s,...a],[]),i=this.trackingDataList.filter(s=>s.isMarked).map(s=>s.id);this.trackingDataHttpService.resetTrackingData(this.environmentId,this.computerId,t,i).subscribe(s=>{this.isResetting=!1,this.getTrackingData()},s=>{this.isResetting=!1})})}closeDialog(){this.dialog.close()}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.WI),e.Y36(_.so),e.Y36(Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tracking-data"]],decls:42,vars:9,consts:[["mat-dialog-title",""],[1,"mat-dialog-actions","border-bottom","mb-0","pb-0"],[1,"container","mt-1"],[1,"row","align-items-center"],[1,"col-lg-7"],[1,"action-title"],[1,"action-description"],[1,"col-lg-5"],[1,"full-width"],["matPrefix","",1,"mr-3"],[1,"far","fa-search"],["matInput","","placeholder","Enter your search term...",3,"keyup"],["mat-dialog-content",""],[3,"dataSource"],["table",""],["matColumnDef","marker"],["class","marker-column-header text-left pl-3",4,"matHeaderCellDef"],["class","text-left marker-column pl-3",4,"matCellDef"],["matColumnDef","name"],["class","pl-3",4,"matHeaderCellDef"],["class","text-left",4,"matCellDef"],["matColumnDef","category"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","pl-0",4,"matHeaderRowDef"],["class","pl-0",4,"matRowDef","matRowDefColumns"],["id","trackingData"],["displayMode","flat","hideToggle","true",1,"actions"],["hideToggle","true",4,"ngFor","ngForOf"],[1,"mat-dialog-actions","border-top"],[1,"container"],[1,"row","no-gutters"],[1,"col","col-loading"],["class","spinner-container",4,"ngIf"],[1,"col","text-right"],["mat-raised-button","",3,"disabled","click"],["color","primary","mat-raised-button","",3,"click"],[1,"marker-column-header","text-left","pl-3"],["matTooltip","Select or unselect all records",3,"checked","indeterminate","click","change"],[1,"text-left","marker-column","pl-3"],[3,"checked","click","change"],[1,"pl-3"],[1,"text-left"],[1,"pl-0"],["hideToggle","true"],[1,"task-marker","pl-3"],[1,"task-name","pl-3"],[1,"task-description","pl-3"],["class","",4,"matHeaderCellDef"],["matColumnDef","set"],["matTooltip","Select or unselect all actions",3,"checked","indeterminate","click","change"],[1,""],[1,"spinner-container"],[1,"fas","fa-spinner","fa-spin"],[1,"loading-text"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e._uU(6),e.TgZ(7,"i",6),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"mat-form-field",8),e.TgZ(11,"span",9),e._UZ(12,"i",10),e.qZA(),e.TgZ(13,"input",11),e.NdJ("keyup",function(a){return i.onSearch.next(a.target.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"mat-table",13,14),e.ynx(17,15),e.YNc(18,Le,2,2,"mat-header-cell",16),e.YNc(19,qe,2,1,"mat-cell",17),e.BQk(),e.ynx(20,18),e.YNc(21,Re,2,0,"mat-header-cell",19),e.YNc(22,Ue,2,1,"mat-cell",20),e.BQk(),e.ynx(23,21),e.YNc(24,He,2,0,"mat-header-cell",22),e.YNc(25,Fe,2,1,"mat-cell",23),e.BQk(),e.YNc(26,Ye,1,0,"mat-header-row",24),e.YNc(27,Pe,1,0,"mat-row",25),e.qZA(),e.TgZ(28,"div",26),e.TgZ(29,"perfect-scrollbar"),e.TgZ(30,"mat-accordion",27),e.YNc(31,We,21,8,"mat-expansion-panel",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",29),e.TgZ(33,"div",30),e.TgZ(34,"div",31),e.TgZ(35,"div",32),e.YNc(36,Be,4,1,"div",33),e.qZA(),e.TgZ(37,"div",34),e.TgZ(38,"button",35),e.NdJ("click",function(a){return i.onResetTrackingData.next(a)}),e._uU(39,"RESET "),e.qZA(),e.TgZ(40,"button",36),e.NdJ("click",function(){return i.closeDialog()}),e._uU(41,"CLOSE"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.hij("",i.actionName," "),e.xp6(2),e.Oqu(i.actionDescription),e.xp6(7),e.Q6J("dataSource",e.DdM(8,Xe)),e.xp6(11),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(4),e.Q6J("ngForOf",i.trackingDataList),e.xp6(5),e.Q6J("ngIf",i.isLoading||i.isResetting),e.xp6(2),e.Q6J("disabled",!i.isAnyRecordsSelected&&!i.isAllRecordsSelected||i.isResetting||i.isLoading))},directives:[_.uh,q.KE,q.qo,K.Nt,_.xY,d.BZ,d.w1,d.fO,d.ge,W.oG,B.gM,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,M.Vv,I.pp,T.sg,I.ib,I.yz,T.O5,L.lW],styles:[".mat-dialog-content[_ngcontent-%COMP%]{overflow:hidden;max-height:75vh!important;min-height:75vh!important}#trackingData[_ngcontent-%COMP%]{min-height:60vh;max-width:900px;min-width:900px;height:60vh;overflow:hidden;position:relative}.mat-form-field[_ngcontent-%COMP%]{font-size:12px}.marker-column[_ngcontent-%COMP%], .marker-column-header[_ngcontent-%COMP%]{width:50px;max-width:50px}.col-loading[_ngcontent-%COMP%]{display:flex;align-self:center;font-size:18px;color:#424242}.col-loading[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center}.col-loading[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{font-size:13px;padding-left:.5em}"]}),n})();var f=(()=>{return(n=f||(f={})).NotStarted="NotStarted",n.InProgress="InProgress",n.Succeeded="Succeeded",n.SucceededWithWarnings="SucceededWithWarnings",n.Failed="Failed",f;var n})();class m{}m.EnableLogons={name:"enable-logons",friendlyName:"Enable logons",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.DESKTOP},m.DisableLogons={name:"disable-logons",friendlyName:"Disable logons",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.OCTAGON},m.InitializeAm={reboot:!0,name:"initialize-am",friendlyName:"Initialize",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.SIGN_IN},m.InitializeAmWithoutReboot={name:"initialize-am-no-reboot",friendlyName:"Initialize without reboot",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.SIGN_IN},m.DrainLogons={name:"drain-logons",friendlyName:"Drain logons",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.DOWNLOAD},m.InvokeMaintenance={name:"invoke-maintenance",friendlyName:"Invoke maintenance",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.PLAY},m.StartDeployment={reboot:!0,name:"start-deployment",friendlyName:"Start deployment",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.SIGN_OUT},m.StartDeploymentWithoutReboot={name:"start-deployment-no-reboot",friendlyName:"Start deployment without reboot",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.SIGN_OUT},m.Reboot={name:"reboot",friendlyName:"Reboot machine",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.SHUT_DOWN},m.UpdateCache={name:"update-cache",friendlyName:"Update AM Cache",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.REFRESH},m.TestMachine={name:"test-machine",friendlyName:"Test machine",description:"",showConfirmation:!0,iconClass:g.R.icons.fontAwesome.CHECK},m.actions={[m.EnableLogons.name]:m.EnableLogons,[m.DisableLogons.name]:m.DisableLogons,[m.InitializeAm.name]:m.InitializeAm,[m.InitializeAmWithoutReboot.name]:m.InitializeAmWithoutReboot,[m.DrainLogons.name]:m.DrainLogons,[m.InvokeMaintenance.name]:m.InvokeMaintenance,[m.StartDeployment.name]:m.StartDeployment,[m.StartDeploymentWithoutReboot.name]:m.StartDeploymentWithoutReboot,[m.Reboot.name]:m.Reboot,[m.UpdateCache.name]:m.UpdateCache,[m.TestMachine.name]:m.TestMachine};var k=(()=>{return(n=k||(k={}))[n.Info="Info"]="Info",n[n.Task="Task"]="Task",n[n.ActionCompletion="ActionCompletion"]="ActionCompletion",k;var n})(),ee=c(591),te=c(81427);let P=(()=>{class n extends D.q{constructor(t,i,s){super(i,s),this.progressService=t,this.notification$=this.progressService.notifications$}connectToHub(t){const i=new ee.X(null);let s=this.progressService.starting.subscribe(a=>{i.next(a),s.unsubscribe()});return this.progressService.start(t),i.asObservable()}executeAction(t){let i=JSON.stringify(t);return this.post(b.f.EXECUTE_ACTION_URL,i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(te.q),e.LFG(C.eN),e.LFG(x.w))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var tt=c(98723),it=c(56686),ot=c(32268);const at=new class st extends ot.v{}(class nt extends it.o{constructor(o,t){super(o,t),this.scheduler=o,this.work=t}schedule(o,t=0){return t>0?super.schedule(o,t):(this.delay=t,this.state=o,this.scheduler.flush(this),this)}execute(o,t){return t>0||this.closed?super.execute(o,t):this._execute(o,t)}requestAsyncId(o,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(o,t,i):o.flush(this)}});var rt=c(42654),ct=c(43489),J=c(29312);class R extends ct.L{constructor(o,t,i=0){super(o),this.scheduler=t,this.delay=i}static dispatch(o){const{notification:t,destination:i}=o;t.observe(i),this.unsubscribe()}scheduleMessage(o){this.destination.add(this.scheduler.schedule(R.dispatch,this.delay,new dt(o,this.destination)))}_next(o){this.scheduleMessage(J.P.createNext(o))}_error(o){this.scheduleMessage(J.P.createError(o)),this.unsubscribe()}_complete(){this.scheduleMessage(J.P.createComplete()),this.unsubscribe()}}class dt{constructor(o,t){this.notification=o,this.destination=t}}var mt=c(95279),ut=c(45283);class pt extends p.xQ{constructor(o=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=o<1?1:o,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(o){if(!this.isStopped){const t=this._events;t.push(o),t.length>this._bufferSize&&t.shift()}super.next(o)}nextTimeWindow(o){this.isStopped||(this._events.push(new ht(this._getNow(),o)),this._trimBufferThenGetEvents()),super.next(o)}_subscribe(o){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,a=i.length;let r;if(this.closed)throw new mt.N;if(this.isStopped||this.hasError?r=rt.w.EMPTY:(this.observers.push(o),r=new ut.W(this,o)),s&&o.add(o=new R(o,s)),t)for(let l=0;l<a&&!o.closed;l++)o.next(i[l]);else for(let l=0;l<a&&!o.closed;l++)o.next(i[l].value);return this.hasError?o.error(this.thrownError):this.isStopped&&o.complete(),r}_getNow(){return(this.scheduler||at).now()}_trimBufferThenGetEvents(){const o=this._getNow(),t=this._bufferSize,i=this._windowTime,s=this._events,a=s.length;let r=0;for(;r<a&&!(o-s[r].time<i);)r++;return a>t&&(r=Math.max(r,a-t)),r>0&&s.splice(0,r),s}}class ht{constructor(o,t){this.time=o,this.value=t}}var gt=c(5254),Q=c(41177);class _t{constructor(o){this.durationSelector=o}call(o,t){return t.subscribe(new bt(o,this.durationSelector))}}class bt extends Q.Ds{constructor(o,t){super(o),this.durationSelector=t,this.hasValue=!1}_next(o){try{const t=this.durationSelector.call(this,o);t&&this._tryNext(o,t)}catch(t){this.destination.error(t)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(o,t){let i=this.durationSubscription;this.value=o,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=(0,Q.ft)(t,new Q.IY(this)),i&&!i.closed&&this.add(this.durationSubscription=i)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const o=this.value,t=this.durationSubscription;t&&(this.durationSubscription=void 0,t.unsubscribe(),this.remove(t)),this.value=void 0,this.hasValue=!1,super._next(o)}}}var U=c(92198),N=c(69096);class ie{constructor(o,t,i,s){this.title=o,this.status=i,this.id=s,this.type=t}get IsInProgress(){return this.status.toString()===f[f.InProgress]}get IsComplete(){return this.status.toString()===f[f.Succeeded]}get IsError(){return this.status.toString()===f[f.Failed]}}class ne{constructor(o,t,i,s,a,r){this.id=o??N.c.newGuid(),this.key=t,this.executionTime=new Date,this.userId=s,this.commandIds=r,this.taskItems=a,this.totalTasks=a.length,this.environmentId=i}get isCompleted(){return null==this.taskItems.find(o=>o.status===f.InProgress||o.status===f.NotStarted)}get succeededTasks(){return this.taskItems.filter(o=>o.status===f.Succeeded).length}get failedTasks(){return this.taskItems.filter(o=>o.status===f.Failed).length}containsCommand(o){return null!=this.commandIds.find(t=>t===o)}getTaskItem(o){return this.taskItems.find(t=>t.computerId===o)}updateTaskItem(o){const t=this.getTaskItem(o.computerId);if(null==t)return null;if(o.type===k.ActionCompletion)t.status=o.status;else{const i=t.taskStatuses.find(s=>s.id===o.id);null==i?t.taskStatuses.push(new ie(o.message,o.type,o.status,o.id)):(i.status=o.status,i.details=o.details)}return t}}class j{static get subscriptionId(){return sessionStorage.getItem("subscriber-id")||(sessionStorage.setItem("subscriber-id",N.c.newGuid()),sessionStorage.getItem("subscriber-id"))}}class Tt{constructor(o,t,i){this.computerName=o,this.computerId=t,this.taskStatuses=[],this.status=f.InProgress,this.isExpanded=!1}get TotalTasks(){return this.taskStatuses.filter(o=>o.type===k.Task).length}get CompletedTasks(){return this.taskStatuses.filter(o=>o.type===k.Task&&o.IsComplete).length}}var oe=c(37777);let w=(()=>{class n{constructor(t,i){this.dataRepositoryService=t,this.actionService=i,this.executedActions=[],this.executedActionSubject=new p.xQ,this.taskItemSubject=new p.xQ,this.updateStorageSubject=new p.xQ,this.initialize()}initialize(){this.readSavedActions(),this.updateStorageSubject.pipe(function ft(n){return o=>o.lift(new _t(n))}(()=>(0,tt.H)(1e3))).subscribe(()=>{sessionStorage.setItem(n.actionHistoryStorageKey,JSON.stringify(this.executedActions))}),this.actionService.notification$.subscribe(t=>{const i=this.executedActions.find(s=>s.containsCommand(t.commandId));if(null!=i){const s=i.updateTaskItem(t);null!=s&&(this.taskItemSubject.next(s),this.updateStorageSubject.next())}}),this.actionService.connectToHub(j.subscriptionId).subscribe(t=>{},t=>{console.error(t)})}readSavedActions(){const t=sessionStorage.getItem(n.actionHistoryStorageKey);if(t){const s=JSON.parse(t).map(a=>this.convertToExecutedAction(a));this.executedActions=s}}convertToExecutedAction(t){return new ne(t.id,t.key,t.environmentId,t.userId,t.taskItems,t.commandIds)}getAction(t){return this.executedActions.find(i=>i.id===t)}addAction(t,i,s,a,r){const l=this.dataRepositoryService.currentUserSubject.getValue(),u=a.map(y=>new Tt(y.computerName,y.id,t)),h=r.map(y=>y.actionId),v=new ne(t,i,s,l.id,u,h);this.executedActions.push(v),this.executedActionSubject.next(v),this.updateStorageSubject.next()}receiveTaskItems(t){const i=new pt,s=this.executedActions.find(l=>l.id===t),a=s.taskItems.map(l=>l.computerId);for(let l of s.taskItems)i.next(l);const r=this.taskItemSubject.pipe((0,U.h)(l=>null!=a.find(u=>u===l.computerId)));return(0,F.T)(i.asObservable(),r)}receiveActions(t){return(0,F.T)((0,gt.D)(this.executedActions).pipe((0,U.h)(i=>i.environmentId===t)),this.executedActionSubject.pipe((0,U.h)(i=>i.environmentId===t)))}}return n.actionHistoryStorageKey="loginam.action-history",n.\u0275fac=function(t){return new(t||n)(e.LFG(oe.Y),e.LFG(P))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function St(n,o){1&n&&(e.TgZ(0,"mat-header-cell",20),e._uU(1,"Machine"),e.qZA())}function vt(n,o){if(1&n&&(e.TgZ(0,"mat-cell",21),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.computerName," ")}}function At(n,o){1&n&&e._UZ(0,"mat-header-row",22)}function Ct(n,o){1&n&&e._UZ(0,"mat-row",22)}function xt(n,o){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",31),e.qZA())}function Zt(n,o){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",32),e.qZA())}function kt(n,o){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",33),e.qZA())}function yt(n,o){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",31),e.qZA())}function Dt(n,o){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",32),e.qZA())}function It(n,o){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",33),e.qZA())}function Nt(n,o){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",37),e.qZA())}function Mt(n,o){if(1&n&&(e.TgZ(0,"p",38),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.details)}}function wt(n,o){if(1&n&&(e.TgZ(0,"li",34),e.TgZ(1,"div",35),e.YNc(2,yt,2,0,"div",26),e.YNc(3,Dt,2,0,"div",26),e.YNc(4,It,2,0,"div",26),e.YNc(5,Nt,2,0,"div",26),e.qZA(),e.TgZ(6,"span",24),e._uU(7),e.qZA(),e.YNc(8,Mt,2,1,"p",36),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.notificationStatusEnum[t.status]==i.notificationStatusEnum.InProgress),e.xp6(1),e.Q6J("ngIf",i.notificationStatusEnum[t.status]==i.notificationStatusEnum.Succeeded),e.xp6(1),e.Q6J("ngIf",i.notificationStatusEnum[t.status]==i.notificationStatusEnum.Failed),e.xp6(1),e.Q6J("ngIf",t.type==i.notificationTypeEnum.Info),e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngIf",t.status==i.notificationStatusEnum.Failed)}}function Et(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",23),e.NdJ("closed",function(){const a=e.CHM(t).$implicit;return e.oxw().panelClose(a)}),e.TgZ(1,"mat-expansion-panel-header",24),e.TgZ(2,"div",25),e.YNc(3,xt,2,0,"div",26),e.YNc(4,Zt,2,0,"div",26),e.YNc(5,kt,2,0,"div",26),e.qZA(),e.TgZ(6,"div",27),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"p",28),e._uU(9,"Task status"),e.qZA(),e.TgZ(10,"ul",29),e.YNc(11,wt,9,6,"li",30),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();e.Q6J("expanded",t.isExpanded),e.xp6(3),e.Q6J("ngIf",t.status==i.notificationStatusEnum.InProgress),e.xp6(1),e.Q6J("ngIf",t.status==i.notificationStatusEnum.Succeeded),e.xp6(1),e.Q6J("ngIf",t.status==i.notificationStatusEnum.Failed),e.xp6(2),e.hij(" ",t.computerName," "),e.xp6(4),e.Q6J("ngForOf",t.taskStatuses)}}const Ot=function(){return[]};let se=(()=>{class n{constructor(t,i,s,a,r){this.data=t,this.actionsService=i,this.actionHistoryService=s,this.dialog=a,this.changeDetector=r,this.displayedColumns=["computerName"],this.dataSource=new d.by([]),this.machinesWithStatuses=[],this.notificationStatusEnum=f,this.notificationTypeEnum=k,this.computerIdsMap={},this.actionId=t.actionId;const l=this.actionHistoryService.getAction(this.actionId),u=m.actions[l.key];this.actionName=u.friendlyName,this.actionDescription=u.description,this.environmentId=l.environmentId,this.machinesWithStatuses=l.taskItems,1===this.machinesWithStatuses.length&&(this.machinesWithStatuses[0].isExpanded=!0),this.dialog.disableClose=!0}ngOnInit(){this.taskItemSubscription=this.actionHistoryService.receiveTaskItems(this.actionId).subscribe(t=>{const i=this.machinesWithStatuses.findIndex(s=>s.computerId===t.computerId);-1!==i&&(this.machinesWithStatuses[i]=t,this.changeDetector.detectChanges())})}panelClose(t){t.isExpanded=!t.isExpanded,this.changeDetector.detectChanges()}unsubscribeAll(){null!=this.notificationSubscription&&this.notificationSubscription.unsubscribe(),this.hubSubscription&&this.hubSubscription.unsubscribe(),this.taskItemSubscription&&this.taskItemSubscription.unsubscribe()}closeDialog(){this.dialog.close()}ngOnDestroy(){this.unsubscribeAll()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.WI),e.Y36(P),e.Y36(w),e.Y36(_.so),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["generic-action"]],decls:25,vars:7,consts:[["mat-dialog-title",""],[1,"mat-dialog-actions","border-bottom","mb-0"],[1,"container"],[1,"action-title"],[1,"action-description"],["mat-dialog-content",""],[3,"dataSource"],["table",""],["matColumnDef","computerName"],["style","max-width: 230px;","class","pl-3",4,"matHeaderCellDef"],["class","text-left",4,"matCellDef"],["class","pl-0",4,"matHeaderRowDef"],["class","pl-0",4,"matRowDef","matRowDefColumns"],["id","computersList"],["displayMode","flat","hideToggle","true",1,"actions"],["hideToggle","true",3,"expanded","closed",4,"ngFor","ngForOf"],[1,"mat-dialog-actions","border-top"],[1,"row","no-gutters"],[1,"col","text-right"],["color","primary","mat-raised-button","",3,"click"],[1,"pl-3",2,"max-width","230px"],[1,"text-left"],[1,"pl-0"],["hideToggle","true",3,"expanded","closed"],[1,"pl-3"],[1,"fa-1x",2,"display","inline-block","vertical-align","middle","line-height","48px"],[4,"ngIf"],[1,"task-name","pl-3"],[1,"pt-1","pl-3","pb-0","mb-0"],[1,"list-group","list-group-flush"],["class","list-group-item rounded-0 border-left-0 border-right-0",4,"ngFor","ngForOf"],[1,"fas","fa-spinner","fa-spin"],[1,"far","fa-check","text-success"],[1,"fas","fa-times-circle","text-error"],[1,"list-group-item","rounded-0","border-left-0","border-right-0"],[1,"fa-1x",2,"display","inline-block"],["class","status-details",4,"ngIf"],[1,"fas","fa-info-circle","info-icon"],[1,"status-details"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.TgZ(5,"i",4),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"mat-table",6,7),e.ynx(10,8),e.YNc(11,St,2,0,"mat-header-cell",9),e.YNc(12,vt,2,1,"mat-cell",10),e.BQk(),e.YNc(13,At,1,0,"mat-header-row",11),e.YNc(14,Ct,1,0,"mat-row",12),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"perfect-scrollbar"),e.TgZ(17,"mat-accordion",14),e.YNc(18,Et,12,6,"mat-expansion-panel",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",16),e.TgZ(20,"div",2),e.TgZ(21,"div",17),e.TgZ(22,"div",18),e.TgZ(23,"button",19),e.NdJ("click",function(){return i.closeDialog()}),e._uU(24,"CLOSE"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij("",i.actionName," "),e.xp6(2),e.Oqu(i.actionDescription),e.xp6(2),e.Q6J("dataSource",e.DdM(6,Ot)),e.xp6(5),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(4),e.Q6J("ngForOf",i.machinesWithStatuses))},directives:[_.uh,_.xY,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,M.Vv,I.pp,T.sg,I.ib,I.yz,T.O5,L.lW],styles:["#computersList[_ngcontent-%COMP%]{min-height:70vh;height:70vh;overflow:hidden;position:relative}.status-details[_ngcontent-%COMP%]{padding-left:34px;margin-bottom:0}.info-icon[_ngcontent-%COMP%]{color:#0074a8}"]}),n})(),Lt=(()=>{class n extends D.q{constructor(t,i){super(t,i)}getMetrics(t,i){return this.get(b.f.ENVIRONMENT_METRICS(t,i))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN),e.LFG(x.w))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qt(n,o){1&n&&(e.TgZ(0,"mat-header-cell",24),e._uU(1,"Name"),e.qZA())}function Rt(n,o){if(1&n&&(e.TgZ(0,"mat-cell",25),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Ut(n,o){1&n&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"Value"),e.qZA())}function Ht(n,o){if(1&n&&(e.TgZ(0,"mat-cell",26),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.value," ")}}function Ft(n,o){1&n&&e._UZ(0,"mat-header-row",27)}function Yt(n,o){1&n&&e._UZ(0,"mat-row",27)}function Pt(n,o){1&n&&(e.TgZ(0,"span",28),e._UZ(1,"i",29),e.TgZ(2,"i"),e._uU(3,"Refreshing..."),e.qZA(),e.qZA())}const ae=function(){return["name","value"]};let Jt=(()=>{class n{constructor(t,i,s){this.data=t,this.dialog=i,this.metricsService=s,this.icons=g.R.icons.fontAwesome,this.dataSource=[],this.onRefresh=new p.xQ,this.clickDelay=100,this.computerId=t.computerId,this.environmentId=t.environmentId,this.actionDescription=t.actionDescription,this.actionName=t.actionName}ngOnInit(){this.fetchMetrics()}fetchMetrics(){this.isLoading=!0,this.metricsService.getMetrics(this.environmentId,this.computerId).subscribe(t=>{t&&(this.dataSource=[...t]),this.isLoading=!1})}ngAfterViewInit(){this.refreshSubscription=this.onRefresh.pipe((0,A.b)(this.clickDelay)).subscribe(this.fetchMetrics.bind(this))}closeDialog(){this.dialog.close()}unSubscribeAll(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngOnDestroy(){this.unSubscribeAll()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.WI),e.Y36(_.so),e.Y36(Lt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["metrics-history"]],decls:30,vars:9,consts:[["mat-dialog-title",""],[1,"mat-dialog-actions","border-bottom","mb-0"],[1,"container"],[1,"action-title"],[1,"action-description"],["mat-dialog-content",""],["id","metricsList"],[3,"dataSource"],["table",""],["matColumnDef","name"],["style","max-width: 230px;","class","pl-3",4,"matHeaderCellDef"],["style","max-width: 230px;","class","text-left pl-3",4,"matCellDef"],["matColumnDef","value"],[4,"matHeaderCellDef"],["class","text-left",4,"matCellDef"],["class","pl-0",4,"matHeaderRowDef"],["class","pl-0",4,"matRowDef","matRowDefColumns"],[1,"mat-dialog-actions","border-top"],[1,"row","no-gutters","align-items-center"],[1,"col","text-letf"],["class","",4,"ngIf"],[1,"col","text-right"],["mat-raised-button","",3,"disabled","click"],["color","primary","mat-raised-button","",3,"click"],[1,"pl-3",2,"max-width","230px"],[1,"text-left","pl-3",2,"max-width","230px"],[1,"text-left"],[1,"pl-0"],[1,""],[1,"fas","fa-spinner","fa-spin"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.TgZ(5,"i",4),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"perfect-scrollbar"),e.TgZ(10,"mat-table",7,8),e.ynx(12,9),e.YNc(13,qt,2,0,"mat-header-cell",10),e.YNc(14,Rt,2,1,"mat-cell",11),e.BQk(),e.ynx(15,12),e.YNc(16,Ut,2,0,"mat-header-cell",13),e.YNc(17,Ht,2,1,"mat-cell",14),e.BQk(),e.YNc(18,Ft,1,0,"mat-header-row",15),e.YNc(19,Yt,1,0,"mat-row",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",17),e.TgZ(21,"div",2),e.TgZ(22,"div",18),e.TgZ(23,"div",19),e.YNc(24,Pt,4,0,"span",20),e.qZA(),e.TgZ(25,"div",21),e.TgZ(26,"button",22),e.NdJ("click",function(a){return i.onRefresh.next(a)}),e._uU(27,"REFRESH"),e.qZA(),e.TgZ(28,"button",23),e.NdJ("click",function(){return i.closeDialog()}),e._uU(29,"CLOSE"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij("",i.actionName," "),e.xp6(2),e.Oqu(i.actionDescription),e.xp6(4),e.Q6J("dataSource",i.dataSource),e.xp6(8),e.Q6J("matHeaderRowDef",e.DdM(7,ae)),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(8,ae)),e.xp6(5),e.Q6J("ngIf",i.isLoading),e.xp6(2),e.Q6J("disabled",i.isLoading))},directives:[_.uh,_.xY,M.Vv,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,T.O5,L.lW],styles:[".mat-subheader[_ngcontent-%COMP%]{color:#000}.mat-subheader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-style:italic}#metricsList[_ngcontent-%COMP%]{min-height:60vh;min-width:900px;height:60vh;overflow:hidden;position:relative}"]}),n})();class re{}var E=c(78033),ce=c(9699);let S=(()=>{class n{}return n.detachDiskKey="detachDisk",n.deleteMachineKey="deleteMachine",n.openInVSphereKey="openInVSphere",n})();class Qt{constructor(){this.actionStatus=new Map,this.actionStatus.set(S.detachDiskKey,!1),this.actionStatus.set(S.deleteMachineKey,!1),this.actionStatus.set(S.openInVSphereKey,!1)}set(o,t){this.actionStatus.set(o,t)}get(o){return this.actionStatus.get(o)}}var le=c(17530),de=c(27221),me=c(24850),ue=c(61737);let jt=(()=>{class n{constructor(t,i){this.http=t,this.messagingService=i}handleError(t){return t.error instanceof ErrorEvent?this.messagingService.sendErrorMessage(t.error.message):this.messagingService.sendErrorMessage(t.message),(0,ue._)("Something bad happened; please try again later.")}getComputers(t){return this.http.get(b.f.ENVIRONMENT_COMPUTERS(t.id),{headers:{"Content-Type":"application/json"}}).pipe((0,de.K)(this.handleError.bind(this))).pipe((0,me.U)(i=>i))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN),e.LFG(x.w))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var pe=c(66591),Gt=c(23753),he=c(61709);let Vt=(()=>{class n{constructor(t){this.http=t}downloadRdpFile(t,i){return this.http.get(b.f.getExecuteRemoteDesktopActionUrl(t,i),{responseType:"blob"}).pipe((0,he.zg)(s=>"application/json"===s.type?this.parseErrorMessage(s):new ee.X(s).asObservable()),(0,de.K)(s=>{if(s.error&&s.error instanceof Blob)return this.parseErrorMessage(s.error);const a=s.message.replace("Error: ","");return(0,ue._)(a)}))}parseErrorMessage(t){const i=new FileReader;let s=(0,Gt.R)(i,"loadend").pipe((0,me.U)(a=>{const r=JSON.parse(a.target.result);throw new Error(r.exception.exceptionMessage)}));return i.readAsText(t),s}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var $t=c(17974),zt=c(37130);let Kt=(()=>{class n extends D.q{constructor(t,i){super(t,i)}clearErrors(t){let i=JSON.stringify(t);return this.post(b.f.EXECUTE_CLEAR_ERRORS_ACTION_URL,i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN),e.LFG(x.w))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Wt{}class Bt{}let Xt=(()=>{class n{constructor(t,i){this.actionHttpService=t,this.actionHistoryService=i}addAction(t,i,s,a){const r=new Wt;return r.subscriberId=j.subscriptionId,r.actionName=i,r.environmentId=s,r.computerActions=[...a.map(l=>{const u=new Bt;return u.actionId=N.c.newGuid(),u.computerId=l.id,u})],this.actionHistoryService.addAction(t,r.actionName,s,a,r.computerActions),r}executeAction(t){return this.actionHttpService.executeAction(t)}setError(t,i){const s=this.actionHistoryService.getAction(t);if(s)for(let a of s.taskItems)a.status=f.Failed,a.taskStatuses.push(new ie(i,k.Task,f.Failed,N.c.newGuid()))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(P),e.LFG(w))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ei=(()=>{class n extends D.q{constructor(t,i){super(t,i)}resetMaintenance(t){let i=JSON.stringify(t);return this.post(b.f.EXECUTE_RESET_MAINTENANCE_ACTION_URL,i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN),e.LFG(x.w))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ge=c(21086),ti=c(41746),ii=c(72986);let ni=(()=>{class n extends D.q{constructor(t,i,s){super(t,i),this.progressHubService=s}getVirtualMachineVSphereUrl(t,i,s){return this.get(b.f.getVirtualMachineVSphereUrl(t,i,s)).pipe((0,z.w)(a=>(0,ge.of)(a.url)))}detachVirtualMachine(t,i,s){const a=j.subscriptionId,r=N.c.newGuid(),l=this.delete(b.f.detachVirtualMachineDashboardActionUrl(t,i,s,!0,!0,a,r)),u=this.progressHubService.taskCompletion$.pipe((0,U.h)(h=>h.taskId===r),(0,ii.q)(1));return(0,ti.$R)(l,u).pipe((0,he.zg)(h=>(0,ge.of)(h[1])))}deleteVirtualMachine(t,i,s,a,r){return this.delete(b.f.deleteVirtualMachineDashboardActionUrl(t,i,s,a,r))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN),e.LFG(x.w),e.LFG(te.q))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var fe=c(23267),oi=c(71102);function si(n,o){if(1&n&&(e.TgZ(0,"span"),e._UZ(1,"i"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Tol(t.icons.SPINNER)}}function ai(n,o){if(1&n&&(e.TgZ(0,"span"),e._UZ(1,"i"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Tol(t.icon)}}const ri=["*"];let ci=(()=>{class n{constructor(){this.icons=g.R.icons.fontAwesome}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["am-dashboard-action-label"]],inputs:{icon:"icon",loading:"loading"},ngContentSelectors:ri,decls:3,vars:2,consts:[[4,"ngIf"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,si,2,2,"span",0),e.YNc(1,ai,2,2,"span",0),e.Hsn(2)),2&t&&(e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",!i.loading))},directives:[T.O5],styles:[""]}),n})();function li(n,o){1&n&&(e.TgZ(0,"span",12),e._UZ(1,"i",13),e.qZA())}function di(n,o){if(1&n&&(e.TgZ(0,"p"),e.TgZ(1,"span",14),e._UZ(2,"i"),e.qZA(),e.TgZ(3,"span",8),e._uU(4),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Tol(t.icons.TIMES_CIRCLE),e.xp6(2),e.AsE("",t.action.failedTasks,"/",t.action.totalTasks," machines")}}function mi(n,o){if(1&n&&(e.TgZ(0,"div",2),e._UZ(1,"i"),e.qZA(),e.TgZ(2,"div",3),e.TgZ(3,"span",4),e._uU(4),e.qZA(),e.YNc(5,li,2,0,"span",5),e.TgZ(6,"div",6),e.TgZ(7,"p"),e.TgZ(8,"span",7),e._UZ(9,"i"),e.qZA(),e.TgZ(10,"span",8),e._uU(11),e.qZA(),e.qZA(),e.YNc(12,di,5,4,"p",9),e.qZA(),e.qZA(),e.TgZ(13,"div",10),e._uU(14),e.ALo(15,"date"),e.TgZ(16,"p",11),e._uU(17,"more"),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Tol(t.dashboardActions.actions[t.action.key].iconClass),e.xp6(3),e.Oqu(t.dashboardActions.actions[t.action.key].friendlyName),e.xp6(1),e.Q6J("ngIf",!t.action.isCompleted),e.xp6(4),e.Tol(t.icons.CHECK),e.xp6(2),e.AsE("",t.action.succeededTasks,"/",t.action.totalTasks," machines"),e.xp6(1),e.Q6J("ngIf",t.action.failedTasks>0),e.xp6(2),e.hij(" ",e.xi3(15,10,t.action.executionTime,"shortTime")," ")}}let ui=(()=>{class n{constructor(t,i){this.actionHistoryService=t,this.changeDetector=i,this.dashboardActions=m,this.icons=g.R.icons.fontAwesome}ngOnInit(){this.taskItemSubscription=this.actionHistoryService.receiveTaskItems(this.action.id).subscribe(()=>{this.changeDetector.detectChanges()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["action-history-item"]],inputs:{action:"action"},decls:2,vars:1,consts:[[1,"wrapper"],[3,"ngIf"],[1,"action-icon"],[1,"action-details"],[1,"action-name"],["class","pl-1",4,"ngIf"],[1,"action-status"],[1,"succeeded"],[1,"status-label"],[4,"ngIf"],[1,"action-time"],[1,"more"],[1,"pl-1"],[1,"fas","fa-spinner","fa-spin"],[1,"failed"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,mi,18,13,"ng-template",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.action))},directives:[T.O5],pipes:[T.uU],styles:["[_nghost-%COMP%]{display:block;height:102px;max-height:102px;min-height:102px;background-color:#eee;cursor:pointer}[_nghost-%COMP%]:hover{background-color:#e0e0e0}.wrapper[_ngcontent-%COMP%]{box-shadow:0 2px 2px #61616133;height:100px;display:flex;flex-direction:row;padding:.5em .75em}.action-icon[_ngcontent-%COMP%]{width:35px;text-align:right;padding-right:10px;color:#616161}.action-time[_ngcontent-%COMP%]{width:75px;text-align:right;padding-right:5px}.action-name[_ngcontent-%COMP%]{font-size:15px}.action-details[_ngcontent-%COMP%]{flex-grow:1}.succeeded[_ngcontent-%COMP%]{color:#47c354}.failed[_ngcontent-%COMP%]{color:#e6453c}.action-status[_ngcontent-%COMP%]{padding-top:.25em}.action-status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:0;padding-bottom:0;margin:0}.action-status[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{font-size:13px;padding-left:.5em}.more[_ngcontent-%COMP%]{font-size:13px;color:#61616180;padding-top:30px}"]}),n})();function pi(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"action-history-item",1),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openActionDialog(a)}),e.qZA()}2&n&&e.Q6J("action",o.$implicit)}let hi=(()=>{class n{constructor(t,i,s){this.actionHistoryService=t,this.dialogController=i,this.dataRepositoryService=s,this.actions=[]}ngOnInit(){this.environmentSubscription=this.dataRepositoryService.currentEnvironmentSubject.subscribe(t=>{this.unsubscribeActionSubscriptions(),this.actions=[],null!=t&&(this.actionSubscription=this.actionHistoryService.receiveActions(t.id).subscribe(i=>{this.actions.unshift(i)}))})}openActionDialog(t){this.dialogController.dialogSubject.next({component:se,panelClass:"actions-dialog",data:{actionId:t.id}})}unsubscribeActionSubscriptions(){this.actionSubscription&&this.actionSubscription.unsubscribe()}ngOnDestroy(){this.environmentSubscription&&this.environmentSubscription.unsubscribe(),this.unsubscribeActionSubscriptions()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w),e.Y36(pe.Y),e.Y36(oe.Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["action-history"]],decls:1,vars:1,consts:[[3,"action","click",4,"ngFor","ngForOf"],[3,"action","click"]],template:function(t,i){1&t&&e.YNc(0,pi,1,1,"action-history-item",0),2&t&&e.Q6J("ngForOf",i.actions)},directives:[T.sg,ui],styles:["[_nghost-%COMP%]{display:block;height:100%}"]}),n})();const gi=["table"];function fi(n,o){if(1&n&&(e.TgZ(0,"h4",28),e.TgZ(1,"span",29),e._uU(2),e.qZA(),e.TgZ(3,"span",30),e._UZ(4,"i",31),e._uU(5),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.selectedEnvironmentName),e.xp6(1),e.ekj("invisible",!t.showSpinner),e.xp6(2),e.hij(" ",t.updateMessage," ")}}function _i(n,o){1&n&&(e.TgZ(0,"h4",28),e._uU(1," Environment is not selected "),e.qZA())}function bi(n,o){1&n&&(e.TgZ(0,"div",32),e._UZ(1,"loading-container",33),e.qZA()),2&n&&(e.xp6(1),e.Q6J("loadingText","Loading...")("loading",!0))}function Ti(n,o){1&n&&(e.TgZ(0,"div",32),e._uU(1," There are no machines configured in this environment "),e.qZA())}function Si(n,o){1&n&&(e.TgZ(0,"div",34),e._uU(1," Please select an environment "),e.qZA())}function vi(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-header-cell",54),e.TgZ(1,"mat-checkbox",55),e.NdJ("click",function(s){return e.CHM(t),e.oxw(2).toggleAll(s)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.isAllFilteredComputersSelected)("indeterminate",t.isAnyFilteredComputersSelected&&!t.isAllFilteredComputersSelected)}}function Ai(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-cell",56),e.TgZ(1,"mat-checkbox",57),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(){const a=e.CHM(t).$implicit;return e.oxw(2).toggleMarked(a)}),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isMarked)}}function Ci(n,o){1&n&&(e.TgZ(0,"mat-header-cell",58),e._uU(1,"Machine"),e.qZA())}function xi(n,o){if(1&n&&(e.TgZ(0,"mat-cell",59),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.computerName,"")}}function Zi(n,o){1&n&&(e.TgZ(0,"mat-header-cell",58),e._uU(1," Collection"),e.qZA())}function ki(n,o){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.collection,"")}}function yi(n,o){1&n&&(e.TgZ(0,"mat-header-cell",58),e._uU(1," Status"),e.qZA())}function Di(n,o){if(1&n&&(e.TgZ(0,"mat-cell",59),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.status,"")}}function Ii(n,o){1&n&&(e.TgZ(0,"mat-header-cell",60),e._uU(1," Errors "),e.qZA())}function Ni(n,o){if(1&n&&(e.TgZ(0,"mat-cell",61),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.errors,"")}}function Mi(n,o){1&n&&(e.TgZ(0,"mat-header-cell",62),e._uU(1," Maintenance status "),e.qZA())}function wi(n,o){if(1&n&&(e.TgZ(0,"mat-cell",63),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.maintenanceStatus," ")}}function Ei(n,o){1&n&&e._UZ(0,"mat-header-row",64)}function Oi(n,o){1&n&&e._UZ(0,"mat-row",64)}function Li(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-table",35,36),e.NdJ("matSortChange",function(s){return e.CHM(t),e.oxw().sortData(s)}),e.ynx(2,37),e.YNc(3,vi,2,2,"mat-header-cell",38),e.YNc(4,Ai,2,1,"mat-cell",39),e.BQk(),e.ynx(5,40),e.YNc(6,Ci,2,0,"mat-header-cell",41),e.YNc(7,xi,2,1,"mat-cell",42),e.BQk(),e.ynx(8,43),e.YNc(9,Zi,2,0,"mat-header-cell",41),e.YNc(10,ki,2,1,"mat-cell",44),e.BQk(),e.ynx(11,45),e.YNc(12,yi,2,0,"mat-header-cell",41),e.YNc(13,Di,2,1,"mat-cell",42),e.BQk(),e.ynx(14,46),e.YNc(15,Ii,2,0,"mat-header-cell",47),e.YNc(16,Ni,2,1,"mat-cell",48),e.BQk(),e.ynx(17,49),e.YNc(18,Mi,2,0,"mat-header-cell",50),e.YNc(19,wi,2,1,"mat-cell",51),e.BQk(),e.YNc(20,Ei,1,0,"mat-header-row",52),e.YNc(21,Oi,1,0,"mat-row",53),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("dataSource",t.dataSource),e.xp6(20),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}const qi=[{path:"",component:(()=>{class n{constructor(t,i,s,a,r,l,u,h,v,y,G){this.messagingService=t,this.computersService=i,this.dialogController=s,this.remoteDesktopService=a,this.messageDialogService=r,this.fileSaver=l,this.errorActionService=u,this.actionHistoryService=h,this.actionService=v,this.maintenanceActionService=y,this.vSphereActionService=G,this.icons=g.R.icons.fontAwesome,this.displayedColumns=["marker","computerName","collection","status","errors","maintenanceStatus"],this.dataSource=new d.by([]),this.onOpenLogs=new p.xQ,this.onOpenMetrics=new p.xQ,this.onRunAction=new p.xQ,this.onOpenTrackingData=new p.xQ,this.actions=m,this.pauseTimer$=new p.xQ,this.resumeTimer$=new p.xQ,this.pollingInterval$=(0,xe.F)(1e3).pipe((0,Te.h)(-1)),this.loadingComplete=!1,this.actionStatus=new Qt,this.dashboardActionStatusKey=S,this.clickDelay=n.CLICK_DELAY,this.refreshCounter=n.POLLING_INTERVAL,this.showSpinner=!1,this.actionStatus.set("detachDisk",!1),this.actionStatus.set("deleteMachine",!1)}ngOnInit(){this.loadingComplete=!1,this.selectedEnvironmentName="Environment is not selected",this.dataSource.data=[],this.dataSource.filterPredicate=this.filterPredicate,Ce.h.currentEnvironment.subscribe(t=>{this.selectedEnvironment=t,t?(this.selectedEnvironmentName=t.name,this.computersService.getComputers(this.selectedEnvironment).subscribe(i=>{this.dataSource.data=i.map(s=>({...s,computerName:s.computerName.trim()})),this.startPolling(),this.loadingComplete=!0},i=>{console.error(i),this.startPolling(),this.loadingComplete=!0})):(this.selectedEnvironmentName="Environment is not selected",this.loadingComplete=!0)}),this.refreshCounter=n.POLLING_INTERVAL,this.pollingTimer$=(0,F.T)(this.pauseTimer$,this.resumeTimer$).pipe((0,Se.O)(!0),(0,z.w)(t=>t?this.pollingInterval$:Ze.E),(0,ve.R)((t,i)=>i?i+t:t,this.refreshCounter),(0,Ae.o)(t=>t>=0))}setRefreshMessage(t){this.updateMessage=`Updating in ${t}`}startPolling(){null!=this.selectedEnvironment&&(this.showSpinner=!0,this.setRefreshMessage(n.POLLING_INTERVAL),null!=this.timerSubscription&&this.timerSubscription.unsubscribe(),this.timerSubscription=this.pollingTimer$.subscribe(t=>{this.setRefreshMessage(t),0===t&&(this.showSpinner=!1,this.pauseTimer$.next(!0),this.timerSubscription&&this.timerSubscription.unsubscribe(),this.refreshData())}))}ngOnDestroy(){this.dataSource.data=[],this.metricsSubscription&&this.metricsSubscription.unsubscribe(),this.timerSubscription&&this.timerSubscription.unsubscribe()}getSourceOfSelectedComputers(){return this.dataSource.filteredData.length>0?this.dataSource.filteredData:this.dataSource.data}ngAfterViewInit(){!this.selectedEnvironment||(this.dataSource.sort=this.sort,this.logsSubscription=this.onOpenLogs.pipe((0,A.b)(this.clickDelay)).subscribe(()=>{if(this.isMultipleSelected||!this.isAnyComputersSelected||!this.selectedEnvironment)return;const t=this.getSourceOfSelectedComputers().find(i=>i.isMarked);!t||this.dialogController.dialogSubject.next({component:Ne,data:{environmentId:this.selectedEnvironment.id,computerId:t.id}})}),this.metricsSubscription=this.onOpenMetrics.pipe((0,A.b)(this.clickDelay)).subscribe(()=>{if(this.isMultipleSelected||!this.isAnyComputersSelected||!this.selectedEnvironment)return;const t=this.getSourceOfSelectedComputers().find(i=>i.isMarked);!t||this.dialogController.dialogSubject.next({component:Jt,panelClass:"actions-dialog",data:{environmentId:this.selectedEnvironment.id,computerId:t.id,actionName:"Metric",actionDescription:t.computerName}})}),this.actionSubscription=this.onRunAction.pipe((0,A.b)(this.clickDelay)).subscribe(t=>{const{friendlyName:i,actionDescription:s,name:a,reboot:r,showConfirmation:l}=t;if(!this.selectedEnvironment)return;const u=this.dataSource.data.filter(h=>h.isMarked);0!==u.length&&(l?this.messageDialogService.openConfirmationDialog(this.getConfirmationMessage(i,u)).subscribe(h=>{"Confirmed"===h&&this.executeAction(i,s,a,r,u)}):this.executeAction(i,s,a,r,u))}),this.onOpenTrackingData.pipe((0,A.b)(this.clickDelay)).subscribe(()=>{if(!this.selectedEnvironment||!0===this.multipleOrNoneSelected)return;const t=this.getSourceOfSelectedComputers().filter(i=>i.isMarked);0!==t.length&&this.dialogController.dialogSubject.next({component:et,panelClass:"actions-dialog",data:{environmentId:this.selectedEnvironment.id,computer:t[0],actionName:"Reset tracking data",actionDescription:t[0].computerName}})}))}refreshData(){this.pauseTimer$.next();const t=this.dataSource.filter,i=this.dataSource.data.filter(s=>s.isMarked).map(s=>s.id);this.computersService.getComputers(this.selectedEnvironment).subscribe(s=>{this.dataSource.data=s.map(a=>({...a,computerName:a.computerName.trim(),isMarked:null!=i.find(r=>r===a.id)})),this.applyFilter(t),this.startPolling()},s=>{console.error(s),this.startPolling()})}executeAction(t,i,s,a,r){const l=typeof a<"u"&&!1===a?`${s}-no-reboot`:s,u=N.c.newGuid(),h=this.actionService.addAction(u,l,this.selectedEnvironment.id,r);this.dialogController.dialogSubject.next({component:se,panelClass:"actions-dialog",data:{actionId:u}}),this.actionService.executeAction(h).subscribe(()=>{},v=>{this.actionService.setError(u,v)})}filterPredicate(t,i){const s=Number.parseInt(i,10);return t.collection&&t.collection.toLowerCase().indexOf(i)>=0||t.computerName.toLowerCase().indexOf(i)>=0||t.maintenanceStatus.toLowerCase().indexOf(i)>=0||t.status.toLowerCase().indexOf(i)>=0||!Number.isNaN(s)&&s===t.errors}applyFilter(t){t=t.trim().toLowerCase(),this.dataSource.filter=t,this.setSelectedStatus()}setSelectedStatus(){const t=this.dataSource.data.filter(a=>a.isMarked).length,i=this.dataSource.filteredData.length,s=this.dataSource.filteredData.filter(a=>a.isMarked).length;this.isAllComputersSelected=t>0&&t===this.dataSource.data.length,this.isAnyComputersSelected=t>0,this.isMultipleSelected=t>1,this.isAnyFilteredComputersSelected=s>0,this.isAllFilteredComputersSelected=s>0&&i===s}toggleMarked(t){t.isMarked=!t.isMarked,this.setSelectedStatus()}get multipleOrNoneSelected(){return this.isMultipleSelected||this.isAllComputersSelected&&this.dataSource.data.length>1||!this.isAnyComputersSelected}get noneSelected(){return 0===this.dataSource.data.length||!this.isAnyComputersSelected}toggleReboot(t,i){i.reboot=!i.reboot}toggleAll(t){t.preventDefault();const i=null==this.dataSource.filteredData.find(a=>a.isMarked);this.dataSource.filteredData.forEach(a=>{a.isMarked=i});const s=this.dataSource.data.filter(a=>a.isMarked).length;this.isAllComputersSelected=s>0&&s===this.dataSource.data.length,this.isAnyComputersSelected=s>0,this.isMultipleSelected=s>1,this.isAnyFilteredComputersSelected=i,this.isAllFilteredComputersSelected=i}sortData(t){const i=[...this.dataSource.data.slice()];if(!t.active||""===t.direction)return void(this.dataSource.data=i);const s="asc"===t.direction;this.dataSource.data=i.sort((a,r)=>{switch(t.active){case"computerName":return(0,E.qu)(a.computerName,r.computerName,s);case"collection":return(0,E.qu)(a.collection??"",r.collection??"",s);case"status":return(0,E.qu)(a.status??"",r.status??"",s);case"errors":return(0,E.WQ)(a.errors,r.errors,s);case"maintenanceStatus":return(0,E.qu)(a.maintenanceStatus??"",r.maintenanceStatus??"",s);default:return 0}})}getConfirmationMessage(t,i){return`Do you want to execute "${t}" action on ${1===i.length?`"${i[0].computerName}"`:`${i.length} machines`}?`}executeRemoteDesktopAction(){if(!0===this.multipleOrNoneSelected)return;const t=this.getSourceOfSelectedComputers().find(i=>i.isMarked);this.remoteDesktopService.downloadRdpFile(this.selectedEnvironment.id,t.id).subscribe(i=>{this.fileSaver.save(i,`${t.computerName}.rdp`)},i=>{this.messagingService.sendErrorMessage(i)})}executeClearErrorsAction(){if(!0===this.noneSelected)return;const t=this.getSourceOfSelectedComputers().filter(i=>i.isMarked);this.messageDialogService.openConfirmationDialog(this.getConfirmationMessage("Clear errors",t)).subscribe(i=>{if("Confirmed"===i){const s=t.map(a=>{const r=new re;return r.environmentId=this.selectedEnvironment.id,r.computerId=a.id,r});this.errorActionService.clearErrors(s).subscribe(()=>{},a=>{this.messagingService.sendErrorMessage(a)},()=>{this.refreshData()})}})}executeResetMaintenanceAction(){if(!0===this.noneSelected)return;const t=this.getSourceOfSelectedComputers().filter(l=>l.isMarked),i=t.map(l=>l.collectionId),s=i.filter((l,u)=>i.indexOf(l)===u);this.messageDialogService.openConfirmationDialog(`Do you want to reset maintenance status for ${1===s.length?`collection "${t[0].collection}"`:`${s.length} collections`}?`).subscribe(l=>{if("Confirmed"===l){const u=t.map(h=>{const v=new re;return v.environmentId=this.selectedEnvironment.id,v.computerId=h.id,v});this.maintenanceActionService.resetMaintenance(u).subscribe(()=>{},h=>{},()=>{this.refreshData()})}})}executeOpenInVSphereAction(){if(!0===this.multipleOrNoneSelected||this.actionStatus.get(S.openInVSphereKey))return;this.actionStatus.set(S.openInVSphereKey,!0);const t=this.getSourceOfSelectedComputers().find(i=>i.isMarked);this.vSphereActionService.getVirtualMachineVSphereUrl(t.computerName,this.selectedEnvironment.id,t.collectionId).subscribe(i=>{window.open(i,"_blank"),this.actionStatus.set(S.openInVSphereKey,!1)},i=>{console.error(i),this.actionStatus.set(S.openInVSphereKey,!1)})}executeDetachDiskAction(){if(!0===this.multipleOrNoneSelected||this.actionStatus.get(S.detachDiskKey))return;const t=this.getSourceOfSelectedComputers().find(s=>s.isMarked);new ce._,this.messageDialogService.openConfirmationDialog(`Are you sure you want to detach disk and delete virtual machine "${t.computerName}" from VMware?`).subscribe(s=>{"Confirmed"===s&&(this.actionStatus.set(S.detachDiskKey,!0),this.vSphereActionService.detachVirtualMachine(t.computerName,this.selectedEnvironment.id,t.collectionId).subscribe(a=>{switch(this.actionStatus.set(S.detachDiskKey,!1),a.resultType){case le.C.Succeeded:this.deleteComputerRow(t);break;case le.C.Failed:this.messagingService.sendErrorMessage(a.message)}},a=>{this.actionStatus.set(S.detachDiskKey,!1)}))})}executeDeleteVirtualMachineAction(){if(!0===this.multipleOrNoneSelected||this.actionStatus.get(S.deleteMachineKey))return;const t=this.getSourceOfSelectedComputers().find(s=>s.isMarked),i=new ce._;i.message=`Are you sure you want to delete virtual machine "${t.computerName}" from VMware?`,i.checkboxText="Delete from disk",this.messageDialogService.openConfirmationDialog(i).subscribe(s=>{null!=s&&"Confirmed"===s.confirmed&&this.deleteComputer(t,!1,s.checkboxChecked,"deleteMachine")})}deleteComputer(t,i,s,a){this.actionStatus.set(a,!0),this.vSphereActionService.deleteVirtualMachine(t.computerName,this.selectedEnvironment.id,t.collectionId,i,s).subscribe(()=>{this.actionStatus.set(a,!1),this.deleteComputerRow(t)},r=>{this.actionStatus.set(a,!1)})}deleteComputerRow(t){const i=this.dataSource.data.findIndex(s=>s.id===t.id);-1!==i&&(this.dataSource.data.splice(i,1),this.setSelectedStatus(),this.dashboardTable?.renderRows())}}return n.POLLING_INTERVAL=30,n.CLICK_DELAY=100,n.\u0275fac=function(t){return new(t||n)(e.Y36(x.w),e.Y36(jt),e.Y36(pe.Y),e.Y36(Vt),e.Y36($t.T),e.Y36(zt.m9),e.Y36(Kt),e.Y36(w),e.Y36(Xt),e.Y36(ei),e.Y36(ni))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dashboard"]],viewQuery:function(t,i){if(1&t&&(e.Gf(gi,5),e.Gf(H.YE,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.dashboardTable=s.first),e.iGM(s=e.CRH())&&(i.sort=s.first)}},decls:96,vars:94,consts:[["autosize","",1,"example-container"],[1,"container"],[1,"col-lg-11","offset-lg-1"],[1,"full-width","dashboard-search"],["matPrefix","",1,"mr-3"],[1,"far","fa-search"],["matInput","","placeholder","Enter your search term...",3,"keyup"],[1,"table-pre-header","mb-0","mt-0","pt-2","pb-2","pl-2","pr-2"],["class","mb-0 environment-title",4,"ngIf"],["class","pt-4 pl-2 mb-0",4,"ngIf"],["class","pt-4 pl-3 mb-0",4,"ngIf"],["class","dashboard-table","matSort","",3,"dataSource","matSortChange",4,"ngIf"],[1,"table-pre-footer","mb-0","mt-0","pt-2","pb-2","pl-2","pr-2"],["position","end","opened","true","mode","side",1,"",3,"disableClose"],["drawer",""],[1,"container","pl-0","pr-0"],[1,"col-2","pl-0","pr-0"],[1,"",2,"width","20rem"],["label","ACTIONS",3,"disabled"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"text-uppercase"],[1,"list-unstyled","sidebar-actions"],[1,"pointer",3,"click"],[3,"icon","loading"],[1,"list-group-item","pr-0"],["align","end",1,"rebootable",3,"checked","disabled","click","change"],["label","HISTORY",3,"disabled"],[1,"mb-0","environment-title"],[1,"float-left"],[1,"float-right","pr-2"],[1,"fas","fa-spinner","fa-pulse"],[1,"pt-4","pl-2","mb-0"],[3,"loadingText","loading"],[1,"pt-4","pl-3","mb-0"],["matSort","",1,"dashboard-table",3,"dataSource","matSortChange"],["table",""],["matColumnDef","marker"],["class","marker-column-header text-left pl-3",4,"matHeaderCellDef"],["class","text-left marker-column pl-3",4,"matCellDef"],["matColumnDef","computerName"],["mat-sort-header","",4,"matHeaderCellDef"],["class","text-left",4,"matCellDef"],["matColumnDef","collection"],[4,"matCellDef"],["matColumnDef","status"],["matColumnDef","errors"],["class","errors-column text-left","mat-sort-header","",4,"matHeaderCellDef"],["class","errors-column text-left",4,"matCellDef"],["matColumnDef","maintenanceStatus"],["class","maintenance-column text-left","mat-sort-header","",4,"matHeaderCellDef"],["class","maintenance-column text-left",4,"matCellDef"],["class","pl-0",4,"matHeaderRowDef"],["class","pl-0",4,"matRowDef","matRowDefColumns"],[1,"marker-column-header","text-left","pl-3"],["matTooltip","Select or unselect all computers",3,"checked","indeterminate","click"],[1,"text-left","marker-column","pl-3"],[3,"checked","click","change"],["mat-sort-header",""],[1,"text-left"],["mat-sort-header","",1,"errors-column","text-left"],[1,"errors-column","text-left"],["mat-sort-header","",1,"maintenance-column","text-left"],[1,"maintenance-column","text-left"],[1,"pl-0"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-drawer-container",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"mat-form-field",3),e.TgZ(4,"span",4),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"input",6),e.NdJ("keyup",function(a){return i.applyFilter(a.target.value)}),e.qZA(),e.qZA(),e.TgZ(7,"div",7),e.YNc(8,fi,6,4,"h4",8),e.YNc(9,_i,2,0,"h4",8),e.qZA(),e.YNc(10,bi,2,2,"div",9),e.YNc(11,Ti,2,0,"div",9),e.YNc(12,Si,2,0,"div",10),e.YNc(13,Li,22,3,"mat-table",11),e.TgZ(14,"p",12),e._uU(15," \xa0 "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"mat-drawer",13,14),e.TgZ(18,"div",15),e.TgZ(19,"div",16),e.TgZ(20,"div",17),e.TgZ(21,"mat-tab-group"),e.TgZ(22,"mat-tab",18),e.TgZ(23,"ul",19),e.TgZ(24,"li",20),e.TgZ(25,"div",21),e._uU(26,"Administration"),e.qZA(),e.TgZ(27,"ul",22),e.TgZ(28,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.EnableLogons)}),e._UZ(29,"i"),e._uU(30),e.qZA(),e.TgZ(31,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.DisableLogons)}),e._UZ(32,"i"),e._uU(33),e.qZA(),e.TgZ(34,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.DrainLogons)}),e._UZ(35,"i"),e._uU(36),e.qZA(),e.TgZ(37,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.InvokeMaintenance)}),e._UZ(38,"i"),e._uU(39),e.qZA(),e.TgZ(40,"li",23),e.NdJ("click",function(){return i.executeResetMaintenanceAction()}),e._UZ(41,"i"),e._uU(42," Reset maintenance status "),e.qZA(),e.TgZ(43,"li",23),e.NdJ("click",function(){return i.executeRemoteDesktopAction()}),e._UZ(44,"i"),e._uU(45," Remote desktop "),e.qZA(),e.TgZ(46,"li",23),e.NdJ("click",function(){return i.executeOpenInVSphereAction()}),e.TgZ(47,"am-dashboard-action-label",24),e._uU(48," Open in vSphere "),e.qZA(),e.qZA(),e.TgZ(49,"li",23),e.NdJ("click",function(){return i.executeDetachDiskAction()}),e.TgZ(50,"am-dashboard-action-label",24),e._uU(51," Detach disk "),e.qZA(),e.qZA(),e.TgZ(52,"li",23),e.NdJ("click",function(){return i.executeDeleteVirtualMachineAction()}),e.TgZ(53,"am-dashboard-action-label",24),e._uU(54," Delete virtual machine "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"li",25),e.TgZ(56,"div",21),e._uU(57,"run action"),e.qZA(),e.TgZ(58,"ul",22),e.TgZ(59,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.TestMachine)}),e._UZ(60,"i"),e._uU(61),e.qZA(),e.TgZ(62,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.UpdateCache)}),e._UZ(63,"i"),e._uU(64),e.qZA(),e.TgZ(65,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.InitializeAm)}),e._UZ(66,"i"),e._uU(67),e.TgZ(68,"mat-checkbox",26),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){return i.toggleReboot(a,i.actions.InitializeAm)}),e._uU(69,"Enable reboot "),e.qZA(),e.qZA(),e.TgZ(70,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.StartDeployment)}),e._UZ(71,"i"),e._uU(72),e.TgZ(73,"mat-checkbox",26),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){return i.toggleReboot(a,i.actions.StartDeployment)}),e._uU(74," Enable reboot "),e.qZA(),e.qZA(),e.TgZ(75,"li",23),e.NdJ("click",function(){return i.onRunAction.next(i.actions.Reboot)}),e._UZ(76,"i"),e._uU(77),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"li",20),e.TgZ(79,"div",21),e._uU(80,"info"),e.qZA(),e.TgZ(81,"ul",22),e.TgZ(82,"li",23),e.NdJ("click",function(a){return i.onOpenTrackingData.next(a)}),e._UZ(83,"i"),e._uU(84," Tracking data "),e.qZA(),e.TgZ(85,"li",23),e.NdJ("click",function(a){return i.onOpenMetrics.next(a)}),e._UZ(86,"i"),e._uU(87," Metrics "),e.qZA(),e.TgZ(88,"li",23),e.NdJ("click",function(a){return i.onOpenLogs.next(a)}),e._UZ(89,"i"),e._uU(90," Logging history "),e.qZA(),e.TgZ(91,"li",23),e.NdJ("click",function(){return i.executeClearErrorsAction()}),e._UZ(92,"i"),e._uU(93," Clear errors "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(94,"mat-tab",27),e._UZ(95,"action-history"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("ngIf",i.selectedEnvironment),e.xp6(1),e.Q6J("ngIf",!i.selectedEnvironment),e.xp6(1),e.Q6J("ngIf",!(i.dataSource.data&&0!=i.dataSource.data.length||i.loadingComplete)),e.xp6(1),e.Q6J("ngIf",(!i.dataSource.data||0==i.dataSource.data.length)&&i.loadingComplete&&i.selectedEnvironment),e.xp6(1),e.Q6J("ngIf",(!i.dataSource.data||0==i.dataSource.data.length)&&i.loadingComplete&&!i.selectedEnvironment),e.xp6(1),e.Q6J("ngIf",i.dataSource.data&&i.dataSource.data.length>0),e.xp6(3),e.Q6J("disableClose",!0),e.xp6(6),e.Q6J("disabled",!i.selectedEnvironment),e.xp6(6),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.DESKTOP),e.xp6(1),e.hij(" ",i.actions.EnableLogons.friendlyName," "),e.xp6(1),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.OCTAGON),e.xp6(1),e.hij(" ",i.actions.DisableLogons.friendlyName," "),e.xp6(1),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.DOWNLOAD),e.xp6(1),e.hij(" ",i.actions.DrainLogons.friendlyName," "),e.xp6(1),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.PLAY),e.xp6(1),e.hij(" ",i.actions.InvokeMaintenance.friendlyName," "),e.xp6(1),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.UNDO),e.xp6(2),e.ekj("disabled",i.multipleOrNoneSelected),e.xp6(1),e.Tol(i.icons.DESKTOP),e.xp6(2),e.ekj("disabled",i.multipleOrNoneSelected||i.actionStatus.get(i.dashboardActionStatusKey.openInVSphereKey)),e.xp6(1),e.Q6J("icon",i.icons.EXTERNAL_LINK)("loading",i.actionStatus.get(i.dashboardActionStatusKey.openInVSphereKey)),e.xp6(2),e.ekj("disabled",i.multipleOrNoneSelected||i.actionStatus.get(i.dashboardActionStatusKey.detachDiskKey)),e.xp6(1),e.Q6J("icon",i.icons.UNLINK)("loading",i.actionStatus.get(i.dashboardActionStatusKey.detachDiskKey)),e.xp6(2),e.ekj("disabled",i.multipleOrNoneSelected||i.actionStatus.get(i.dashboardActionStatusKey.deleteMachineKey)),e.xp6(1),e.Q6J("icon",i.icons.TRASH)("loading",i.actionStatus.get(i.dashboardActionStatusKey.deleteMachineKey)),e.xp6(6),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.CHECK),e.xp6(1),e.hij(" ",i.actions.TestMachine.friendlyName," "),e.xp6(1),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.REFRESH),e.xp6(1),e.hij(" ",i.actions.UpdateCache.friendlyName," "),e.xp6(1),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.SIGN_IN),e.xp6(1),e.hij(" ",i.actions.InitializeAm.friendlyName," "),e.xp6(1),e.Q6J("checked",i.actions.InitializeAm.reboot)("disabled",i.noneSelected),e.xp6(2),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.SIGN_OUT),e.xp6(1),e.hij(" ",i.actions.StartDeployment.friendlyName," "),e.xp6(1),e.Q6J("checked",i.actions.StartDeployment.reboot)("disabled",i.noneSelected),e.xp6(2),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.SHUT_DOWN),e.xp6(1),e.hij(" ",i.actions.Reboot.friendlyName," "),e.xp6(5),e.ekj("disabled",i.multipleOrNoneSelected),e.xp6(1),e.Tol(i.icons.BAR_CHART),e.xp6(2),e.ekj("disabled",i.multipleOrNoneSelected),e.xp6(1),e.Tol(i.icons.LINE_CHART),e.xp6(2),e.ekj("disabled",i.multipleOrNoneSelected),e.xp6(1),e.Tol(i.icons.HISTORY),e.xp6(2),e.ekj("disabled",i.noneSelected),e.xp6(1),e.Tol(i.icons.TRASH),e.xp6(2),e.Q6J("disabled",!i.selectedEnvironment))},directives:[fe.kh,q.KE,q.qo,K.Nt,T.O5,oi.o,d.BZ,H.YE,d.w1,d.fO,d.ge,W.oG,B.gM,d.Dz,d.ev,H.nU,d.as,d.XQ,d.nj,d.Gk,fe.jA,O.SP,O.uX,ci,hi],styles:["[_nghost-%COMP%]{padding:0!important}.mat-drawer-container[_ngcontent-%COMP%]{color:#616161;background-color:#e4e4e4}.mat-drawer[_ngcontent-%COMP%]{background:#F0F0F0!important;color:#616161}.table-pre-header[_ngcontent-%COMP%]{background:#F0F0F0;border-bottom:1px solid #a7a7a7;text-transform:uppercase;height:60px;display:flex;align-items:center}.table-pre-footer[_ngcontent-%COMP%]{background:#E4E4E4;box-shadow:0 8px 6px -6px #0009}.marker-column[_ngcontent-%COMP%], .marker-column-header[_ngcontent-%COMP%]{width:50px;max-width:50px}.errors-column[_ngcontent-%COMP%]{width:100px;max-width:100px}.list-group-item[_ngcontent-%COMP%]{background-color:transparent}ul.sidebar-actions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{align-items:center;padding-top:.5em;padding-bottom:.5em;font-size:14px;white-space:nowrap;position:relative;display:flex;overflow:hidden}ul.sidebar-actions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:5px}ul.sidebar-actions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{font-size:small;font-style:italic;position:absolute;right:10px}ul.sidebar-actions[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]{color:#61616180;cursor:default!important}.environment-title[_ngcontent-%COMP%]{font-size:15px;padding-left:8px;width:100%}.environment-title[_ngcontent-%COMP%]   span.float-right[_ngcontent-%COMP%]{font-weight:400;text-transform:none}mat-form-field[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{border-top:1.84375em solid transparent}.mat-header-cell[_ngcontent-%COMP%]{font-size:13px}.mat-row[_ngcontent-%COMP%]:nth-child(odd){background-color:#fbfbfb}.mat-cell[_ngcontent-%COMP%]{font-size:13px}"]}),n})()}];let Ri=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[$.Bz.forChild(qi)],$.Bz]}),n})();var Ui=c(80792);let Hi=(()=>{class n{constructor(t,i){t.registerResolver(i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Ui.C),e.LFG(e._Vd))},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[T.ez,_e.U,be.q,Ri,M.Xd]]}),n})()}}]);