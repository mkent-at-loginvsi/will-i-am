(self.webpackChunkAutomationMachine=self.webpackChunkAutomationMachine||[]).push([[155],{81155:(Mr,On,I)=>{"use strict";I.r(On),I.d(On,{ChangeManagementModule:()=>ve});var E=I(36895),pt=I(151),zt=I(82038),se=I(89502),N=I(14353),Dn=I(8929);class Tr{}var fe=I(97292),Fn=I(83222),Vt=I(92198),wr=I(72278),Ze=I(69096),i=I(94650),Sr=I(47363),tt=I(53201),Re=I(67339),Ht=I(57561),Ut=I(80529),Yt=I(6184);let Wt=(()=>{class g extends Ht.q{constructor(c,v){super(c,v)}getChangeManagementModel(c){let v=JSON.stringify(c);return this.post(Re.f.GET_CHANGE_MANAGEMENT_MODEL,v)}getItemChanges(c,v,M,w){return this.get(Re.f.getItemChangesUrl(c,v,M,w))}saveChangeManagementItemsStatuses(c){let v=JSON.stringify(c);return this.post(Re.f.setChangeManagementItemsStatuses,v)}}return g.\u0275fac=function(c){return new(c||g)(i.LFG(Ut.eN),i.LFG(Yt.w))},g.\u0275prov=i.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var nt=I(37777),En=I(11481),Le=I(59549),Zn=I(84385),Rn=I(3238),we=I(71102),Ln=I(31743);class Nn{constructor(){this.title="",this.progressObjectType=Ln.Y.Items}}class qn{static mapToProgressModel(C){let c=new Nn;return c.title=fe.Q[C.type],c.progressValue=C.differencesCount,c.progressValueInPercents=Math.round(0!==C.totalItemsCount?C.differencesCount/C.totalItemsCount*100:0),c.totalItemsCount=C.totalItemsCount,c}}var jt=I(87545),_t=I(42654),ee=I(21086),bt=I(94503),xt=I(19055),Qt=I(68332);let Bn=(()=>{class g extends Ht.q{constructor(c,v){super(c,v)}getEnvironmentChartData(c){return this.get(Re.f.getEnvironmentChangesChartDataUrl(c))}}return g.\u0275fac=function(c){return new(c||g)(i.LFG(Ut.eN),i.LFG(Yt.w))},g.\u0275prov=i.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const zn=["environmentChartCanvas"];let Vn=(()=>{class g{constructor(c){this.chartService=c}ngOnChanges(c){this.loadChartData()}ngAfterViewInit(){this.chartContext=this.chartComponent.nativeElement.getContext("2d"),this.chart=new Qt.Chart(this.chartContext,{type:"line",data:this.chartData,options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,suggestedMax:10}}]}}}),this.updateChart()}loadChartData(){this.chartService.getEnvironmentChartData(this.environmentId).subscribe(c=>{this.packageCount=c.packageCount,this.packageGroupCount=c.packageGroupCount,this.collectionCount=c.collectionCount,this.totalItemCount=c.packageCount+c.packageGroupCount+c.collectionCount,this.currentWeekChangeCount=c.currentWeekChangeCount,this.chartData={labels:c.labels,datasets:[{label:"Changes",borderColor:"#0074A8",data:c.changes,fill:!1}]},this.updateChart()},c=>{console.error(c)})}updateChart(){null!=this.chart&&null!=this.chartData&&(this.chart.data=this.chartData,this.chart.update())}}return g.\u0275fac=function(c){return new(c||g)(i.Y36(Bn))},g.\u0275cmp=i.Xpm({type:g,selectors:[["am-environment-chart"]],viewQuery:function(c,v){if(1&c&&i.Gf(zn,5),2&c){let M;i.iGM(M=i.CRH())&&(v.chartComponent=M.first)}},inputs:{environmentId:"environmentId"},features:[i.TTD],decls:32,vars:6,consts:[[1,"component-wrapper"],[1,"left-side"],[1,"am-chart-subtitle"],[1,"chart-container"],["environmentChartCanvas",""],[1,"right-side"],[1,"changes-label"],[1,"changes-number"],[1,"item-count-info"],[1,"item-count-label"],[1,"item-count-number"],[1,"item-count-label","align-right"],[1,"item-count-number","total-count-number"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"p",2),i._uU(3,"stage"),i.qZA(),i.TgZ(4,"div",3),i._UZ(5,"canvas",null,4),i.qZA(),i.qZA(),i.TgZ(7,"div",5),i.TgZ(8,"p",2),i._uU(9,"this week"),i.qZA(),i.TgZ(10,"p",6),i.TgZ(11,"span",7),i._uU(12),i.qZA(),i._uU(13),i.qZA(),i.TgZ(14,"div",8),i.TgZ(15,"p",9),i.TgZ(16,"span",10),i._uU(17),i.qZA(),i._uU(18," packages"),i.qZA(),i.TgZ(19,"p",9),i.TgZ(20,"span",10),i._uU(21),i.qZA(),i._uU(22," package groups"),i.qZA(),i.TgZ(23,"p",9),i.TgZ(24,"span",10),i._uU(25),i.qZA(),i._uU(26," collections"),i.qZA(),i.qZA(),i.TgZ(27,"p",11),i._uU(28,"total "),i.TgZ(29,"span",12),i._uU(30),i.qZA(),i._uU(31," items"),i.qZA(),i.qZA(),i.qZA()),2&c&&(i.xp6(12),i.Oqu(v.currentWeekChangeCount),i.xp6(1),i.hij(" ",1===v.currentWeekChangeCount?"change":"changes",""),i.xp6(4),i.Oqu(v.packageCount),i.xp6(4),i.Oqu(v.packageGroupCount),i.xp6(4),i.Oqu(v.collectionCount),i.xp6(5),i.Oqu(v.totalItemCount))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:stretch;flex:1}.chart-container[_ngcontent-%COMP%]{flex:1;padding-bottom:10px}.am-chart-subtitle[_ngcontent-%COMP%]{color:#a9a9a9;font-size:.9rem;text-align:left;padding:0;margin:0}.component-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:row}.component-wrapper[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:stretch;min-width:0}.component-wrapper[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{margin-left:20px;flex:none}.changes-label[_ngcontent-%COMP%]{font-size:15px;margin-bottom:8px}.changes-label[_ngcontent-%COMP%]   .changes-number[_ngcontent-%COMP%]{font-size:46px;font-weight:500;color:#616161}.item-count-info[_ngcontent-%COMP%]{padding-bottom:.25em;border-bottom:2px solid #d6d6d6;margin-bottom:4px}.item-count-label[_ngcontent-%COMP%]{font-size:12px;margin-bottom:2px}.item-count-label[_ngcontent-%COMP%]   .item-count-number[_ngcontent-%COMP%]{font-weight:500}.item-count-label[_ngcontent-%COMP%]   .total-count-number[_ngcontent-%COMP%]{font-size:15px}"]}),g})(),Hn=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(c){return new(c||g)},g.\u0275cmp=i.Xpm({type:g,selectors:[["am-production-changes"]],inputs:{environmentId:"environmentId"},decls:2,vars:2,consts:[[3,"title"],[3,"environmentId"]],template:function(c,v){1&c&&(i.TgZ(0,"am-card",0),i._UZ(1,"am-environment-chart",1),i.qZA()),2&c&&(i.Q6J("title","Production"),i.xp6(1),i.Q6J("environmentId",v.environmentId))},directives:[xt.y,Vn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:stretch}am-card[_ngcontent-%COMP%]{flex:1}"]}),g})();function Un(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"am-progress-radial",4),i.NdJ("click",function(){const w=i.CHM(c).$implicit;return i.oxw().highlightEnvironment(w.title)}),i.qZA(),i.qZA()}if(2&g){const c=C.$implicit,v=C.index,M=i.oxw();i.ekj("left-env",v!=M.environmentProgressModels.length-1),i.xp6(1),i.ekj("first-tile",0===v),i.Q6J("radialProgressModel",c)("isEnvironmentSelected",c.title===M.environmentToHighlight)}}function Jt(g,C){if(1&g&&i._UZ(0,"am-production-changes",5),2&g){const c=i.oxw();i.Q6J("environmentId",c.productionEnvironmentId)}}let Yn=(()=>{class g{constructor(c){this.dataRepository=c,this.onEnvironmentSelect=new i.vpe,this.subscription=new _t.w,this.environmentProgressModels=new Array}ngOnInit(){this.setProgressData()}ngOnChanges(c){if(c.tenantId){const v=c.tenantId.currentValue;this.subscription.add(this.dataRepository.tenants.pipe((0,jt.w)(M=>(0,ee.of)(M.find(w=>w.id===v))),(0,jt.w)(M=>(0,ee.of)(M.environments.find(w=>w.type===fe.Q.Production)))).subscribe(M=>{this.productionEnvironmentId=null==M?null:M.id}))}}setProgressData(){let c=this.environmentModels.length;for(let v=0;v<c;v++)if(this.environmentModels[v].type===fe.Q.Test||this.environmentModels[v].type===fe.Q.Acceptance){let M=qn.mapToProgressModel(this.environmentModels[v]);this.environmentProgressModels.push(M)}}highlightEnvironment(c){this.environmentToHighlight=this.environmentToHighlight!==c?c:null,this.onEnvironmentSelect.emit(this.environmentToHighlight)}ngOnDestroy(){this.subscription.unsubscribe()}}return g.\u0275fac=function(c){return new(c||g)(i.Y36(nt.Y))},g.\u0275cmp=i.Xpm({type:g,selectors:[["environment-chain"]],inputs:{environmentModels:"environmentModels",tenantId:"tenantId",environmentToHighlight:"environmentToHighlight"},outputs:{onEnvironmentSelect:"onEnvironmentSelect"},features:[i.TTD],decls:3,vars:2,consts:[[1,"tiles"],["class","pr-0 pl-0 environment-tile",3,"left-env",4,"ngFor","ngForOf"],[3,"environmentId",4,"ngIf"],[1,"pr-0","pl-0","environment-tile"],[3,"radialProgressModel","isEnvironmentSelected","click"],[3,"environmentId"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.YNc(1,Un,2,6,"div",1),i.YNc(2,Jt,1,1,"am-production-changes",2),i.qZA()),2&c&&(i.xp6(1),i.Q6J("ngForOf",v.environmentProgressModels),i.xp6(1),i.Q6J("ngIf",null!=v.productionEnvironmentId&&""!=v.productionEnvironmentId))},directives:[E.sg,bt.J,E.O5,Hn],styles:[".tiles[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding-bottom:1em;flex-wrap:wrap}.no-padding[_ngcontent-%COMP%]{padding:0}.left-env[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;justify-content:flex-end}am-progress-radial[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;margin:0 .3em}am-production-changes[_ngcontent-%COMP%]{flex:1 1;margin:0 0 0 .3em;height:15em;min-width:260px;max-width:590px}.environment-tile[_ngcontent-%COMP%]{flex:none}.first-tile[_ngcontent-%COMP%]{margin-left:0}"]}),g})();var he=I(96308),R=I(30671),ue=I(78033),$t=I(95017);let Ne=(()=>{class g{static getItemDetailsUrl(c,v){return`${g.changeManagementPath}/${c}/${v}`}}return g.changeManagementPath="change-management",g})();var U=(()=>{return(g=U||(U={}))[g.Pending=0]="Pending",g[g.Approved=1]="Approved",g[g.Rejected=2]="Rejected",U;var g})(),_e=I(12320),at=I(65938),Gt=I(46553),Y=I(36981),qe=I(11156);class Kt{constructor(C,c,v){this.itemId=C,this.environmentId=c,this.state=v}}var Z=I(61654);let te=(()=>{class g extends Ht.q{constructor(c,v){super(c,v)}getLayers(c){return this.get(Re.f.GET_ALL_LAYERS(c))}getLayer(c,v,M=null){return this.get(Re.f.GET_LAYER(c,v,M))}}return g.\u0275fac=function(c){return new(c||g)(i.LFG(Ut.eN),i.LFG(Yt.w))},g.\u0275prov=i.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var Be=I(57865),Wn=I(14210),G=I(31491),Xt=I(37084),rt=I(27969),ne=I(50680),ze=I(31263),en=I(62161),it=I(4450),jn=I(90455),ot=I(24006),P=I(4859);function st(g,C){1&g&&i._UZ(0,"mat-header-cell")}function Qn(g,C){1&g&&i._UZ(0,"mat-cell")}function Jn(g,C){1&g&&(i.TgZ(0,"mat-header-cell",17),i._uU(1,"Items"),i.qZA())}function tn(g,C){1&g&&i._UZ(0,"mat-cell")}function $n(g,C){1&g&&(i.TgZ(0,"mat-header-cell",17),i._uU(1,"Transfer (FROM - TO)"),i.qZA())}function Gn(g,C){1&g&&i._UZ(0,"mat-cell")}function Kn(g,C){1&g&&i._UZ(0,"mat-header-row")}function Xn(g,C){1&g&&i._UZ(0,"mat-row")}function ea(g,C){if(1&g&&i._UZ(0,"am-icon",28),2&g){const c=i.oxw(3);i.Q6J("iconClasses",c.icons.SPINNER)}}function ta(g,C){if(1&g&&i._UZ(0,"am-icon",28),2&g){const c=i.oxw(3);i.Q6J("iconClasses",c.icons.CARET_RIGHT)}}function na(g,C){if(1&g&&i._UZ(0,"am-icon",28),2&g){const c=i.oxw(3);i.Q6J("iconClasses",c.icons.CARET_DOWN)}}function m(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"am-collection-settings-step",29),i.NdJ("editedEntityMoveRequest",function(M){return i.CHM(c),i.oxw(3).setEntityMoveRequest(M)}),i.qZA()}if(2&g){const c=i.oxw().$implicit,v=i.oxw(2);i.Q6J("collection",v.getCollectionDetailsModel(c))("entityMoveRequest",v.getEntityMoveRequest(c))("preferSourceValues",!v.targetValuePreference)}}function aa(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"am-layer-settings-step",30),i.NdJ("editedEntityMoveRequest",function(M){return i.CHM(c),i.oxw(3).setEntityMoveRequest(M)}),i.qZA()}if(2&g){const c=i.oxw().$implicit,v=i.oxw(2);i.Q6J("entityMoveRequest",v.getEntityMoveRequest(c))("preferSourceValues",!v.targetValuePreference)}}function ra(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"am-package-settings-step",31),i.NdJ("editedEntityMoveRequest",function(M){return i.CHM(c),i.oxw(3).setEntityMoveRequest(M)}),i.qZA()}if(2&g){const c=i.oxw().$implicit,v=i.oxw(2);i.Q6J("package",v.getPackageDetailsModel(c))("entityMoveRequest",v.getEntityMoveRequest(c))("preferSourceValues",!v.targetValuePreference)}}function ia(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"mat-expansion-panel",18),i.TgZ(2,"mat-expansion-panel-header",19),i.NdJ("click",function(M){const A=i.CHM(c).$implicit,z=i.oxw(2);return z.isExpandable(A)?z.expandItem(M,A):null}),i.TgZ(3,"div",20),i.YNc(4,ea,1,1,"am-icon",21),i.YNc(5,ta,1,1,"am-icon",21),i.YNc(6,na,1,1,"am-icon",21),i.qZA(),i.TgZ(7,"div",22),i.TgZ(8,"span"),i._uU(9),i._UZ(10,"br"),i.TgZ(11,"span",23),i._uU(12),i.qZA(),i.qZA(),i.qZA(),i.TgZ(13,"div",24),i._uU(14),i._UZ(15,"br"),i.qZA(),i.qZA(),i.YNc(16,m,1,3,"am-collection-settings-step",25),i.YNc(17,aa,1,2,"am-layer-settings-step",26),i.YNc(18,ra,1,3,"am-package-settings-step",27),i.qZA(),i.qZA()}if(2&g){const c=C.$implicit,v=i.oxw(2);i.xp6(1),i.Q6J("expanded",v.checkPanelOpenState(c.id,c.environmentId)),i.xp6(1),i.ekj("not-expandable",1!=v.isExpandable(c)),i.xp6(2),i.Q6J("ngIf",null==v.isExpandable(c)),i.xp6(1),i.Q6J("ngIf",!v.checkPanelOpenState(c.id,c.environmentId)&&v.isExpandable(c)),i.xp6(1),i.Q6J("ngIf",v.checkPanelOpenState(c.id,c.environmentId)&&v.isExpandable(c)),i.xp6(3),i.hij(" ",c.name,""),i.xp6(3),i.Oqu(c.type),i.xp6(2),i.AsE(" ",c.currentStage.name," - ",c.nextStage.name,""),i.xp6(2),i.Q6J("ngIf","Collection"==c.type&&v.checkPanelOpenState(c.id,c.environmentId)),i.xp6(1),i.Q6J("ngIf","Layer"==c.type&&v.checkPanelOpenState(c.id,c.environmentId)),i.xp6(1),i.Q6J("ngIf","Package"==c.type&&v.checkPanelOpenState(c.id,c.environmentId))}}const oa=function(){return[]};function sa(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"mat-table",7),i.NdJ("matSortChange",function(M){return i.CHM(c),i.oxw().sortData(M)}),i.ynx(2,8),i.YNc(3,st,1,0,"mat-header-cell",9),i.YNc(4,Qn,1,0,"mat-cell",10),i.BQk(),i.ynx(5,11),i.YNc(6,Jn,2,0,"mat-header-cell",12),i.YNc(7,tn,1,0,"mat-cell",10),i.BQk(),i.ynx(8,13),i.YNc(9,$n,2,0,"mat-header-cell",12),i.YNc(10,Gn,1,0,"mat-cell",10),i.BQk(),i.YNc(11,Kn,1,0,"mat-header-row",14),i.YNc(12,Xn,1,0,"mat-row",15),i.qZA(),i.TgZ(13,"perfect-scrollbar"),i.YNc(14,ia,19,13,"div",16),i.qZA(),i.qZA()}if(2&g){const c=i.oxw();i.xp6(1),i.Q6J("dataSource",i.DdM(4,oa)),i.xp6(10),i.Q6J("matHeaderRowDef",c.displayedColumns),i.xp6(1),i.Q6J("matRowDefColumns",c.displayedColumns),i.xp6(2),i.Q6J("ngForOf",c.dataSource.data)}}function la(g,C){if(1&g&&(i.TgZ(0,"div"),i._UZ(1,"am-entity-transfer-step",32),i.qZA()),2&g){const c=C.$implicit;i.xp6(1),i.Q6J("entityMoveRequest",c)("multipleTransfers",!0)}}function Ct(g,C){if(1&g&&(i.TgZ(0,"div"),i.TgZ(1,"perfect-scrollbar"),i.YNc(2,la,2,2,"div",16),i.qZA(),i.qZA()),2&g){const c=i.oxw();i.xp6(2),i.Q6J("ngForOf",c.filteredEntityMoveRequests)}}function de(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"mat-slide-toggle",33),i.NdJ("change",function(){return i.CHM(c),i.oxw().toggleMedia()}),i._uU(2," Transfer media "),i.qZA(),i.TgZ(3,"mat-slide-toggle",34),i.NdJ("ngModelChange",function(M){return i.CHM(c),i.oxw().targetValuePreference=M})("change",function(){return i.CHM(c),i.oxw().togglePreference()}),i._uU(4," Prefer target values "),i.qZA(),i.qZA()}if(2&g){const c=i.oxw();i.xp6(3),i.Q6J("ngModel",c.targetValuePreference)}}function yt(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"button",35),i.NdJ("click",function(){return i.CHM(c),i.oxw().onCloseFinishButtonClick(!1)}),i._uU(1,"Cancel"),i.qZA()}}function Mt(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"button",36),i.NdJ("click",function(){return i.CHM(c),i.oxw().onConfirmButtonClick()}),i._uU(1," Confirm & Transfer "),i.qZA()}}function Tt(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"button",37),i.NdJ("click",function(){return i.CHM(c),i.oxw().onCloseFinishButtonClick(!0)}),i._uU(1," Finish "),i.qZA()}if(2&g){const c=i.oxw();i.Q6J("disabled",!c.transferActionFinished)}}const Se=function(g){return[g]};let nn=(()=>{class g{constructor(c,v,M,w,A,z,Me){this.dialog=v,this.changeManagementService=M,this.collectionManagerHttpService=w,this.layerManagerHttpService=A,this.packageManagerHttpService=z,this.environmentVariableService=Me,this.displayedColumns=["icons","items","transfer"],this.dataSource=new R.by,this.icons=_e.R.icons.fontAwesome,this.panelOpenStates=[],this.collections=[],this.layers=[],this.packages=[],this.entityMoveRequests=[],this.filteredEntityMoveRequests=[],this.targetValuePreference=!0,this.transferAction=!1,this.transferActionFinished=!1,this.unexpandedItemsCounter=0,this.unexpandedItemsSubject=new Dn.xQ,this.currentTenantId=c.currentTenantId,this.dataSource.data=c.items,this.dialogIcon=this.icons.EXCLAMATION_TRIANGLE,this.dialogTitle="Confirmation",this.dialogDescription="Are you sure you want to apply these transfers? You can't undo this action."}ngOnInit(){this.dataSource.data.forEach(c=>{this.panelOpenStates.push(new Kt(c.id,c.environmentId,!1)),"Collection"===c.type?this.collectionManagerHttpService.getCollection(c.environmentId,c.id,!1,!0).subscribe(v=>{null!=v&&this.collections.push(v)}):"Layer"===c.type?this.layerManagerHttpService.getLayer(c.environmentId,c.id).subscribe(v=>{null!=v&&this.layers.push(v)}):"Package"===c.type&&this.packageManagerHttpService.getPackage(c.environmentId,c.id).subscribe(v=>{null!=v&&this.packages.push(v)}),this.entityMoveRequests.push(this.createEntityMoveRequest(c))})}sortData(c){const v=[...this.dataSource.data.slice()];if(!c.active||""===c.direction)return void(this.dataSource.data=v);const M="asc"===c.direction;this.dataSource.data=v.sort((w,A)=>{switch(c.active){case"items":return(0,ue.qu)(w.name??"",A.name??"",M);case"transfer":return(0,ue.qu)(null==`${w.currentStage.name} - ${w.nextStage.name}`?"":`${w.currentStage.name} - ${w.nextStage.name}`,null==`${A.currentStage.name} - ${A.nextStage.name}`?"":`${A.currentStage.name} - ${A.nextStage.name}`,M);default:return 0}})}checkPanelOpenState(c,v){let M=this.panelOpenStates.find(w=>w.itemId===c&&w.environmentId===v);if(null!=M)return M.state}isExpandable(c){if("Collection"===c.type){const v=this.getCollectionDetailsModel(c);return v&&null!=v.packageList.entityPackages.find(M=>M.amVariableModels.length>0)}if("Layer"===c.type){const v=this.getLayerDetailsModel(c);return v&&null!=v.packageList.entityPackages.find(M=>M.amVariableModels.length>0)}if("Package"===c.type){const v=this.getPackageDetailsModel(c);return v&&v.variableCount>0}return!1}expandItem(c,v){const M=this.panelOpenStates.find(w=>w.itemId===v.id&&w.environmentId===v.environmentId);M.state=!M.state}getCollectionDetailsModel(c){return this.collections.find(v=>v.id===c.id&&v.environmentId===c.environmentId)}getLayerDetailsModel(c){return this.layers.find(v=>v.id===c.id&&v.environmentId===c.environmentId)}getPackageDetailsModel(c){return this.packages.find(v=>v.id===c.id&&v.environmentId===c.environmentId)}createEntityMoveRequest(c){const v=new Gt.m;return v.entityId=c.id,v.objectType=Y.L[c.type],v.sourceEnvironmentKey=new qe.D,v.sourceEnvironmentKey.amServerId=Ze.c.Empty,v.sourceEnvironmentKey.id=c.currentStage.id,v.targetEnvironmentKey=new qe.D,v.targetEnvironmentKey.amServerId=Ze.c.Empty,v.targetEnvironmentKey.id=c.nextStage.id,v}getEntityMoveRequest(c){return this.entityMoveRequests.find(v=>v.entityId===c.id&&v.sourceEnvironmentKey.id===c.currentStage.id&&v.targetEnvironmentKey.id===c.nextStage.id)}setEntityMoveRequest(c){let v=this.entityMoveRequests.find(M=>M.entityId===c.entityId&&M.sourceEnvironmentKey.id===c.sourceEnvironmentKey.id&&M.targetEnvironmentKey.id===c.targetEnvironmentKey.id);v.includeMedia=c.includeMedia,v.collectionLevelVariableOverrides=c.collectionLevelVariableOverrides,v.modifiedPackageVariables=c.modifiedPackageVariables}getVariablesForUnexpandedItems(){this.dataSource.data.forEach(c=>{const v=this.getEntityMoveRequest(c);if(v.objectType===Y.L.Collection&&null==v.modifiedPackageVariables&&null==v.collectionLevelVariableOverrides){let M=!1;const w=this.getCollectionDetailsModel(c);null!=w&&w.packageList.entityPackages.forEach(A=>{A.amVariableModels.length>0&&(M=!0)}),M?this.environmentVariableService.getVariables(v).subscribe(A=>{v.modifiedPackageVariables=A.map(z=>z.packageVariable),v.collectionLevelVariableOverrides=A.map(z=>z.collectionVariable.isOverridden?z.collectionVariable:z.packageVariable),this.unexpandedItemsSubject.next(++this.unexpandedItemsCounter)}):this.unexpandedItemsSubject.next(++this.unexpandedItemsCounter)}else if(v.objectType===Y.L.Layer&&null==v.modifiedPackageVariables){let M=!1;const w=this.getLayerDetailsModel(c);null!=w&&w.packageList.entityPackages.forEach(A=>{A.amVariableModels.length>0&&(M=!0)}),M?this.environmentVariableService.getVariables(v).subscribe(A=>{v.modifiedPackageVariables=A.map(z=>z.packageVariable),this.unexpandedItemsSubject.next(++this.unexpandedItemsCounter)}):this.unexpandedItemsSubject.next(++this.unexpandedItemsCounter)}else if(v.objectType===Y.L.Package&&null==v.modifiedPackageVariables){let M=!1;const w=this.getPackageDetailsModel(c);null!=w&&w.variableCount>0&&(M=!0),M?this.environmentVariableService.getVariables(v).subscribe(A=>{v.modifiedPackageVariables=A.map(z=>z.packageVariable),this.unexpandedItemsSubject.next(++this.unexpandedItemsCounter)}):this.unexpandedItemsSubject.next(++this.unexpandedItemsCounter)}else this.unexpandedItemsSubject.next(++this.unexpandedItemsCounter)})}toggleMedia(){this.entityMoveRequests.forEach(c=>c.includeMedia=!c.includeMedia)}togglePreference(){this.entityMoveRequests.forEach(v=>v.preferSourceValues=!this.targetValuePreference);let c=this.changeManagementService.reloadSubject.value;c.forEach(v=>v.needReload=!0),this.changeManagementService.reloadSubject.next(c)}onConfirmButtonClick(){this.unexpandedItemsSubject.pipe((0,Vt.h)(c=>c===this.dataSource.data.length)).subscribe(()=>{this.dataSource.data.sort((c,v)=>(0,ue.WQ)(c.nextStage.type,v.nextStage.type,!1)).forEach(c=>{const v=this.getEntityMoveRequest(c);null!=v.collectionLevelVariableOverrides&&(v.collectionLevelVariableOverrides=v.collectionLevelVariableOverrides.filter(M=>M.isOverridden)),this.filteredEntityMoveRequests.push(v)}),this.transferAction=!0,this.transferSubscription=this.changeManagementService.transferIsLocked.subscribe(c=>{c||(null===this.changeManagementService.currentEntityMoveRequest.value?this.changeManagementService.currentEntityMoveRequest.next(this.filteredEntityMoveRequests[0]):this.filteredEntityMoveRequests.findIndex(v=>v===this.changeManagementService.currentEntityMoveRequest.value)===this.filteredEntityMoveRequests.length-1?(this.changeManagementService.transferIsLocked.next(!0),this.transferActionFinished=!0):this.changeManagementService.currentEntityMoveRequest.next(this.filteredEntityMoveRequests[this.filteredEntityMoveRequests.findIndex(v=>v===this.changeManagementService.currentEntityMoveRequest.value)+1]))}),this.changeManagementService.transferIsLocked.next(!1)}),this.getVariablesForUnexpandedItems()}onCloseFinishButtonClick(c){this.dialog.close(c)}ngOnDestroy(){this.transferSubscription&&this.transferSubscription.unsubscribe(),this.environmentVariableService.loadedOverrideVariableModels.next(new Map)}}return g.\u0275fac=function(c){return new(c||g)(i.Y36(at.WI),i.Y36(at.so),i.Y36(tt.U),i.Y36(Z.$),i.Y36(te),i.Y36(Be.M),i.Y36(Wn.W))},g.\u0275cmp=i.Xpm({type:g,selectors:[["item-transfer"]],decls:10,vars:12,consts:[[3,"icon","title","description"],["body",""],[4,"ngIf"],[1,"mat-dialog-actions",3,"ngClass"],["mat-raised-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["matSort","",1,"dashboard-table",3,"dataSource","matSortChange"],["matColumnDef","icons"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","items"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","transfer"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngFor","ngForOf"],["mat-sort-header",""],["hideToggle","",1,"mat-elevation-z0",3,"expanded"],[3,"click"],[1,"icon"],[3,"iconClasses",4,"ngIf"],[1,"items"],[1,"additional-information"],[1,"transfer"],[3,"collection","entityMoveRequest","preferSourceValues","editedEntityMoveRequest",4,"ngIf"],[3,"entityMoveRequest","preferSourceValues","editedEntityMoveRequest",4,"ngIf"],[3,"package","entityMoveRequest","preferSourceValues","editedEntityMoveRequest",4,"ngIf"],[3,"iconClasses"],[3,"collection","entityMoveRequest","preferSourceValues","editedEntityMoveRequest"],[3,"entityMoveRequest","preferSourceValues","editedEntityMoveRequest"],[3,"package","entityMoveRequest","preferSourceValues","editedEntityMoveRequest"],[3,"entityMoveRequest","multipleTransfers"],["color","primary",3,"change"],["color","primary",3,"ngModel","ngModelChange","change"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(c,v){1&c&&(i.TgZ(0,"form-section",0),i.TgZ(1,"div",1),i.YNc(2,sa,15,5,"div",2),i.YNc(3,Ct,3,1,"div",2),i.qZA(),i.qZA(),i.TgZ(4,"div",3),i.YNc(5,de,5,1,"div",2),i.TgZ(6,"div"),i.YNc(7,yt,2,0,"button",4),i.YNc(8,Mt,2,0,"button",5),i.YNc(9,Tt,2,1,"button",6),i.qZA(),i.qZA()),2&c&&(i.Q6J("icon",v.dialogIcon)("title",v.dialogTitle)("description",v.dialogDescription),i.xp6(2),i.Q6J("ngIf",!v.transferAction),i.xp6(1),i.Q6J("ngIf",v.transferAction),i.xp6(1),i.Q6J("ngClass",i.VKq(10,Se,v.transferAction?"flex-end":"space-between")),i.xp6(1),i.Q6J("ngIf",!v.transferAction),i.xp6(2),i.Q6J("ngIf",!v.transferAction),i.xp6(1),i.Q6J("ngIf",!v.transferAction),i.xp6(1),i.Q6J("ngIf",v.transferAction))},directives:[G.A,E.O5,R.BZ,he.YE,R.w1,R.fO,R.ge,R.Dz,R.ev,he.nU,R.as,R.XQ,R.nj,R.Gk,se.Vv,E.sg,Xt.ib,Xt.yz,rt.b,ne.Y,ze.A,en.X,it.S,E.mk,jn.Rr,ot.JJ,ot.On,P.lW],styles:[".additional-information[_ngcontent-%COMP%]{font-size:12px;font-weight:300;color:#616161;text-transform:none}mat-table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding:0}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   .mat-column-icons[_ngcontent-%COMP%]{padding:0 14px;flex:0 0 3%}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   .mat-column-items[_ngcontent-%COMP%]{padding:0 24px 0 0;flex:0 0 37%}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   .mat-column-transfer[_ngcontent-%COMP%]{padding:0 24px;flex:0 0 60%}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{display:inline;padding:0}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{min-width:28px;padding:0 9px 0 10px;flex:0 0 3%}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   am-icon[_ngcontent-%COMP%]{color:#9b9b9b}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{padding:0 24px 0 0;flex:0 0 37%;border-right:1px solid}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]{padding:0 24px;flex:0 0 60%}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%], mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]{display:flex;height:48px;align-items:center;border-bottom:1px solid;border-color:#d1d1d1}.not-expandable[_ngcontent-%COMP%]{cursor:default!important}.space-between[_ngcontent-%COMP%]{justify-content:space-between}.flex-end[_ngcontent-%COMP%]{justify-content:flex-end}mat-slide-toggle[_ngcontent-%COMP%]{margin:6px}"]}),g})();class ca{}class an{constructor(C,c,v){this.itemId=C,this.environmentId=c,this.needReload=v}}var wt=I(95414),X=I(44144),le=I(56709);function rn(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"mat-header-cell"),i.TgZ(1,"mat-checkbox",24),i.NdJ("change",function(M){i.CHM(c);const w=i.oxw();return M?w.masterToggle():null}),i.qZA(),i.qZA()}if(2&g){const c=i.oxw();i.xp6(1),i.Q6J("checked",c.selection.hasValue()&&c.isAllSelected())("indeterminate",c.selection.hasValue()&&!c.isAllSelected())}}function ua(g,C){1&g&&i._UZ(0,"mat-cell")}function da(g,C){1&g&&(i.TgZ(0,"mat-header-cell",25),i._uU(1,"Last change"),i.qZA())}function fa(g,C){1&g&&i._UZ(0,"mat-cell")}function on(g,C){1&g&&(i.TgZ(0,"mat-header-cell",25),i._uU(1,"Item"),i.qZA())}function sn(g,C){1&g&&i._UZ(0,"mat-cell")}function ha(g,C){1&g&&(i.TgZ(0,"mat-header-cell",25),i._uU(1,"Stage"),i.qZA())}function ga(g,C){1&g&&i._UZ(0,"mat-cell")}function ln(g,C){1&g&&(i.TgZ(0,"mat-header-cell",25),i._uU(1,"Author"),i.qZA())}function cn(g,C){1&g&&i._UZ(0,"mat-cell")}function ma(g,C){1&g&&i._UZ(0,"mat-header-row")}function va(g,C){1&g&&i._UZ(0,"mat-row")}function un(g,C){1&g&&i._UZ(0,"mat-header-cell")}function lt(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"mat-cell",29),i.NdJ("click",function(M){return M.stopPropagation()}),i.TgZ(1,"mat-checkbox",30),i.NdJ("change",function(M){const A=i.CHM(c).$implicit,z=i.oxw(2);return M?z.selection.toggle(A):null}),i.qZA(),i.qZA()}if(2&g){const c=C.$implicit,v=i.oxw(2);i.xp6(1),i.Q6J("checked",v.selection.isSelected(c))("disabled",c.status!==v.itemStatus.Approved)}}function dn(g,C){1&g&&i._UZ(0,"mat-header-cell")}function fn(g,C){if(1&g&&(i.TgZ(0,"mat-cell"),i.TgZ(1,"span"),i._uU(2),i._UZ(3,"br"),i.TgZ(4,"span",31),i._uU(5),i.qZA(),i.qZA(),i.qZA()),2&g){const c=C.$implicit;i.xp6(2),i.hij(" ",c.lastChange,""),i.xp6(3),i.Oqu(c.change)}}function pa(g,C){1&g&&i._UZ(0,"mat-header-cell")}function _a(g,C){if(1&g&&(i.TgZ(0,"mat-cell"),i.TgZ(1,"span"),i._uU(2),i._UZ(3,"br"),i.TgZ(4,"span",31),i._uU(5),i.qZA(),i.qZA(),i.qZA()),2&g){const c=C.$implicit;i.xp6(2),i.hij(" ",c.name,""),i.xp6(3),i.Oqu(c.type)}}function ba(g,C){1&g&&i._UZ(0,"mat-header-cell")}function Ve(g,C){if(1&g&&i._UZ(0,"am-icon",35),2&g){const c=i.oxw(3);i.Q6J("iconClasses",c.icons.CHECK_CIRCLE)}}function xa(g,C){if(1&g&&i._UZ(0,"am-icon",36),2&g){const c=i.oxw(3);i.Q6J("iconClasses",c.icons.TIMES_CIRCLE)}}const K=function(g){return{"red-text":g}};function Ca(g,C){if(1&g&&(i.TgZ(0,"mat-cell"),i.TgZ(1,"span"),i._uU(2),i._UZ(3,"br"),i.TgZ(4,"span",31),i.YNc(5,Ve,1,1,"am-icon",32),i.YNc(6,xa,1,1,"am-icon",33),i.TgZ(7,"span",34),i._uU(8),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&g){const c=C.$implicit,v=i.oxw(2);i.xp6(2),i.AsE(" ",c.currentStage.name," - ",c.nextStage.name,""),i.xp6(3),i.Q6J("ngIf",c.status===v.itemStatus.Approved),i.xp6(1),i.Q6J("ngIf",c.status===v.itemStatus.Rejected),i.xp6(1),i.Q6J("ngClass",i.VKq(6,K,c.status===v.itemStatus.Rejected)),i.xp6(1),i.hij(" ",v.itemStatus[c.status],"")}}function ya(g,C){1&g&&i._UZ(0,"mat-header-cell")}function Ma(g,C){if(1&g&&(i.TgZ(0,"mat-cell"),i._uU(1),i.qZA()),2&g){const c=C.$implicit;i.xp6(1),i.Oqu(c.author)}}function Ta(g,C){1&g&&i._UZ(0,"mat-header-row")}function He(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"mat-row",29),i.NdJ("click",function(){const w=i.CHM(c).$implicit;return i.oxw(2).onRowClick(w)}),i.qZA()}}function ke(g,C){if(1&g&&(i.TgZ(0,"mat-table",26),i.ynx(1,7),i.YNc(2,un,1,0,"mat-header-cell",8),i.YNc(3,lt,2,2,"mat-cell",27),i.BQk(),i.ynx(4,10),i.YNc(5,dn,1,0,"mat-header-cell",8),i.YNc(6,fn,6,2,"mat-cell",9),i.BQk(),i.ynx(7,12),i.YNc(8,pa,1,0,"mat-header-cell",8),i.YNc(9,_a,6,2,"mat-cell",9),i.BQk(),i.ynx(10,13),i.YNc(11,ba,1,0,"mat-header-cell",8),i.YNc(12,Ca,9,8,"mat-cell",9),i.BQk(),i.ynx(13,14),i.YNc(14,ya,1,0,"mat-header-cell",8),i.YNc(15,Ma,2,1,"mat-cell",9),i.BQk(),i.YNc(16,Ta,1,0,"mat-header-row",15),i.YNc(17,He,1,0,"mat-row",28),i.qZA()),2&g){const c=i.oxw();i.Q6J("dataSource",c.dataSource),i.xp6(16),i.Q6J("matHeaderRowDef",c.displayedColumns),i.xp6(1),i.Q6J("matRowDefColumns",c.displayedColumns)}}function wa(g,C){1&g&&(i.TgZ(0,"p",37),i._uU(1,"There are no changes"),i.qZA())}const Sa=function(){return[]};let ka=(()=>{class g{constructor(c,v,M,w){this.changeManagementService=c,this.entityMoveService=v,this.dialog=M,this.router=w,this.refreshChangeManagementModel=new i.vpe,this.displayedColumns=["select","lastChange","item","stage","author"],this.dataSource=new R.by,this.selection=new $t.Ov(!0,[]),this.icons=_e.R.icons.fontAwesome,this.itemStatus=U}ngOnInit(){}ngOnChanges(){this.selection.selected.length=0,this.selection.clear(),this.dataSource.filterPredicate=this.filterPredicate,this.changeManagementService.changeManagementElementsSubject.value.find(c=>null==c.currentStage||null==c.nextStage)&&this.changeManagementService.setChangeManagementElementsStages(this.currentTenantId,this.tableModel.tableElements),this.changeManagementElementsSubscription=this.changeManagementService.changeManagementElementsSubject.subscribe(c=>{null!=this.selectedEnvironment&&(c=c.filter(v=>v.currentStage.type===fe.Q[this.selectedEnvironment])),this.dataSource.data=[...c],this.sortData({active:"lastChange",direction:"desc"})})}filterPredicate(c,v){return c.lastChange&&c.lastChange.toLowerCase().indexOf(v)>=0||c.change&&c.change.toLowerCase().indexOf(v)>=0||c.name&&c.name.toLowerCase().indexOf(v)>=0||c.type&&c.type.toLowerCase().indexOf(v)>=0||`${c.currentStage.name} - ${c.nextStage.name}`&&`${c.currentStage.name} - ${c.nextStage.name}`.toLowerCase().indexOf(v)>=0||U[c.status]&&U[c.status].toLowerCase().indexOf(v)>=0||c.author&&c.author.toLowerCase().indexOf(v)>=0}applyFilter(c){c=c.trim().toLowerCase(),this.dataSource.filter=c}sortData(c){const v=[...this.dataSource.data.slice()];if(!c.active||""===c.direction)return void(this.dataSource.data=v);const M="asc"===c.direction;this.dataSource.data=v.sort((w,A)=>{switch(c.active){case"lastChange":return(0,ue.rm)(w.lastChange??"",A.lastChange??"",M);case"item":return(0,ue.qu)(w.name??"",A.name??"",M);case"stage":return(0,ue.qu)(null==`${w.currentStage.name} - ${w.nextStage.name}`?"":`${w.currentStage.name} - ${w.nextStage.name}`,null==`${A.currentStage.name} - ${A.nextStage.name}`?"":`${A.currentStage.name} - ${A.nextStage.name}`,M);case"author":return(0,ue.qu)(w.author??"",A.author??"",M);default:return 0}})}isAllSelected(){return this.selection.selected.filter(M=>this.filterPredicate(M,this.dataSource.filter)).length===this.dataSource.data.filter(M=>M.status===U.Approved&&this.filterPredicate(M,this.dataSource.filter)).length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(c=>{c.status===U.Approved&&this.filterPredicate(c,this.dataSource.filter)&&this.selection.select(c)})}onRowClick(c){this.changeManagementService.selectedItem.next(c),this.router.navigate([Ne.getItemDetailsUrl(c.environmentId,c.id)])}onTransferButtonClick(){const c=[];this.selection.selected.forEach(v=>{const M=new ca;M.entityId=v.id,M.objectType=Y.L[v.type],M.sourceEnvironmentId=v.currentStage.id,c.push(M)}),this.entityMoveService.arrangeEntities(c).subscribe(v=>{let M=this.selection.selected.filter(w=>v.find(A=>w.id===A.entityId&&Y.L[w.type]===A.objectType&&w.currentStage.id===A.sourceEnvironmentId));this.changeManagementService.reloadSubject.next(M.map(w=>new an(w.id,w.environmentId,!0))),this.dialog.open(nn,{data:{currentTenantId:this.currentTenantId,items:M},panelClass:"am-dialog-container",disableClose:!0}).afterClosed().subscribe(w=>{w&&this.refreshChangeManagementModel.emit(!0),this.changeManagementService.reloadSubject.next(null)})})}ngOnDestroy(){this.changeManagementElementsSubscription&&this.changeManagementElementsSubscription.unsubscribe()}}return g.\u0275fac=function(c){return new(c||g)(i.Y36(tt.U),i.Y36(wt.l),i.Y36(at.uw),i.Y36(N.F0))},g.\u0275cmp=i.Xpm({type:g,selectors:[["item-changes-table"]],viewQuery:function(c,v){if(1&c&&i.Gf(he.YE,5),2&c){let M;i.iGM(M=i.CRH())&&(v.sort=M.first)}},inputs:{currentTenantId:"currentTenantId",tableModel:"tableModel",selectedEnvironment:"selectedEnvironment"},outputs:{refreshChangeManagementModel:"refreshChangeManagementModel"},features:[i.TTD],decls:34,vars:7,consts:[[1,"mt-3"],[1,"am-search","pt-1","pr-2","pl-3","filter"],[1,"full-width"],["matPrefix","",1,"field-icon","mr-3"],[1,"far","fa-search"],["matInput","","placeholder","Enter your search term...",3,"keyup"],["matSort","","matSortActive","lastChange","matSortDirection","desc","matSortDisableClear","",1,"dashboard-table",3,"dataSource","matSortChange"],["matColumnDef","select"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastChange"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","item"],["matColumnDef","stage"],["matColumnDef","author"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","dashboard-table table-content",3,"dataSource",4,"ngIf"],["class","empty-table",4,"ngIf"],[1,"pre-footer","mb-0","mt-0","pt-1","pb-0","pl-2","pr-2"],[1,"footer","action-buttons"],[1,"row","mt-0"],[1,"col","pt-2","pr-4","pb-2","pl-4","text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"checked","indeterminate","change"],["mat-sort-header",""],[1,"dashboard-table","table-content",3,"dataSource"],[3,"click",4,"matCellDef"],[3,"click",4,"matRowDef","matRowDefColumns"],[3,"click"],[3,"checked","disabled","change"],[1,"additional-information"],["class","green-icon",3,"iconClasses",4,"ngIf"],["class","red-icon",3,"iconClasses",4,"ngIf"],[3,"ngClass"],[1,"green-icon",3,"iconClasses"],[1,"red-icon",3,"iconClasses"],[1,"empty-table"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"mat-form-field",2),i.TgZ(3,"span",3),i._UZ(4,"i",4),i.qZA(),i.TgZ(5,"input",5),i.NdJ("keyup",function(w){return v.applyFilter(w.target.value)}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"mat-table",6),i.NdJ("matSortChange",function(w){return v.sortData(w)}),i.ynx(7,7),i.YNc(8,rn,2,2,"mat-header-cell",8),i.YNc(9,ua,1,0,"mat-cell",9),i.BQk(),i.ynx(10,10),i.YNc(11,da,2,0,"mat-header-cell",11),i.YNc(12,fa,1,0,"mat-cell",9),i.BQk(),i.ynx(13,12),i.YNc(14,on,2,0,"mat-header-cell",11),i.YNc(15,sn,1,0,"mat-cell",9),i.BQk(),i.ynx(16,13),i.YNc(17,ha,2,0,"mat-header-cell",11),i.YNc(18,ga,1,0,"mat-cell",9),i.BQk(),i.ynx(19,14),i.YNc(20,ln,2,0,"mat-header-cell",11),i.YNc(21,cn,1,0,"mat-cell",9),i.BQk(),i.YNc(22,ma,1,0,"mat-header-row",15),i.YNc(23,va,1,0,"mat-row",16),i.qZA(),i.TgZ(24,"perfect-scrollbar"),i.YNc(25,ke,18,3,"mat-table",17),i.qZA(),i.YNc(26,wa,2,0,"p",18),i.TgZ(27,"p",19),i._uU(28," \xa0"),i.qZA(),i.TgZ(29,"div",20),i.TgZ(30,"div",21),i.TgZ(31,"div",22),i.TgZ(32,"button",23),i.NdJ("click",function(){return v.onTransferButtonClick()}),i._uU(33,"TRANSFER "),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&c&&(i.xp6(6),i.Q6J("dataSource",i.DdM(6,Sa)),i.xp6(16),i.Q6J("matHeaderRowDef",v.displayedColumns),i.xp6(1),i.Q6J("matRowDefColumns",v.displayedColumns),i.xp6(2),i.Q6J("ngIf",v.dataSource.data.length>0),i.xp6(1),i.Q6J("ngIf",0===v.dataSource.data.length),i.xp6(6),i.Q6J("disabled",0===v.selection.selected.length))},directives:[Le.KE,Le.qo,X.Nt,R.BZ,he.YE,R.w1,R.fO,R.ge,le.oG,R.Dz,R.ev,he.nU,R.as,R.XQ,R.nj,R.Gk,se.Vv,E.O5,rt.b,E.mk,P.lW],styles:[".filter[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#a7a7a7}.additional-information[_ngcontent-%COMP%]{font-size:12px;font-weight:300;color:#616161;text-transform:none}.additional-information[_ngcontent-%COMP%]   am-icon.green-icon[_ngcontent-%COMP%]{color:#8bc541}.additional-information[_ngcontent-%COMP%]   am-icon.red-icon[_ngcontent-%COMP%]{color:#f70d0d}.additional-information[_ngcontent-%COMP%]   .red-text[_ngcontent-%COMP%]{color:#f70d0d}mat-header-row[_ngcontent-%COMP%]   .mat-column-select[_ngcontent-%COMP%]{padding:0 15px;flex:0 0 4%}mat-header-row[_ngcontent-%COMP%]   .mat-column-lastChange[_ngcontent-%COMP%]{padding-right:24px;flex:0 0 17%}mat-header-row[_ngcontent-%COMP%]   .mat-column-item[_ngcontent-%COMP%]{padding:0 24px;flex:0 0 31%}mat-header-row[_ngcontent-%COMP%]   .mat-column-stage[_ngcontent-%COMP%]{padding:0 24px;flex:0 0 25%}mat-header-row[_ngcontent-%COMP%]   .mat-column-author[_ngcontent-%COMP%]{padding-left:24px;flex:0 0 23%}.table-content[_ngcontent-%COMP%]{min-height:48px;max-height:490px}.table-content[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]{min-height:0!important;height:0!important;border-width:0}mat-row[_ngcontent-%COMP%]{cursor:pointer;align-items:normal}mat-row[_ngcontent-%COMP%]   .mat-column-select[_ngcontent-%COMP%]{cursor:default;padding:0 15px;flex:0 0 4%}mat-row[_ngcontent-%COMP%]   .mat-column-lastChange[_ngcontent-%COMP%]{padding-right:24px;flex:0 0 17%;border-right:1px solid;border-color:#d1d1d1}mat-row[_ngcontent-%COMP%]   .mat-column-item[_ngcontent-%COMP%]{padding:0 24px;flex:0 0 31%;border-right:1px solid;border-color:#d1d1d1}mat-row[_ngcontent-%COMP%]   .mat-column-stage[_ngcontent-%COMP%]{padding:0 24px;flex:0 0 25%;border-right:1px solid;border-color:#d1d1d1}mat-row[_ngcontent-%COMP%]   .mat-column-author[_ngcontent-%COMP%]{padding-left:24px;flex:0 0 23%}.empty-table[_ngcontent-%COMP%]{font-size:15px;padding:13px 24px;margin:0;background-color:#fff}.pre-footer[_ngcontent-%COMP%]{background-color:#e4e4e4;box-shadow:0 2px 2px #61616180}.action-buttons[_ngcontent-%COMP%]{margin-top:2px;background:#eeeeee;box-shadow:0 2px 2px #61616180}"]}),g})();class hn{constructor(C,c,v,M,w){this.id=C,this.type=c,this.version=v,this.status=M,this.environmentId=w}}var ce=(()=>{return(g=ce||(ce={}))[g.Package=0]="Package",g[g.PackageGroup=1]="PackageGroup",g[g.Collection=2]="Collection",ce;var g})();function Ia(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"mat-header-cell"),i.TgZ(1,"mat-checkbox",29),i.NdJ("change",function(M){i.CHM(c);const w=i.oxw();return M?w.masterToggle():null}),i.qZA(),i.qZA()}if(2&g){const c=i.oxw();i.xp6(1),i.Q6J("checked",c.selection.hasValue()&&c.isAllSelected())("indeterminate",c.selection.hasValue()&&!c.isAllSelected())}}function Pa(g,C){1&g&&i._UZ(0,"mat-cell")}function ct(g,C){1&g&&(i.TgZ(0,"mat-header-cell",30),i._uU(1,"Last change"),i.qZA())}function be(g,C){1&g&&i._UZ(0,"mat-cell")}function ge(g,C){1&g&&(i.TgZ(0,"mat-header-cell",30),i._uU(1,"Item"),i.qZA())}function xe(g,C){1&g&&i._UZ(0,"mat-cell")}function gn(g,C){1&g&&(i.TgZ(0,"mat-header-cell",30),i._uU(1,"Item details"),i.qZA())}function Aa(g,C){1&g&&i._UZ(0,"mat-cell")}function me(g,C){1&g&&i._UZ(0,"mat-header-row")}function Oa(g,C){1&g&&i._UZ(0,"mat-row")}function St(g,C){1&g&&i._UZ(0,"mat-header-cell")}function mn(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"mat-cell",31),i.NdJ("click",function(M){return M.stopPropagation()}),i.TgZ(1,"mat-checkbox",32),i.NdJ("change",function(M){const A=i.CHM(c).$implicit,z=i.oxw();return M?z.selection.toggle(A):null}),i.qZA(),i.qZA()}if(2&g){const c=C.$implicit,v=i.oxw();i.xp6(1),i.Q6J("checked",v.selection.isSelected(c))}}function Da(g,C){1&g&&i._UZ(0,"mat-header-cell")}function Fa(g,C){if(1&g&&(i.TgZ(0,"mat-cell"),i.TgZ(1,"span"),i._uU(2),i._UZ(3,"br"),i.TgZ(4,"span",33),i._uU(5),i.qZA(),i.qZA(),i.qZA()),2&g){const c=C.$implicit;i.xp6(2),i.hij(" ",c.lastChange,""),i.xp6(3),i.Oqu(c.change)}}function vn(g,C){1&g&&i._UZ(0,"mat-header-cell")}function Ea(g,C){if(1&g&&i._UZ(0,"am-icon",38),2&g){const c=i.oxw(2);i.Q6J("iconClasses",c.icons.CHECK_CIRCLE)}}function Za(g,C){if(1&g&&i._UZ(0,"am-icon",39),2&g){const c=i.oxw(2);i.Q6J("iconClasses",c.icons.TIMES_CIRCLE)}}const Ra=function(g){return{"red-text":g}};function Ce(g,C){if(1&g&&(i.TgZ(0,"span",34),i._uU(1),i.qZA()),2&g){const c=i.oxw().$implicit,v=i.oxw();i.Q6J("ngClass",i.VKq(2,Ra,c.status===v.itemStatus.Rejected)),i.xp6(1),i.hij(" ",v.itemStatus[c.status]," ")}}const La=function(g){return{"main-information":g}};function Na(g,C){if(1&g&&(i.TgZ(0,"mat-cell"),i.TgZ(1,"span",34),i._uU(2),i._UZ(3,"br"),i.TgZ(4,"span",33),i._uU(5),i.qZA(),i.qZA(),i.TgZ(6,"span",33),i.YNc(7,Ea,1,1,"am-icon",35),i.YNc(8,Za,1,1,"am-icon",36),i.YNc(9,Ce,2,4,"span",37),i.qZA(),i.qZA()),2&g){const c=C.$implicit,v=i.oxw();i.xp6(1),i.Q6J("ngClass",i.VKq(6,La,c.status!==v.itemStatus.Pending)),i.xp6(1),i.hij(" ",c.name,""),i.xp6(3),i.Oqu(c.type),i.xp6(2),i.Q6J("ngIf",c.status===v.itemStatus.Approved),i.xp6(1),i.Q6J("ngIf",c.status===v.itemStatus.Rejected),i.xp6(1),i.Q6J("ngIf",c.status!==v.itemStatus.Pending)}}function pn(g,C){1&g&&i._UZ(0,"mat-header-row")}const ye=function(g){return{selected:g}};function Ue(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"mat-row",40),i.NdJ("click",function(){const w=i.CHM(c).$implicit;return i.oxw().onRowClick(w)}),i.qZA()}if(2&g){const c=C.$implicit,v=C.index,M=i.oxw();i.Q6J("id",v)("ngClass",i.VKq(2,ye,M.highlightItem(c)))}}const kt=function(){return[]};let It=(()=>{class g{constructor(c,v,M,w){this.dataRepositoryService=c,this.changeManagementService=v,this.changeManagementHttpService=M,this.router=w,this.displayedColumns=["select","lastChange","item","itemDetails"],this.displayedItemColumns=["select","lastChange","item"],this.dataSource=new R.by,this.selection=new $t.Ov(!0,[]),this.icons=_e.R.icons.fontAwesome,this.itemStatus=U}ngOnInit(){}ngOnChanges(){this.selection.selected.length=0,this.selection.clear(),this.dataSource.filterPredicate=this.filterPredicate,this.changeManagementService.changeManagementElementsSubject.value.find(c=>null==c.currentStage||null==c.nextStage)&&this.changeManagementService.setChangeManagementElementsStages(this.currentTenantId,this.tableModel.tableElements),this.changeManagementElementsSubscription&&this.changeManagementElementsSubscription.unsubscribe(),this.changeManagementElementsSubscription=this.changeManagementService.changeManagementElementsSubject.subscribe(c=>{null!=this.selectedEnvironment&&null==(c=c.filter(v=>v.currentStage.type===fe.Q[this.selectedEnvironment])).find(v=>v===this.changeManagementService.selectedItem.value)&&(this.changeManagementService.selectedItem.next(c[0]),this.router.navigate([Ne.getItemDetailsUrl(c[0].environmentId,c[0].id)])),this.dataSource.data=[...c],this.sortData({active:"lastChange",direction:"desc"})})}filterPredicate(c,v){return c.lastChange&&c.lastChange.toLowerCase().indexOf(v)>=0||c.change&&c.change.toLowerCase().indexOf(v)>=0||c.name&&c.name.toLowerCase().indexOf(v)>=0||c.type&&c.type.toLowerCase().indexOf(v)>=0||U[c.status]&&U[c.status].toLowerCase().indexOf(v)>=0}applyFilter(c){c=c.trim().toLowerCase(),this.dataSource.filter=c}sortData(c){const v=[...this.dataSource.data.slice()];if(!c.active||""===c.direction)return void(this.dataSource.data=v);const M="asc"===c.direction;this.dataSource.data=v.sort((w,A)=>{switch(c.active){case"lastChange":return(0,ue.rm)(w.lastChange??"",A.lastChange??"",M);case"item":return(0,ue.qu)(w.name??"",A.name??"",M);default:return 0}})}isAllSelected(){return this.selection.selected.filter(M=>this.filterPredicate(M,this.dataSource.filter)).length===this.dataSource.data.filter(M=>this.filterPredicate(M,this.dataSource.filter)).length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(c=>{this.filterPredicate(c,this.dataSource.filter)&&this.selection.select(c)})}onRowClick(c){this.changeManagementService.selectedItem.next(c),this.router.navigate([Ne.getItemDetailsUrl(c.environmentId,c.id)])}highlightItem(c){return c.environmentId===this.changeManagementService.selectedItem.value.environmentId&&c.id===this.changeManagementService.selectedItem.value.id}onDoneButtonClick(){this.changeManagementService.selectedItem.next(null),this.router.navigate([Ne.changeManagementPath])}onAcceptRejectButtonClick(c){let v=this.selection.selected.map(M=>new hn(M.id,this.getItemType(M.type),M.version,c,M.environmentId));this.changeManagementHttpService.saveChangeManagementItemsStatuses(v).subscribe(M=>{this.selection.selected.length=0,this.selection.clear(),M.forEach(w=>this.dataSource.data.find(A=>A.id===w.id&&A.environmentId===w.environmentId).status=w.status)})}getItemType(c){let v;return"Package"===c?v=ce.Package:"Layer"===c?v=ce.PackageGroup:"Collection"===c&&(v=ce.Collection),v}ngOnDestroy(){this.changeManagementElementsSubscription&&this.changeManagementElementsSubscription.unsubscribe()}}return g.\u0275fac=function(c){return new(c||g)(i.Y36(nt.Y),i.Y36(tt.U),i.Y36(Wt),i.Y36(N.F0))},g.\u0275cmp=i.Xpm({type:g,selectors:[["item-approval-table"]],viewQuery:function(c,v){if(1&c&&i.Gf(he.YE,5),2&c){let M;i.iGM(M=i.CRH())&&(v.sort=M.first)}},inputs:{currentTenantId:"currentTenantId",tableModel:"tableModel",selectedEnvironment:"selectedEnvironment"},features:[i.TTD],decls:49,vars:9,consts:[[1,"mt-3"],[1,"am-search","pt-1","pr-2","pl-3","filter"],[1,"full-width"],["matPrefix","",1,"field-icon","mr-3"],[1,"far","fa-search"],["matInput","","placeholder","Enter your search term...",3,"keyup"],["matSort","","matSortActive","lastChange","matSortDirection","desc","matSortDisableClear","",1,"dashboard-table",3,"dataSource","matSortChange"],["matColumnDef","select"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastChange"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","item"],["matColumnDef","itemDetails"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["id","parent",1,"parent"],[1,"left-side"],[1,"dashboard-table","table-content",3,"dataSource"],[3,"click",4,"matCellDef"],[3,"id","ngClass","click",4,"matRowDef","matRowDefColumns"],[1,"right-side"],[1,"pre-footer","mb-0","mt-0","pt-1","pb-0","pl-2","pr-2"],[1,"footer","action-buttons"],[1,"row","mt-0"],[1,"col","pt-2","pr-4","pb-2","pl-4","text-right"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",1,"accept-button",3,"disabled","click"],["mat-raised-button","","color","primary",1,"reject-button",3,"disabled","click"],[3,"checked","indeterminate","change"],["mat-sort-header",""],[3,"click"],[3,"checked","change"],[1,"additional-information"],[3,"ngClass"],["class","green-icon",3,"iconClasses",4,"ngIf"],["class","red-icon",3,"iconClasses",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"green-icon",3,"iconClasses"],[1,"red-icon",3,"iconClasses"],[3,"id","ngClass","click"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"mat-form-field",2),i.TgZ(3,"span",3),i._UZ(4,"i",4),i.qZA(),i.TgZ(5,"input",5),i.NdJ("keyup",function(w){return v.applyFilter(w.target.value)}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"mat-table",6),i.NdJ("matSortChange",function(w){return v.sortData(w)}),i.ynx(7,7),i.YNc(8,Ia,2,2,"mat-header-cell",8),i.YNc(9,Pa,1,0,"mat-cell",9),i.BQk(),i.ynx(10,10),i.YNc(11,ct,2,0,"mat-header-cell",11),i.YNc(12,be,1,0,"mat-cell",9),i.BQk(),i.ynx(13,12),i.YNc(14,ge,2,0,"mat-header-cell",11),i.YNc(15,xe,1,0,"mat-cell",9),i.BQk(),i.ynx(16,13),i.YNc(17,gn,2,0,"mat-header-cell",11),i.YNc(18,Aa,1,0,"mat-cell",9),i.BQk(),i.YNc(19,me,1,0,"mat-header-row",14),i.YNc(20,Oa,1,0,"mat-row",15),i.qZA(),i.TgZ(21,"div",16),i.TgZ(22,"div",17),i.TgZ(23,"perfect-scrollbar"),i.TgZ(24,"mat-table",18),i.ynx(25,7),i.YNc(26,St,1,0,"mat-header-cell",8),i.YNc(27,mn,2,1,"mat-cell",19),i.BQk(),i.ynx(28,10),i.YNc(29,Da,1,0,"mat-header-cell",8),i.YNc(30,Fa,6,2,"mat-cell",9),i.BQk(),i.ynx(31,12),i.YNc(32,vn,1,0,"mat-header-cell",8),i.YNc(33,Na,10,8,"mat-cell",9),i.BQk(),i.YNc(34,pn,1,0,"mat-header-row",14),i.YNc(35,Ue,1,4,"mat-row",20),i.qZA(),i.qZA(),i.qZA(),i.TgZ(36,"div",21),i._UZ(37,"router-outlet"),i.qZA(),i.qZA(),i.TgZ(38,"p",22),i._uU(39," \xa0"),i.qZA(),i.TgZ(40,"div",23),i.TgZ(41,"div",24),i.TgZ(42,"div",25),i.TgZ(43,"button",26),i.NdJ("click",function(){return v.onDoneButtonClick()}),i._uU(44,"Done"),i.qZA(),i.TgZ(45,"button",27),i.NdJ("click",function(){return v.onAcceptRejectButtonClick(v.itemStatus.Approved)}),i._uU(46," Accept "),i.qZA(),i.TgZ(47,"button",28),i.NdJ("click",function(){return v.onAcceptRejectButtonClick(v.itemStatus.Rejected)}),i._uU(48," Reject "),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&c&&(i.xp6(6),i.Q6J("dataSource",i.DdM(8,kt)),i.xp6(13),i.Q6J("matHeaderRowDef",v.displayedColumns),i.xp6(1),i.Q6J("matRowDefColumns",v.displayedColumns),i.xp6(4),i.Q6J("dataSource",v.dataSource),i.xp6(10),i.Q6J("matHeaderRowDef",v.displayedItemColumns),i.xp6(1),i.Q6J("matRowDefColumns",v.displayedItemColumns),i.xp6(10),i.Q6J("disabled",0===v.selection.selected.length),i.xp6(2),i.Q6J("disabled",0===v.selection.selected.length))},directives:[Le.KE,Le.qo,X.Nt,R.BZ,he.YE,R.w1,R.fO,R.ge,le.oG,R.Dz,R.ev,he.nU,R.as,R.XQ,R.nj,R.Gk,se.Vv,E.mk,E.O5,rt.b,N.lC,P.lW],styles:[".filter[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#a7a7a7}.additional-information[_ngcontent-%COMP%]{font-size:12px;font-weight:300;color:#616161;text-transform:none}.additional-information[_ngcontent-%COMP%]   am-icon.green-icon[_ngcontent-%COMP%]{color:#8bc541}.additional-information[_ngcontent-%COMP%]   am-icon.red-icon[_ngcontent-%COMP%]{color:#f70d0d}.additional-information[_ngcontent-%COMP%]   .red-text[_ngcontent-%COMP%]{color:#f70d0d}mat-header-row[_ngcontent-%COMP%]{border-width:0}mat-header-row[_ngcontent-%COMP%]   .mat-column-select[_ngcontent-%COMP%]{padding:0 15px;flex:0 0 4.2%}mat-header-row[_ngcontent-%COMP%]   .mat-column-lastChange[_ngcontent-%COMP%]{padding-right:24px;flex:0 0 16.1%}mat-header-row[_ngcontent-%COMP%]   .mat-column-item[_ngcontent-%COMP%]{padding:0 24px;flex:0 0 28%}mat-header-row[_ngcontent-%COMP%]   .mat-column-itemDetails[_ngcontent-%COMP%]{padding:0 24px;flex:0 0 51.7%}.table-content[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]{min-height:0!important;height:0!important;border-width:0}mat-row[_ngcontent-%COMP%]{cursor:pointer;align-items:normal}mat-row[_ngcontent-%COMP%]   .mat-column-select[_ngcontent-%COMP%]{cursor:default;padding:0 15px;flex:0 0 9%}mat-row[_ngcontent-%COMP%]   .mat-column-lastChange[_ngcontent-%COMP%]{padding-right:24px;flex:0 0 35%;border-right:1px solid;border-color:#d1d1d1}mat-row[_ngcontent-%COMP%]   .mat-column-item[_ngcontent-%COMP%]{padding:0 12px 0 24px;flex:0 0 56%}mat-row[_ngcontent-%COMP%]   .mat-column-item[_ngcontent-%COMP%]   .main-information[_ngcontent-%COMP%]{width:70%}.empty-table[_ngcontent-%COMP%]{font-size:15px;padding:13px 24px;margin:0;background-color:#fff}.pre-footer[_ngcontent-%COMP%]{background-color:#e4e4e4;box-shadow:0 2px 2px #61616180}.parent[_ngcontent-%COMP%]{display:flex;flex-direction:row;max-height:490px}.parent[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{margin-right:10px;background-color:#fff}.parent[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{margin:0;padding:0;border-width:0 1px 1px 1px;border-style:solid;border-color:#0000001f;background-color:#fff}.selected[_ngcontent-%COMP%]{background-color:#d1d1d1}#parent[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}.action-buttons[_ngcontent-%COMP%]{margin-top:2px;background:#eeeeee;box-shadow:0 2px 2px #61616180}.action-buttons[_ngcontent-%COMP%]   .accept-button[_ngcontent-%COMP%]{background-color:#8bc541}.action-buttons[_ngcontent-%COMP%]   .reject-button[_ngcontent-%COMP%]{background-color:#f70d0d}"]}),g})();function Pt(g,C){if(1&g&&(i.TgZ(0,"mat-option",9),i._uU(1),i.qZA()),2&g){const c=C.$implicit;i.Q6J("value",c.id),i.xp6(1),i.hij(" ",c.name," ")}}function At(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"div",4),i.TgZ(1,"div",5),i.TgZ(2,"mat-form-field",6),i.TgZ(3,"mat-select",7),i.NdJ("selectionChange",function(M){return i.CHM(c),i.oxw().onGenerateChangeManagementModelButton.next(M)})("valueChange",function(M){return i.CHM(c),i.oxw().currentTenantId=M}),i.YNc(4,Pt,2,2,"mat-option",8),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&g){const c=i.oxw();i.xp6(3),i.Q6J("value",c.currentTenantId),i.xp6(1),i.Q6J("ngForOf",c.tenants)}}function Ie(g,C){if(1&g&&(i.TgZ(0,"div",10),i._UZ(1,"span",11),i.qZA()),2&g){const c=i.oxw();i.xp6(1),i.Q6J("innerHTML",c.sanitize(c.errorMessage),i.oJD)}}function Ot(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"item-changes-table",14),i.NdJ("refreshChangeManagementModel",function(){return i.CHM(c),i.oxw(3).refreshChangeManagementModel()}),i.qZA(),i.qZA()}if(2&g){const c=i.oxw(3);i.xp6(1),i.Q6J("currentTenantId",c.currentTenantId)("tableModel",c.changeManagementModel.tableModel)("selectedEnvironment",c.selectedEnvironment)}}function Ye(g,C){if(1&g&&(i.TgZ(0,"div"),i._UZ(1,"item-approval-table",15),i.qZA()),2&g){const c=i.oxw(3);i.xp6(1),i.Q6J("currentTenantId",c.currentTenantId)("tableModel",c.changeManagementModel.tableModel)("selectedEnvironment",c.selectedEnvironment)}}function ut(g,C){if(1&g&&(i.YNc(0,Ot,2,3,"div",13),i.YNc(1,Ye,2,3,"div",13)),2&g){const c=i.oxw(2);i.Q6J("ngIf",null==c.changeManagementService.selectedItem.value),i.xp6(1),i.Q6J("ngIf",null!=c.changeManagementService.selectedItem.value)}}function qa(g,C){if(1&g){const c=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"environment-chain",12),i.NdJ("onEnvironmentSelect",function(M){return i.CHM(c),i.oxw().setSelectedEnvironment(M)}),i.qZA(),i.qZA(),i.YNc(2,ut,2,2,"ng-template",2)}if(2&g){const c=i.oxw();i.xp6(1),i.Q6J("environmentModels",c.getEnvironmentModels())("tenantId",c.currentTenantId)("environmentToHighlight",c.selectedEnvironment),i.xp6(1),i.Q6J("ngIf",0!=c.environments.length)}}let Ba=(()=>{class g{constructor(c,v,M,w,A,z){this.environmentService=c,this.changeManagementService=v,this.changeManagementHttpService=M,this.dataRepositoryService=w,this.router=A,this.sanitizer=z,this.isLoading=!0,this.onGenerateChangeManagementModelButton=new Dn.xQ,this.errorMessage="",this.noTenantsMessage=`There are no environment groups available, please create a <a class="link" href="${wr.H.getTenantUrl(Ze.c.Empty)}">environment group</a> first`,this.noEnvironmentsMessage="There are no environments available",this.noSupportedEnvironmentsMessage="Environment group should have at least one environment of type Test, Acceptance or Production",this.unsupportedMultipleEnvironmentsMessage="Change management doesn't support multiple environments of type "}ngOnInit(){this.createTenantSubscription();let c=this.router.url.split("/");Fn.E.GUID.test(c[2])&&Fn.E.GUID.test(c[3])&&(this.changeManagementElementsSubscription=this.changeManagementService.changeManagementElementsSubject.pipe((0,Vt.h)(()=>void 0===this.changeManagementService.selectedItem.value)).subscribe(v=>{let M=v.find(w=>w.environmentId===c[2]&&w.id===c[3]);this.changeManagementService.selectedItem.next(M)}))}ngAfterViewInit(){this.clickSubscription=this.onGenerateChangeManagementModelButton.subscribe(c=>{this.currentTenantId=c.value,sessionStorage.setItem("tenantId",c.value),this.environmentService.getTenantEnvironments(this.currentTenantId).subscribe(v=>{this.environments=v,this.refreshChangeManagementModel()},v=>{console.error(v)},()=>{})})}createTenantSubscription(){this.tenantsSubscription=this.dataRepositoryService.tenants.subscribe(c=>{this.isLoading=!0,c&&c.length>0?(this.tenants=[...c].filter(v=>!Ze.c.isEmpty(v.id)),this.currentTenantId=null!=sessionStorage.getItem("tenantId")?sessionStorage.getItem("tenantId"):c[0].id,this.environmentService.getTenantEnvironments(this.currentTenantId).subscribe(v=>{this.environments=v,this.refreshChangeManagementModel()},v=>{console.error(v)},()=>{})):(this.changeManagementModel=null,this.currentTenantId=null,this.tenants=[],this.errorMessage=this.noTenantsMessage,this.isLoading=!1)})}refreshChangeManagementModel(){if(this.changeManagementModel=null,this.canGetChangeManagementModel()){let c=this.getChangeManagementRequest(this.currentTenantId);this.getChangeManagementModel(c)}else this.isLoading=!1}getEnvironmentModels(){let c=[];return this.changeManagementModel.environmentChainModel.development.environmentIsMissing||c.push(this.changeManagementModel.environmentChainModel.development),this.changeManagementModel.environmentChainModel.test.environmentIsMissing||c.push(this.changeManagementModel.environmentChainModel.test),this.changeManagementModel.environmentChainModel.acceptance.environmentIsMissing||c.push(this.changeManagementModel.environmentChainModel.acceptance),this.changeManagementModel.environmentChainModel.production.environmentIsMissing||c.push(this.changeManagementModel.environmentChainModel.production),c}getChangeManagementModel(c){this.isLoading=!0,this.changeManagementHttpService.getChangeManagementModel(c).subscribe(v=>{this.changeManagementModel=v,this.changeManagementService.setChangeManagementElementsStages(this.currentTenantId,v.tableModel.tableElements),this.isLoading=!1},v=>{console.log(v),this.isLoading=!1})}canGetChangeManagementModel(){return this.errorMessage="",this.environments&&0!==this.environments.length?0===this.environments.filter(c=>c.type!==fe.Q.Development).length?this.errorMessage=this.noSupportedEnvironmentsMessage:(this.validateEnvironmentsOfType(fe.Q.Acceptance),this.validateEnvironmentsOfType(fe.Q.Production)):this.errorMessage=this.noEnvironmentsMessage,""===this.errorMessage}validateEnvironmentsOfType(c){this.environments.filter(M=>M.type===c).length>1&&(this.errorMessage=this.unsupportedMultipleEnvironmentsMessage+fe.Q[c])}getChangeManagementRequest(c){let v=new Tr;return v.tenantId=c,v}setSelectedEnvironment(c){this.selectedEnvironment=c}sanitize(c){return this.sanitizer.bypassSecurityTrustHtml(c)}ngOnDestroy(){this.tenantsSubscription&&this.tenantsSubscription.unsubscribe(),this.clickSubscription&&this.clickSubscription.unsubscribe(),this.changeManagementElementsSubscription&&this.changeManagementElementsSubscription.unsubscribe(),this.changeManagementService.selectedItem.next(null),this.changeManagementService.changeManagementElementsSubject.next([])}}return g.\u0275fac=function(c){return new(c||g)(i.Y36(Sr.L),i.Y36(tt.U),i.Y36(Wt),i.Y36(nt.Y),i.Y36(N.F0),i.Y36(En.H7))},g.\u0275cmp=i.Xpm({type:g,selectors:[["change-management"]],decls:5,vars:4,consts:[[1,"container"],["class","period row align-items-center",4,"ngIf"],[3,"ngIf"],[3,"loading"],[1,"period","row","align-items-center"],[1,"col-md-4"],[1,"full-width"],["placeholder","Environment group selection",3,"value","selectionChange","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-center"],[3,"innerHTML"],[3,"environmentModels","tenantId","environmentToHighlight","onEnvironmentSelect"],[4,"ngIf"],[3,"currentTenantId","tableModel","selectedEnvironment","refreshChangeManagementModel"],[3,"currentTenantId","tableModel","selectedEnvironment"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.YNc(1,At,5,2,"div",1),i.YNc(2,Ie,2,1,"ng-template",2),i.TgZ(3,"loading-container",3),i.YNc(4,qa,3,4,"ng-template",2),i.qZA(),i.qZA()),2&c&&(i.xp6(1),i.Q6J("ngIf",v.tenants.length>0),i.xp6(1),i.Q6J("ngIf",null==v.changeManagementModel),i.xp6(1),i.Q6J("loading",v.isLoading),i.xp6(1),i.Q6J("ngIf",null!=v.changeManagementModel))},directives:[E.O5,Le.KE,Zn.gD,E.sg,Rn.ey,we.o,Yn,ka,It],styles:[".settings-wrapper[_ngcontent-%COMP%]{width:10.5em}.deployment-label[_ngcontent-%COMP%]{display:block;border-bottom:.2em solid #DEDEDE;margin-bottom:.2em}.no-padding[_ngcontent-%COMP%]{padding:0}.creation-date[_ngcontent-%COMP%]{position:absolute;right:3em;top:11em}.container[_ngcontent-%COMP%]{padding:20px;margin-bottom:1em;min-height:350px}"]}),g})();var dt=(()=>{return(g=dt||(dt={}))[g.Unknown=0]="Unknown",g[g.New=1]="New",g[g.Modified=2]="Modified",g[g.Removed=3]="Removed",g[g.Equals=4]="Equals",dt;var g})(),We=(()=>{return(g=We||(We={}))[g.ActionSet=0]="ActionSet",g[g.ActionItem=1]="ActionItem",g[g.Variable=2]="Variable",We;var g})();function za(g,C){if(1&g&&(i.TgZ(0,"tr"),i.TgZ(1,"td",7),i._uU(2,"Version"),i.qZA(),i.TgZ(3,"td"),i.TgZ(4,"p",8),i._uU(5,"Source"),i.qZA(),i._uU(6),i.TgZ(7,"p",9),i._uU(8,"Target"),i.qZA(),i._uU(9),i.qZA(),i.qZA()),2&g){const c=i.oxw(2);i.xp6(6),i.hij(" ",c.version?c.version:"n/a"," "),i.xp6(3),i.hij(" ",c.destinationVersion?c.destinationVersion:"n/a"," ")}}function Va(g,C){if(1&g&&i._uU(0),2&g){const c=i.oxw().$implicit;i.Oqu(c.sourceValue?c.sourceValue:"n/a")}}function Ha(g,C){if(1&g&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&g){const c=C.$implicit;i.xp6(1),i.Oqu(c)}}function ft(g,C){if(1&g&&(i.TgZ(0,"ol"),i.YNc(1,Ha,2,1,"li",6),i.qZA()),2&g){const c=i.oxw(2).$implicit;i.xp6(1),i.Q6J("ngForOf",c.sourceValue)}}function _n(g,C){1&g&&(i.TgZ(0,"span"),i._uU(1,"n/a"),i.qZA())}function ae(g,C){if(1&g&&(i.YNc(0,ft,2,1,"ol",5),i.YNc(1,_n,2,0,"span",5)),2&g){const c=i.oxw().$implicit;i.Q6J("ngIf",(null==c.sourceValue?null:c.sourceValue.length)>0),i.xp6(1),i.Q6J("ngIf",null==c.sourceValue||0==(null==c.sourceValue?null:c.sourceValue.length))}}function Ua(g,C){if(1&g&&i._uU(0),2&g){const c=i.oxw().$implicit;i.Oqu(c.destinationValue?c.destinationValue:"n/a")}}function Ya(g,C){if(1&g&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&g){const c=C.$implicit;i.xp6(1),i.Oqu(c)}}function Wa(g,C){if(1&g&&(i.TgZ(0,"ol"),i.YNc(1,Ya,2,1,"li",6),i.qZA()),2&g){const c=i.oxw(2).$implicit;i.xp6(1),i.Q6J("ngForOf",c.destinationValue)}}function ja(g,C){1&g&&(i.TgZ(0,"span"),i._uU(1,"n/a"),i.qZA())}function J(g,C){if(1&g&&(i.YNc(0,Wa,2,1,"ol",5),i.YNc(1,ja,2,0,"span",5)),2&g){const c=i.oxw().$implicit;i.Q6J("ngIf",(null==c.destinationValue?null:c.destinationValue.length)>0),i.xp6(1),i.Q6J("ngIf",null==c.destinationValue||0==(null==c.destinationValue?null:c.destinationValue.length))}}function Dt(g,C){if(1&g&&(i.TgZ(0,"tr"),i.TgZ(1,"td",7),i._uU(2),i.qZA(),i.TgZ(3,"td"),i.TgZ(4,"p",8),i._uU(5,"Source"),i.qZA(),i.YNc(6,Va,1,1,"ng-template",10),i.YNc(7,ae,2,2,"ng-template",10),i.TgZ(8,"p",9),i._uU(9,"Target"),i.qZA(),i.YNc(10,Ua,1,1,"ng-template",10),i.YNc(11,J,2,2,"ng-template",10),i.qZA(),i.qZA()),2&g){const c=C.$implicit;i.xp6(2),i.Oqu(c.name),i.xp6(4),i.Q6J("ngIf",!c.isList),i.xp6(1),i.Q6J("ngIf",c.isList&&c.isOrdered),i.xp6(3),i.Q6J("ngIf",!c.isList),i.xp6(1),i.Q6J("ngIf",c.isList&&c.isOrdered)}}function Ft(g,C){if(1&g&&(i.TgZ(0,"table",1),i.TgZ(1,"tr"),i.TgZ(2,"th",2),i._uU(3),i.TgZ(4,"span",3),i._uU(5),i.qZA(),i.TgZ(6,"span",4),i._uU(7),i.qZA(),i.qZA(),i.qZA(),i.YNc(8,za,10,2,"tr",5),i.YNc(9,Dt,12,5,"tr",6),i.qZA()),2&g){const c=i.oxw();i.xp6(3),i.hij("",c.title," "),i.xp6(2),i.Oqu(c.secondTitle),i.xp6(2),i.Oqu(c.thirdTitle),i.xp6(1),i.Q6J("ngIf",c.version),i.xp6(1),i.Q6J("ngForOf",c.values)}}let bn=(()=>{class g{constructor(){this.title="Name"}ngOnInit(){}}return g.\u0275fac=function(c){return new(c||g)},g.\u0275cmp=i.Xpm({type:g,selectors:[["am-item-value-table"]],inputs:{title:"title",secondTitle:"secondTitle",thirdTitle:"thirdTitle",values:"values",version:"version",destinationVersion:"destinationVersion"},decls:1,vars:1,consts:[["class","am-details",4,"ngIf"],[1,"am-details"],["colspan","2"],[1,"second-title"],[1,"third-title"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"name"],[1,"cell-title"],[1,"cell-title","vertical-space-top"],[3,"ngIf"]],template:function(c,v){1&c&&i.YNc(0,Ft,10,5,"table",0),2&c&&i.Q6J("ngIf",v.values||v.version)},directives:[E.O5,E.sg],styles:[".name[_ngcontent-%COMP%]{font-weight:400}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{margin-bottom:0;padding-left:1em}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{color:#424242}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{vertical-align:top}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:15%}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fbfbfb}.cell-title[_ngcontent-%COMP%]{color:#616161;font-weight:300;font-style:italic;margin-bottom:0}.vertical-space-top[_ngcontent-%COMP%]{margin-top:.25rem}.second-title[_ngcontent-%COMP%]{color:#616161;font-weight:300;margin-left:1rem}.third-title[_ngcontent-%COMP%]{color:#0074a8;font-weight:300;margin-left:1rem}"]}),g})();function Qa(g,C){if(1&g&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&g){const c=C.$implicit;i.xp6(1),i.Oqu(c.name)}}function xn(g,C){if(1&g&&(i.TgZ(0,"ol"),i.YNc(1,Qa,2,1,"li",3),i.qZA()),2&g){const c=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",c.model.sourceItems)}}function Ja(g,C){1&g&&(i.TgZ(0,"span"),i._uU(1,"n/a"),i.qZA())}function Cn(g,C){if(1&g&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&g){const c=C.$implicit;i.xp6(1),i.Oqu(c.name)}}function $a(g,C){if(1&g&&(i.TgZ(0,"ol"),i.YNc(1,Cn,2,1,"li",3),i.qZA()),2&g){const c=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",c.model.destinationItems)}}function Ga(g,C){1&g&&(i.TgZ(0,"span"),i._uU(1,"n/a"),i.qZA())}function yn(g,C){if(1&g&&(i.TgZ(0,"h3"),i._uU(1),i.qZA(),i.TgZ(2,"table",1),i.TgZ(3,"tr"),i.TgZ(4,"th"),i._uU(5,"Source"),i.qZA(),i.TgZ(6,"th"),i._uU(7,"Target"),i.qZA(),i.qZA(),i.TgZ(8,"tr"),i.TgZ(9,"td"),i.YNc(10,xn,2,1,"ol",2),i.YNc(11,Ja,2,0,"span",2),i.qZA(),i.TgZ(12,"td"),i.YNc(13,$a,2,1,"ol",2),i.YNc(14,Ga,2,0,"span",2),i.qZA(),i.qZA(),i.qZA()),2&g){const c=i.oxw();i.xp6(1),i.Oqu(c.model.name),i.xp6(9),i.Q6J("ngIf",(null==c.model.sourceItems?null:c.model.sourceItems.length)>0),i.xp6(1),i.Q6J("ngIf",0==(null==c.model.sourceItems?null:c.model.sourceItems.length)),i.xp6(2),i.Q6J("ngIf",(null==c.model.destinationItems?null:c.model.destinationItems.length)>0),i.xp6(1),i.Q6J("ngIf",0==(null==c.model.destinationItems?null:c.model.destinationItems.length))}}let je=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(c){return new(c||g)},g.\u0275cmp=i.Xpm({type:g,selectors:[["am-ordered-list-comparison"]],inputs:{model:"model"},decls:1,vars:1,consts:[[3,"ngIf"],[1,"am-details"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(c,v){1&c&&i.YNc(0,yn,15,5,"ng-template",0),2&c&&i.Q6J("ngIf",v.model)},directives:[E.O5,E.sg],styles:["h3[_ngcontent-%COMP%]{font-size:13px;margin-top:1rem;color:#0074a8;margin-bottom:.2rem}.am-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{margin-bottom:0;padding-left:1em}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:50%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fbfbfb}"]}),g})();function Et(g,C){1&g&&i._UZ(0,"hr")}function Zt(g,C){1&g&&i._UZ(0,"am-ordered-list-comparison",7),2&g&&i.Q6J("model",C.$implicit)}function Ka(g,C){if(1&g&&(i.TgZ(0,"div"),i._UZ(1,"am-item-value-table",9),i.qZA()),2&g){const c=C.$implicit,v=i.oxw(4);i.xp6(1),i.Q6J("title",c.name)("secondTitle",v.itemGroupType[c.itemGroupType])("thirdTitle",v.changeType[c.changeType])("values",c.values)}}function Xa(g,C){if(1&g&&(i.TgZ(0,"div",2),i._UZ(1,"am-item-value-table",9),i.YNc(2,Ka,2,4,"div",6),i.qZA()),2&g){const c=C.$implicit,v=i.oxw(3);i.xp6(1),i.Q6J("title",c.name)("secondTitle",v.itemGroupType[c.itemGroupType])("thirdTitle",v.changeType[c.changeType])("values",c.values),i.xp6(1),i.Q6J("ngForOf",c.children)}}function Qe(g,C){1&g&&i._UZ(0,"hr")}function er(g,C){if(1&g&&(i.TgZ(0,"div"),i.TgZ(1,"h3",2),i._uU(2),i.qZA(),i.YNc(3,Xa,3,5,"div",8),i.YNc(4,Qe,1,0,"hr",4),i.qZA()),2&g){const c=C.$implicit,v=C.index,M=i.oxw(2);i.xp6(2),i.Oqu(c.name),i.xp6(1),i.Q6J("ngForOf",c.itemGroups),i.xp6(1),i.Q6J("ngIf",v<(null==M.changeDetails||null==M.changeDetails.changes?null:M.changeDetails.changes.length)-1)}}function tr(g,C){if(1&g&&(i.TgZ(0,"div",1),i.TgZ(1,"div",2),i.TgZ(2,"h3"),i._uU(3,"Properties"),i.qZA(),i._UZ(4,"am-item-value-table",3),i.qZA(),i.YNc(5,Et,1,0,"hr",4),i.TgZ(6,"div",2),i.YNc(7,Zt,1,1,"am-ordered-list-comparison",5),i.qZA(),i.YNc(8,er,5,3,"div",6),i.qZA()),2&g){const c=i.oxw();i.xp6(4),i.Q6J("values",c.changeDetails.properties)("version",c.changeDetails.version)("destinationVersion",c.changeDetails.destinationVersion),i.xp6(1),i.Q6J("ngIf",(null==c.changeDetails.orderedListChanges?null:c.changeDetails.orderedListChanges.length)>0||(null==c.changeDetails.changes?null:c.changeDetails.changes.length)>0),i.xp6(2),i.Q6J("ngForOf",c.changeDetails.orderedListChanges),i.xp6(1),i.Q6J("ngForOf",c.changeDetails.changes)}}let nr=(()=>{class g{constructor(){this.changeType=dt,this.itemGroupType=We}ngOnInit(){}}return g.\u0275fac=function(c){return new(c||g)},g.\u0275cmp=i.Xpm({type:g,selectors:[["am-item-change-details"]],inputs:{changeDetails:"changeDetails"},decls:1,vars:1,consts:[[3,"ngIf"],[1,"details-container"],[1,"horizontal-padding"],[3,"values","version","destinationVersion"],[4,"ngIf"],[3,"model",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"model"],["class","horizontal-padding",4,"ngFor","ngForOf"],[3,"title","secondTitle","thirdTitle","values"]],template:function(c,v){1&c&&i.YNc(0,tr,9,6,"ng-template",0),2&c&&i.Q6J("ngIf",v.changeDetails)},directives:[E.O5,bn,E.sg,je],styles:["[_nghost-%COMP%]{font-size:13px}.even-detail-item[_ngcontent-%COMP%]{background-color:#fbfbfb!important}h3[_ngcontent-%COMP%]{font-size:13px;margin-top:1rem;color:#0074a8;margin-bottom:.2rem}h4[_ngcontent-%COMP%]{font-size:12px;margin-top:1rem}.item-group-type[_ngcontent-%COMP%]{margin:auto 1em;font-weight:300}mat-card[_ngcontent-%COMP%]{margin:1em 1px 1px}.change-type[_ngcontent-%COMP%]{margin:auto 1em;color:#0074a8}mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:.5em}mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{align-items:center}.child-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:.5em;font-size:13px}.child-group[_ngcontent-%COMP%]   .child-group-name[_ngcontent-%COMP%]{flex:2}.child-group[_ngcontent-%COMP%]   .item-group-type[_ngcontent-%COMP%], .child-group[_ngcontent-%COMP%]   .change-type[_ngcontent-%COMP%]{flex:1}.horizontal-padding[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}"]}),g})();function ar(g,C){if(1&g&&i._UZ(0,"am-icon",16),2&g){const c=i.oxw(2);i.Q6J("iconClasses",c.icons.CHECK_CIRCLE)}}function rr(g,C){if(1&g&&i._UZ(0,"am-icon",17),2&g){const c=i.oxw(2);i.Q6J("iconClasses",c.icons.TIMES_CIRCLE)}}const ir=function(g){return{"red-text":g}};function Mn(g,C){if(1&g&&(i.TgZ(0,"div",1),i.TgZ(1,"div",2),i.TgZ(2,"span",3),i._uU(3),i.qZA(),i.TgZ(4,"span",4),i._uU(5),i.qZA(),i.TgZ(6,"span",5),i._uU(7),i.qZA(),i._UZ(8,"br"),i.qZA(),i.TgZ(9,"div",6),i.TgZ(10,"span",7),i._uU(11),i.TgZ(12,"span",8),i._uU(13),i.qZA(),i.qZA(),i.qZA(),i.TgZ(14,"div",9),i.TgZ(15,"span",10),i.YNc(16,ar,1,1,"am-icon",11),i.YNc(17,rr,1,1,"am-icon",12),i.TgZ(18,"span",13),i._uU(19),i.qZA(),i.qZA(),i.qZA(),i.TgZ(20,"div",14),i._UZ(21,"am-item-change-details",15),i.qZA(),i.qZA()),2&g){const c=i.oxw();i.xp6(3),i.Oqu(c.item.name),i.xp6(2),i.Oqu(c.item.type),i.xp6(2),i.Oqu(c.item.author),i.xp6(4),i.hij("",c.item.currentStage.name," "),i.xp6(2),i.hij("- ",c.item.nextStage.name,""),i.xp6(3),i.Q6J("ngIf",c.item.status===c.itemStatus.Approved),i.xp6(1),i.Q6J("ngIf",c.item.status===c.itemStatus.Rejected),i.xp6(1),i.Q6J("ngClass",i.VKq(10,ir,c.item.status===c.itemStatus.Rejected)),i.xp6(1),i.hij(" ",c.itemStatus[c.item.status],""),i.xp6(2),i.Q6J("changeDetails",c.changeDetails)}}const Pe=[{path:"",component:Ba,children:[{path:":environmentId/:itemId",component:(()=>{class g{constructor(c,v,M,w,A){this.changeManagementService=c,this.changeManagementHttpService=v,this.dataRepositoryService=M,this.router=w,this.route=A,this.icons=_e.R.icons.fontAwesome,this.itemStatus=U}ngOnInit(){this.routeSubscription=this.router.events.pipe((0,Vt.h)(c=>c instanceof N.m2)).subscribe(()=>{this.resolveIdFromUrl(),this.item=this.changeManagementService.changeManagementElementsSubject.value.find(c=>c.environmentId===this.environmentId&&c.id===this.itemId),this.getItemDetails()}),this.router.navigate([this.router.url])}resolveIdFromUrl(){if(this.environmentId=this.itemId=null,this.router.url.startsWith(`/${Ne.changeManagementPath}/`)){const c=this.route.snapshot.paramMap,v=c.get("environmentId"),M=c.get("itemId");Ze.c.isGuidFormat(v)&&Ze.c.isGuidFormat(M)&&(this.environmentId=v,this.itemId=M)}}getItemDetails(){this.changeManagementHttpService.getItemChanges(this.itemId,this.getItemType(this.item.type),this.environmentId,this.item.nextStage.id).subscribe(c=>{this.changeDetails=c})}getItemType(c){let v;return"Package"===c?v=ce.Package:"Layer"===c?v=ce.PackageGroup:"Collection"===c&&(v=ce.Collection),v}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe(),this.changeManagementService.selectedItem.next(null)}}return g.\u0275fac=function(c){return new(c||g)(i.Y36(tt.U),i.Y36(Wt),i.Y36(nt.Y),i.Y36(N.F0),i.Y36(N.gz))},g.\u0275cmp=i.Xpm({type:g,selectors:[["item-details-table"]],decls:2,vars:1,consts:[[3,"ngIf"],[1,"header"],[1,"first-line"],[1,"item-name"],[1,"item-type"],[1,"item-author"],[1,"second-line"],[1,"item-stages"],[1,"am-accent"],[1,"third-line"],[1,"item-status"],["class","green-icon",3,"iconClasses",4,"ngIf"],["class","red-icon",3,"iconClasses",4,"ngIf"],[3,"ngClass"],[1,"details-placeholder"],[3,"changeDetails"],[1,"green-icon",3,"iconClasses"],[1,"red-icon",3,"iconClasses"]],template:function(c,v){1&c&&(i.TgZ(0,"perfect-scrollbar"),i.YNc(1,Mn,22,12,"ng-template",0),i.qZA()),2&c&&(i.xp6(1),i.Q6J("ngIf",v.item))},directives:[se.Vv,E.O5,rt.b,E.mk,nr],styles:[".header[_ngcontent-%COMP%]{padding:1em 0;color:#616161}.header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;display:flex;align-items:center}.header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500;padding:0 .1em 0 .2em}.header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .item-type[_ngcontent-%COMP%]{font-size:14px;text-transform:lowercase;padding:0 .2em 0 .1em;font-weight:300}.header[_ngcontent-%COMP%]   .first-line[_ngcontent-%COMP%]   .item-author[_ngcontent-%COMP%]{margin-left:auto;font-size:13px;font-weight:700}.header[_ngcontent-%COMP%]   .second-line[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:1rem;padding-right:1rem}.header[_ngcontent-%COMP%]   .second-line[_ngcontent-%COMP%]   .item-stages[_ngcontent-%COMP%]{font-size:14px;text-transform:uppercase;padding:0 .2em}.header[_ngcontent-%COMP%]   .third-line[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:1rem;padding-right:1rem}.header[_ngcontent-%COMP%]   .third-line[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%]{font-size:12px;font-weight:300;color:#616161;text-transform:none;padding:0 .2em}.header[_ngcontent-%COMP%]   .third-line[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%]   am-icon.green-icon[_ngcontent-%COMP%]{color:#8bc541}.header[_ngcontent-%COMP%]   .third-line[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%]   am-icon.red-icon[_ngcontent-%COMP%]{color:#f70d0d}.header[_ngcontent-%COMP%]   .third-line[_ngcontent-%COMP%]   .item-status[_ngcontent-%COMP%]   .red-text[_ngcontent-%COMP%]{color:#f70d0d}"]}),g})()}]}];let B=(()=>{class g{}return g.\u0275fac=function(c){return new(c||g)},g.\u0275mod=i.oAB({type:g}),g.\u0275inj=i.cJS({imports:[[N.Bz.forChild(Pe)],N.Bz]}),g})();var Je=I(97354);let ve=(()=>{class g{}return g.\u0275fac=function(c){return new(c||g)},g.\u0275mod=i.oAB({type:g}),g.\u0275inj=i.cJS({imports:[[E.ez,pt.U,zt.q,se.Xd,B,Je.EnvironmentCompareModule,ot.u5]]}),g})()},68332:function(Mr,On,I){Mr.exports=function(E){"use strict";E=E&&E.hasOwnProperty("default")?E.default:E;var se={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},N=function pt(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var t={};for(var n in se)se.hasOwnProperty(n)&&(t[se[n]]=n);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var r in a)if(a.hasOwnProperty(r)){if(!("channels"in a[r]))throw new Error("missing channels property: "+r);if(!("labels"in a[r]))throw new Error("missing channel labels property: "+r);if(a[r].labels.length!==a[r].channels)throw new Error("channel and label counts mismatch: "+r);var o=a[r].channels,s=a[r].labels;delete a[r].channels,delete a[r].labels,Object.defineProperty(a[r],"channels",{value:o}),Object.defineProperty(a[r],"labels",{value:s})}function u(l,d){return Math.pow(l[0]-d[0],2)+Math.pow(l[1]-d[1],2)+Math.pow(l[2]-d[2],2)}a.rgb.hsl=function(l){var x,T,d=l[0]/255,f=l[1]/255,h=l[2]/255,p=Math.min(d,f,h),_=Math.max(d,f,h),b=_-p;return _===p?x=0:d===_?x=(f-h)/b:f===_?x=2+(h-d)/b:h===_&&(x=4+(d-f)/b),(x=Math.min(60*x,360))<0&&(x+=360),T=(p+_)/2,[x,100*(_===p?0:T<=.5?b/(_+p):b/(2-_-p)),100*T]},a.rgb.hsv=function(l){var d,f,h,p,_,b=l[0]/255,x=l[1]/255,y=l[2]/255,T=Math.max(b,x,y),S=T-Math.min(b,x,y),k=function(D){return(T-D)/6/S+.5};return 0===S?p=_=0:(_=S/T,d=k(b),f=k(x),h=k(y),b===T?p=h-f:x===T?p=1/3+d-h:y===T&&(p=2/3+f-d),p<0?p+=1:p>1&&(p-=1)),[360*p,100*_,100*T]},a.rgb.hwb=function(l){var d=l[0],f=l[1],h=l[2];return[a.rgb.hsl(l)[0],1/255*Math.min(d,Math.min(f,h))*100,100*(h=1-1/255*Math.max(d,Math.max(f,h)))]},a.rgb.cmyk=function(l){var x,d=l[0]/255,f=l[1]/255,h=l[2]/255;return[100*((1-d-(x=Math.min(1-d,1-f,1-h)))/(1-x)||0),100*((1-f-x)/(1-x)||0),100*((1-h-x)/(1-x)||0),100*x]},a.rgb.keyword=function(l){var d=t[l];if(d)return d;var h,f=1/0;for(var p in se)if(se.hasOwnProperty(p)){var b=u(l,se[p]);b<f&&(f=b,h=p)}return h},a.keyword.rgb=function(l){return se[l]},a.rgb.xyz=function(l){var d=l[0]/255,f=l[1]/255,h=l[2]/255;return[100*(.4124*(d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92)+.3576*(f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92)+.1805*(h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92)),100*(.2126*d+.7152*f+.0722*h),100*(.0193*d+.1192*f+.9505*h)]},a.rgb.lab=function(l){var d=a.rgb.xyz(l),f=d[0],h=d[1],p=d[2];return h/=100,p/=108.883,f=(f/=95.047)>.008856?Math.pow(f,1/3):7.787*f+16/116,[116*(h=h>.008856?Math.pow(h,1/3):7.787*h+16/116)-16,500*(f-h),200*(h-(p=p>.008856?Math.pow(p,1/3):7.787*p+16/116))]},a.hsl.rgb=function(l){var p,_,b,x,y,d=l[0]/360,f=l[1]/100,h=l[2]/100;if(0===f)return[y=255*h,y,y];p=2*h-(_=h<.5?h*(1+f):h+f-h*f),x=[0,0,0];for(var T=0;T<3;T++)(b=d+1/3*-(T-1))<0&&b++,b>1&&b--,x[T]=255*(y=6*b<1?p+6*(_-p)*b:2*b<1?_:3*b<2?p+(_-p)*(2/3-b)*6:p);return x},a.hsl.hsv=function(l){var d=l[0],f=l[1]/100,h=l[2]/100,p=f,_=Math.max(h,.01);return f*=(h*=2)<=1?h:2-h,p*=_<=1?_:2-_,[d,100*(0===h?2*p/(_+p):2*f/(h+f)),(h+f)/2*100]},a.hsv.rgb=function(l){var d=l[0]/60,f=l[1]/100,h=l[2]/100,p=Math.floor(d)%6,_=d-Math.floor(d),b=255*h*(1-f),x=255*h*(1-f*_),y=255*h*(1-f*(1-_));switch(h*=255,p){case 0:return[h,y,b];case 1:return[x,h,b];case 2:return[b,h,y];case 3:return[b,x,h];case 4:return[y,b,h];case 5:return[h,b,x]}},a.hsv.hsl=function(l){var _,b,x,d=l[0],f=l[1]/100,h=l[2]/100,p=Math.max(h,.01);return x=(2-f)*h,b=f*p,[d,100*(b=(b/=(_=(2-f)*p)<=1?_:2-_)||0),100*(x/=2)]},a.hwb.rgb=function(l){var _,b,x,y,T,S,k,d=l[0]/360,f=l[1]/100,h=l[2]/100,p=f+h;switch(p>1&&(f/=p,h/=p),x=6*d-(_=Math.floor(6*d)),0!=(1&_)&&(x=1-x),y=f+x*((b=1-h)-f),_){default:case 6:case 0:T=b,S=y,k=f;break;case 1:T=y,S=b,k=f;break;case 2:T=f,S=b,k=y;break;case 3:T=f,S=y,k=b;break;case 4:T=y,S=f,k=b;break;case 5:T=b,S=f,k=y}return[255*T,255*S,255*k]},a.cmyk.rgb=function(l){var f=l[1]/100,h=l[2]/100,p=l[3]/100;return[255*(1-Math.min(1,l[0]/100*(1-p)+p)),255*(1-Math.min(1,f*(1-p)+p)),255*(1-Math.min(1,h*(1-p)+p))]},a.xyz.rgb=function(l){var p,_,b,d=l[0]/100,f=l[1]/100,h=l[2]/100;return _=-.9689*d+1.8758*f+.0415*h,b=.0557*d+-.204*f+1.057*h,p=(p=3.2406*d+-1.5372*f+-.4986*h)>.0031308?1.055*Math.pow(p,1/2.4)-.055:12.92*p,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:12.92*_,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:12.92*b,[255*(p=Math.min(Math.max(0,p),1)),255*(_=Math.min(Math.max(0,_),1)),255*(b=Math.min(Math.max(0,b),1))]},a.xyz.lab=function(l){var d=l[0],f=l[1],h=l[2];return f/=100,h/=108.883,d=(d/=95.047)>.008856?Math.pow(d,1/3):7.787*d+16/116,[116*(f=f>.008856?Math.pow(f,1/3):7.787*f+16/116)-16,500*(d-f),200*(f-(h=h>.008856?Math.pow(h,1/3):7.787*h+16/116))]},a.lab.xyz=function(l){var p,_,b;p=l[1]/500+(_=(l[0]+16)/116),b=_-l[2]/200;var x=Math.pow(_,3),y=Math.pow(p,3),T=Math.pow(b,3);return _=x>.008856?x:(_-16/116)/7.787,p=y>.008856?y:(p-16/116)/7.787,b=T>.008856?T:(b-16/116)/7.787,[p*=95.047,_*=100,b*=108.883]},a.lab.lch=function(l){var _,d=l[0],f=l[1],h=l[2];return(_=360*Math.atan2(h,f)/2/Math.PI)<0&&(_+=360),[d,Math.sqrt(f*f+h*h),_]},a.lch.lab=function(l){var b,f=l[1];return b=l[2]/360*2*Math.PI,[l[0],f*Math.cos(b),f*Math.sin(b)]},a.rgb.ansi16=function(l){var d=l[0],f=l[1],h=l[2],p=1 in arguments?arguments[1]:a.rgb.hsv(l)[2];if(0===(p=Math.round(p/50)))return 30;var _=30+(Math.round(h/255)<<2|Math.round(f/255)<<1|Math.round(d/255));return 2===p&&(_+=60),_},a.hsv.ansi16=function(l){return a.rgb.ansi16(a.hsv.rgb(l),l[2])},a.rgb.ansi256=function(l){var d=l[0],f=l[1],h=l[2];return d===f&&f===h?d<8?16:d>248?231:Math.round((d-8)/247*24)+232:16+36*Math.round(d/255*5)+6*Math.round(f/255*5)+Math.round(h/255*5)},a.ansi16.rgb=function(l){var d=l%10;if(0===d||7===d)return l>50&&(d+=3.5),[d=d/10.5*255,d,d];var f=.5*(1+~~(l>50));return[(1&d)*f*255,(d>>1&1)*f*255,(d>>2&1)*f*255]},a.ansi256.rgb=function(l){if(l>=232){var d=10*(l-232)+8;return[d,d,d]}var f;return l-=16,[Math.floor(l/36)/5*255,Math.floor((f=l%36)/6)/5*255,f%6/5*255]},a.rgb.hex=function(l){var f=(((255&Math.round(l[0]))<<16)+((255&Math.round(l[1]))<<8)+(255&Math.round(l[2]))).toString(16).toUpperCase();return"000000".substring(f.length)+f},a.hex.rgb=function(l){var d=l.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!d)return[0,0,0];var f=d[0];3===d[0].length&&(f=f.split("").map(function(x){return x+x}).join(""));var h=parseInt(f,16);return[h>>16&255,h>>8&255,255&h]},a.rgb.hcg=function(l){var y,d=l[0]/255,f=l[1]/255,h=l[2]/255,p=Math.max(Math.max(d,f),h),_=Math.min(Math.min(d,f),h),b=p-_;return y=b<=0?0:p===d?(f-h)/b%6:p===f?2+(h-d)/b:4+(d-f)/b+4,y/=6,[360*(y%=1),100*b,100*(b<1?_/(1-b):0)]},a.hsl.hcg=function(l){var h,d=l[1]/100,f=l[2]/100,p=0;return(h=f<.5?2*d*f:2*d*(1-f))<1&&(p=(f-.5*h)/(1-h)),[l[0],100*h,100*p]},a.hsv.hcg=function(l){var f=l[2]/100,h=l[1]/100*f,p=0;return h<1&&(p=(f-h)/(1-h)),[l[0],100*h,100*p]},a.hcg.rgb=function(l){var f=l[1]/100,h=l[2]/100;if(0===f)return[255*h,255*h,255*h];var y,p=[0,0,0],_=l[0]/360%1*6,b=_%1,x=1-b;switch(Math.floor(_)){case 0:p[0]=1,p[1]=b,p[2]=0;break;case 1:p[0]=x,p[1]=1,p[2]=0;break;case 2:p[0]=0,p[1]=1,p[2]=b;break;case 3:p[0]=0,p[1]=x,p[2]=1;break;case 4:p[0]=b,p[1]=0,p[2]=1;break;default:p[0]=1,p[1]=0,p[2]=x}return[255*(f*p[0]+(y=(1-f)*h)),255*(f*p[1]+y),255*(f*p[2]+y)]},a.hcg.hsv=function(l){var d=l[1]/100,h=d+l[2]/100*(1-d),p=0;return h>0&&(p=d/h),[l[0],100*p,100*h]},a.hcg.hsl=function(l){var d=l[1]/100,h=l[2]/100*(1-d)+.5*d,p=0;return h>0&&h<.5?p=d/(2*h):h>=.5&&h<1&&(p=d/(2*(1-h))),[l[0],100*p,100*h]},a.hcg.hwb=function(l){var d=l[1]/100,h=d+l[2]/100*(1-d);return[l[0],100*(h-d),100*(1-h)]},a.hwb.hcg=function(l){var h=1-l[2]/100,p=h-l[1]/100,_=0;return p<1&&(_=(h-p)/(1-p)),[l[0],100*p,100*_]},a.apple.rgb=function(l){return[l[0]/65535*255,l[1]/65535*255,l[2]/65535*255]},a.rgb.apple=function(l){return[l[0]/255*65535,l[1]/255*65535,l[2]/255*65535]},a.gray.rgb=function(l){return[l[0]/100*255,l[0]/100*255,l[0]/100*255]},a.gray.hsl=a.gray.hsv=function(l){return[0,0,l[0]]},a.gray.hwb=function(l){return[0,100,l[0]]},a.gray.cmyk=function(l){return[0,0,0,l[0]]},a.gray.lab=function(l){return[l[0],0,0]},a.gray.hex=function(l){var d=255&Math.round(l[0]/100*255),h=((d<<16)+(d<<8)+d).toString(16).toUpperCase();return"000000".substring(h.length)+h},a.rgb.gray=function(l){return[(l[0]+l[1]+l[2])/3/255*100]}});function En(e){var t=function nt(){for(var e={},t=Object.keys(N),n=t.length,a=0;a<n;a++)e[t[a]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var a=n.pop(),r=Object.keys(N[a]),o=r.length,s=0;s<o;s++){var u=r[s],l=t[u];-1===l.distance&&(l.distance=t[a].distance+1,l.parent=a,n.unshift(u))}return t}function Le(e,t){return function(n){return t(e(n))}}function Zn(e,t){for(var n=[t[e].parent,e],a=N[t[e].parent][e],r=t[e].parent;t[r].parent;)n.unshift(t[r].parent),a=Le(N[t[r].parent][r],a),r=t[r].parent;return a.conversion=n,a}var we={};Object.keys(N).forEach(function(e){we[e]={},Object.defineProperty(we[e],"channels",{value:N[e].channels}),Object.defineProperty(we[e],"labels",{value:N[e].labels});var t=function(e){for(var t=En(e),n={},a=Object.keys(t),r=a.length,o=0;o<r;o++){var s=a[o];null!==t[s].parent&&(n[s]=Zn(s,t))}return n}(e);Object.keys(t).forEach(function(a){var r=t[a];we[e][a]=function qn(e){var t=function(n){if(null==n)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var a=e(n);if("object"==typeof a)for(var r=a.length,o=0;o<r;o++)a[o]=Math.round(a[o]);return a};return"conversion"in e&&(t.conversion=e.conversion),t}(r),we[e][a].raw=function Nn(e){var t=function(n){return null==n?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)})});var jt=we,_t={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ee={getRgba:bt,getHsla:xt,getRgb:function Bn(e){var t=bt(e);return t&&t.slice(0,3)},getHsl:function zn(e){var t=xt(e);return t&&t.slice(0,3)},getHwb:Qt,getAlpha:function Vn(e){var t=bt(e);return t||(t=xt(e))||(t=Qt(e))?t[3]:void 0},hexString:function Hn(e,n){return n=void 0!==n&&3===e.length?n:e[3],"#"+_e(e[0])+_e(e[1])+_e(e[2])+(n>=0&&n<1?_e(Math.round(255*n)):"")},rgbString:function Un(e,t){return t<1||e[3]&&e[3]<1?Jt(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:Jt,percentString:function Yn(e,t){return t<1||e[3]&&e[3]<1?he(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:he,hslString:function R(e,t){return t<1||e[3]&&e[3]<1?ue(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:ue,hwbString:function $t(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function Ne(e){return at[e.slice(0,3)]}};function bt(e){if(e){var s=[0,0,0],u=1,l=e.match(/^#([a-fA-F0-9]{3,4})$/i),d="";if(l){d=(l=l[1])[3];for(var f=0;f<s.length;f++)s[f]=parseInt(l[f]+l[f],16);d&&(u=Math.round(parseInt(d+d,16)/255*100)/100)}else if(l=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(d=l[2],l=l[1],f=0;f<s.length;f++)s[f]=parseInt(l.slice(2*f,2*f+2),16);d&&(u=Math.round(parseInt(d,16)/255*100)/100)}else if(l=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(f=0;f<s.length;f++)s[f]=parseInt(l[f+1]);u=parseFloat(l[4])}else if(l=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(f=0;f<s.length;f++)s[f]=Math.round(2.55*parseFloat(l[f+1]));u=parseFloat(l[4])}else if(l=e.match(/(\w+)/)){if("transparent"==l[1])return[0,0,0,0];if(!(s=_t[l[1]]))return}for(f=0;f<s.length;f++)s[f]=U(s[f],0,255);return u=u||0==u?U(u,0,1):1,s[3]=u,s}}function xt(e){if(e){var n=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(n){var a=parseFloat(n[4]);return[U(parseInt(n[1]),0,360),U(parseFloat(n[2]),0,100),U(parseFloat(n[3]),0,100),U(isNaN(a)?1:a,0,1)]}}}function Qt(e){if(e){var n=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(n){var a=parseFloat(n[4]);return[U(parseInt(n[1]),0,360),U(parseFloat(n[2]),0,100),U(parseFloat(n[3]),0,100),U(isNaN(a)?1:a,0,1)]}}}function Jt(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function he(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function ue(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function U(e,t,n){return Math.min(Math.max(t,e),n)}function _e(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var at={};for(var Gt in _t)at[_t[Gt]]=Gt;var Y=function(e){return e instanceof Y?e:this instanceof Y?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=ee.getRgba(e))?this.setValues("rgb",t):(t=ee.getHsla(e))?this.setValues("hsl",t):(t=ee.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):(void 0!==t.c||void 0!==t.cyan)&&this.setValues("cmyk",t)))):new Y(e);var t};Y.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return ee.hexString(this.values.rgb)},rgbString:function(){return ee.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return ee.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return ee.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return ee.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return ee.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return ee.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return ee.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var a=e[n]/255;t[n]=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=this,a=e,r=void 0===t?.5:t,o=2*r-1,s=n.alpha()-a.alpha(),u=((o*s==-1?o:(o+s)/(1+o*s))+1)/2,l=1-u;return this.rgb(u*n.red()+l*a.red(),u*n.green()+l*a.green(),u*n.blue()+l*a.blue()).alpha(n.alpha()*r+a.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var a,r,e=new Y,t=this.values,n=e.values;for(var o in t)t.hasOwnProperty(o)&&("[object Array]"===(r={}.toString.call(a=t[o]))?n[o]=a.slice(0):"[object Number]"===r?n[o]=a:console.error("unexpected color value:",a));return e}},Y.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Y.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Y.prototype.getValues=function(e){for(var t=this.values,n={},a=0;a<e.length;a++)n[e.charAt(a)]=t[e][a];return 1!==t.alpha&&(n.a=t.alpha),n},Y.prototype.setValues=function(e,t){var s,l,n=this.values,a=this.spaces,r=this.maxes,o=1;if(this.valid=!0,"alpha"===e)o=t;else if(t.length)n[e]=t.slice(0,e.length),o=t[e.length];else if(void 0!==t[e.charAt(0)]){for(s=0;s<e.length;s++)n[e][s]=t[e.charAt(s)];o=t.a}else if(void 0!==t[a[e][0]]){var u=a[e];for(s=0;s<e.length;s++)n[e][s]=t[u[s]];o=t.alpha}if(n.alpha=Math.max(0,Math.min(1,void 0===o?n.alpha:o)),"alpha"===e)return!1;for(s=0;s<e.length;s++)l=Math.max(0,Math.min(r[e][s],n[e][s])),n[e][s]=Math.round(l);for(var d in a)d!==e&&(n[d]=jt[e][d](n[e]));return!0},Y.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},Y.prototype.setChannel=function(e,t,n){var a=this.values[e];return void 0===n?a[t]:(n===a[t]||(a[t]=n,this.setValues(e,a)),this)},typeof window<"u"&&(window.Color=Y);var qe=Y;function Kt(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}var e,Z={noop:function(){},uid:(e=0,function(){return e++}),isNullOrUndef:function(e){return null===e||typeof e>"u"},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return typeof e>"u"?t:e},valueAtIndexOrDefault:function(e,t,n){return Z.valueOrDefault(Z.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,a){var r,o,s;if(Z.isArray(e))if(o=e.length,a)for(r=o-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<o;r++)t.call(n,e[r],r);else if(Z.isObject(e))for(o=(s=Object.keys(e)).length,r=0;r<o;r++)t.call(n,e[s[r]],s[r])},arrayEquals:function(e,t){var n,a,r,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,a=e.length;n<a;++n)if(o=t[n],(r=e[n])instanceof Array&&o instanceof Array){if(!Z.arrayEquals(r,o))return!1}else if(r!==o)return!1;return!0},clone:function(e){if(Z.isArray(e))return e.map(Z.clone);if(Z.isObject(e)){for(var t=Object.create(e),n=Object.keys(e),a=n.length,r=0;r<a;++r)t[n[r]]=Z.clone(e[n[r]]);return t}return e},_merger:function(e,t,n,a){if(Kt(e)){var r=t[e],o=n[e];Z.isObject(r)&&Z.isObject(o)?Z.merge(r,o,a):t[e]=Z.clone(o)}},_mergerIf:function(e,t,n){if(Kt(e)){var a=t[e],r=n[e];Z.isObject(a)&&Z.isObject(r)?Z.mergeIf(a,r):t.hasOwnProperty(e)||(t[e]=Z.clone(r))}},merge:function(e,t,n){var o,s,u,l,d,a=Z.isArray(t)?t:[t],r=a.length;if(!Z.isObject(e))return e;for(o=(n=n||{}).merger||Z._merger,s=0;s<r;++s)if(Z.isObject(t=a[s]))for(d=0,l=(u=Object.keys(t)).length;d<l;++d)o(u[d],e,t,n);return e},mergeIf:function(e,t){return Z.merge(e,t,{merger:Z._mergerIf})},extend:Object.assign||function(e){return Z.merge(e,[].slice.call(arguments,1),{merger:function(t,n,a){n[t]=a[t]}})},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},a=function(){this.constructor=n};return a.prototype=t.prototype,n.prototype=new a,n.extend=Z.inherits,e&&Z.extend(n.prototype,e),n.__super__=t.prototype,n},_deprecated:function(e,t,n,a){void 0!==t&&console.warn(e+': "'+n+'" is deprecated. Please use "'+a+'" instead')}},te=Z;Z.callCallback=Z.callback,Z.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},Z.getValueOrDefault=Z.valueOrDefault,Z.getValueAtIndexOrDefault=Z.valueAtIndexOrDefault;var Be={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1===e?1:(n||(n=.3),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),-a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1===e?1:(n||(n=.3),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:a*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-Be.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*Be.easeInBounce(2*e):.5*Be.easeOutBounce(2*e-1)+.5}},Wn={effects:Be};te.easingEffects=Be;var G=Math.PI,Xt=G/180,rt=2*G,ne=G/2,ze=G/4,en=2*G/3,it={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,a,r,o){if(o){var s=Math.min(o,r/2,a/2),u=t+s,l=n+s,d=t+a-s,f=n+r-s;e.moveTo(t,l),u<d&&l<f?(e.arc(u,l,s,-G,-ne),e.arc(d,l,s,-ne,0),e.arc(d,f,s,0,ne),e.arc(u,f,s,ne,G)):u<d?(e.moveTo(u,n),e.arc(d,l,s,-ne,ne),e.arc(u,l,s,ne,G+ne)):l<f?(e.arc(u,l,s,-G,0),e.arc(u,f,s,0,G)):e.arc(u,l,s,-G,G),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,a,r)},drawPoint:function(e,t,n,a,r,o){var s,u,l,d,f,h=(o||0)*Xt;if(t&&"object"==typeof t&&("[object HTMLImageElement]"===(s=t.toString())||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(a,r),e.rotate(h),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(n)||n<=0)){switch(e.beginPath(),t){default:e.arc(a,r,n,0,rt),e.closePath();break;case"triangle":e.moveTo(a+Math.sin(h)*n,r-Math.cos(h)*n),h+=en,e.lineTo(a+Math.sin(h)*n,r-Math.cos(h)*n),h+=en,e.lineTo(a+Math.sin(h)*n,r-Math.cos(h)*n),e.closePath();break;case"rectRounded":d=n-(f=.516*n),u=Math.cos(h+ze)*d,l=Math.sin(h+ze)*d,e.arc(a-u,r-l,f,h-G,h-ne),e.arc(a+l,r-u,f,h-ne,h),e.arc(a+u,r+l,f,h,h+ne),e.arc(a-l,r+u,f,h+ne,h+G),e.closePath();break;case"rect":if(!o){d=Math.SQRT1_2*n,e.rect(a-d,r-d,2*d,2*d);break}h+=ze;case"rectRot":u=Math.cos(h)*n,l=Math.sin(h)*n,e.moveTo(a-u,r-l),e.lineTo(a+l,r-u),e.lineTo(a+u,r+l),e.lineTo(a-l,r+u),e.closePath();break;case"crossRot":h+=ze;case"cross":u=Math.cos(h)*n,l=Math.sin(h)*n,e.moveTo(a-u,r-l),e.lineTo(a+u,r+l),e.moveTo(a+l,r-u),e.lineTo(a-l,r+u);break;case"star":u=Math.cos(h)*n,l=Math.sin(h)*n,e.moveTo(a-u,r-l),e.lineTo(a+u,r+l),e.moveTo(a+l,r-u),e.lineTo(a-l,r+u),h+=ze,u=Math.cos(h)*n,l=Math.sin(h)*n,e.moveTo(a-u,r-l),e.lineTo(a+u,r+l),e.moveTo(a+l,r-u),e.lineTo(a-l,r+u);break;case"line":u=Math.cos(h)*n,l=Math.sin(h)*n,e.moveTo(a-u,r-l),e.lineTo(a+u,r+l);break;case"dash":e.moveTo(a,r),e.lineTo(a+Math.cos(h)*n,r+Math.sin(h)*n)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){var n=1e-6;return e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,a){var r=n.steppedLine;if(r){if("middle"===r){var o=(t.x+n.x)/2;e.lineTo(o,a?n.y:t.y),e.lineTo(o,a?t.y:n.y)}else"after"===r&&!a||"after"!==r&&a?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}else n.tension?e.bezierCurveTo(a?t.controlPointPreviousX:t.controlPointNextX,a?t.controlPointPreviousY:t.controlPointNextY,a?n.controlPointNextX:n.controlPointPreviousX,a?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):e.lineTo(n.x,n.y)}},jn=it;te.clear=it.clear,te.drawRoundedRectangle=function(e){e.beginPath(),it.roundedRect.apply(it,arguments)};var ot={_set:function(e,t){return te.merge(this[e]||(this[e]={}),t)}};ot._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var P=ot,st=te.valueOrDefault;var Jn={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,a,r;return te.isObject(e)?(t=+e.top||0,n=+e.right||0,a=+e.bottom||0,r=+e.left||0):t=n=a=r=+e||0,{top:t,right:n,bottom:a,left:r,height:t+a,width:r+n}},_parseFont:function(e){var t=P.global,n=st(e.fontSize,t.defaultFontSize),a={family:st(e.fontFamily,t.defaultFontFamily),lineHeight:te.options.toLineHeight(st(e.lineHeight,t.defaultLineHeight),n),size:n,style:st(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return a.string=function Qn(e){return!e||te.isNullOrUndef(e.size)||te.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a},resolve:function(e,t,n,a){var o,s,u,r=!0;for(o=0,s=e.length;o<s;++o)if(void 0!==(u=e[o])&&(void 0!==t&&"function"==typeof u&&(u=u(t),r=!1),void 0!==n&&te.isArray(u)&&(u=u[n],r=!1),void 0!==u))return a&&!r&&(a.cacheable=!1),u}},tn={_factorize:function(e){var a,t=[],n=Math.sqrt(e);for(a=1;a<n;a++)e%a==0&&(t.push(a),t.push(e/a));return n===(0|n)&&t.push(n),t.sort(function(r,o){return r-o}).pop(),t},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t);return e===Math.pow(10,n)?n:t}},$n=tn;te.log10=tn.log10;var m=te,ra=jn,ia=Jn,oa=$n,sa={getRtlAdapter:function(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(n){t=n},textAlign:function(n){return"center"===n?n:"right"===n?"left":"right"},xPlus:function(n,a){return n-a},leftForLtr:function(n,a){return n-a}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},overrideTextDirection:function(e,t){var n,a;("ltr"===t||"rtl"===t)&&(a=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=a)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};m.easing=Wn,m.canvas=ra,m.options=ia,m.math=oa,m.rtl=sa;var Ct=function(e){m.extend(this,e),this.initialize.apply(this,arguments)};m.extend(Ct.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=m.extend({},e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,a=t._start,r=t._view;return n&&1!==e?(r||(r=t._view={}),a||(a=t._start={}),function la(e,t,n,a){var o,s,u,l,d,f,h,p,_,r=Object.keys(n);for(o=0,s=r.length;o<s;++o)if(f=n[u=r[o]],t.hasOwnProperty(u)||(t[u]=f),(l=t[u])!==f&&"_"!==u[0]){if(e.hasOwnProperty(u)||(e[u]=l),(h=typeof f)==typeof(d=e[u]))if("string"===h){if((p=qe(d)).valid&&(_=qe(f)).valid){t[u]=_.mix(p,a).rgbString();continue}}else if(m.isFinite(d)&&m.isFinite(f)){t[u]=d+(f-d)*a;continue}t[u]=f}}(a,r,n,e),t):(t._view=m.extend({},n),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return m.isNumber(this._model.x)&&m.isNumber(this._model.y)}}),Ct.extend=m.inherits;var de=Ct,yt=de.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Mt=yt;Object.defineProperty(yt.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(yt.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),P._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:m.noop,onComplete:m.noop}});var Tt={animations:[],request:null,addAnimation:function(e,t,n,a){var o,s,r=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=n,a||(e.animating=!0),o=0,s=r.length;o<s;++o)if(r[o].chart===e)return void(r[o]=t);r.push(t),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=m.findIndex(this.animations,function(n){return n.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=m.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){var e=this;e.advance(),e.animations.length>0&&e.requestAnimationFrame()},advance:function(){for(var t,n,a,r,e=this.animations,o=0;o<e.length;)n=(t=e[o]).chart,a=t.numSteps,r=Math.floor((Date.now()-t.startTime)/t.duration*a)+1,t.currentStep=Math.min(r,a),m.callback(t.render,[n,t],n),m.callback(t.onAnimationProgress,[t],n),t.currentStep>=a?(m.callback(t.onAnimationComplete,[t],n),n.animating=!1,e.splice(o,1)):++o}},Se=m.options.resolve,nn=["push","pop","shift","splice","unshift"];function an(e,t){var n=e._chartjs;if(n){var a=n.listeners,r=a.indexOf(t);-1!==r&&a.splice(r,1),!(a.length>0)&&(nn.forEach(function(o){delete e[o]}),delete e._chartjs)}}var wt=function(e,t){this.initialize(e,t)};m.extend(wt.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),n=e.chart,a=n.scales,r=e.getDataset(),o=n.options.scales;(null===t.xAxisID||!(t.xAxisID in a)||r.xAxisID)&&(t.xAxisID=r.xAxisID||o.xAxes[0].id),(null===t.yAxisID||!(t.yAxisID in a)||r.yAxisID)&&(t.yAxisID=r.yAxisID||o.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&an(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,n=t.dataElementType;return n&&new n({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var r,o,e=this,t=e.getMeta(),n=e.getDataset().data||[],a=t.data;for(r=0,o=n.length;r<o;++r)a[r]=a[r]||e.createMetaData(r);t.dataset=t.dataset||e.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,t=e.getDataset(),n=t.data||(t.data=[]);e._data!==n&&(e._data&&an(e._data,e),n&&Object.isExtensible(n)&&function ca(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),nn.forEach(function(n){var a="onData"+n.charAt(0).toUpperCase()+n.slice(1),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:function(){var o=Array.prototype.slice.call(arguments),s=r.apply(this,o);return m.each(e._chartjs.listeners,function(u){"function"==typeof u[a]&&u[a].apply(u,o)}),s}})}))}(n,e),e._data=n),e.resyncElements()},_configure:function(){var e=this;e._config=m.merge(Object.create(null),[e.chart.options.datasets[e._type],e.getDataset()],{merger:function(t,n,a){"_meta"!==t&&"data"!==t&&m._merger(t,n,a)}})},_update:function(e){var t=this;t._configure(),t._cachedDataOpts=null,t.update(e)},update:m.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],a=n.length,r=0;r<a;++r)n[r].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,a=0;for(e.dataset&&e.dataset.draw();a<n;++a)t[a].draw()},getStyle:function(e){var r,t=this,n=t.getMeta(),a=n.dataset;return t._configure(),(!1===(r=a&&void 0===e?t._resolveDatasetElementOptions(a||{}):t._resolveDataElementOptions(n.data[e=e||0]||{},e)).fill||null===r.fill)&&(r.backgroundColor=r.borderColor),r},_resolveDatasetElementOptions:function(e,t){var d,f,h,p,n=this,a=n.chart,r=n._config,o=e.custom||{},s=a.options.elements[n.datasetElementType.prototype._type]||{},u=n._datasetElementOptions,l={},_={chart:a,dataset:n.getDataset(),datasetIndex:n.index,hover:t};for(d=0,f=u.length;d<f;++d)h=u[d],p=t?"hover"+h.charAt(0).toUpperCase()+h.slice(1):h,l[h]=Se([o[p],r[p],s[p]],_);return l},_resolveDataElementOptions:function(e,t){var n=this,a=e&&e.custom,r=n._cachedDataOpts;if(r&&!a)return r;var p,_,b,x,o=n.chart,s=n._config,u=o.options.elements[n.dataElementType.prototype._type]||{},l=n._dataElementOptions,d={},f={chart:o,dataIndex:t,dataset:n.getDataset(),datasetIndex:n.index},h={cacheable:!a};if(a=a||{},m.isArray(l))for(_=0,b=l.length;_<b;++_)d[x=l[_]]=Se([a[x],s[x],u[x]],f,t,h);else for(_=0,b=(p=Object.keys(l)).length;_<b;++_)d[x=p[_]]=Se([a[x],s[l[x]],s[x],u[x]],f,t,h);return h.cacheable&&(n._cachedDataOpts=Object.freeze(d)),d},removeHoverStyle:function(e){m.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,a=e.custom||{},r=e._model,o=m.getHoverColor;e.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth},r.backgroundColor=Se([a.hoverBackgroundColor,t.hoverBackgroundColor,o(r.backgroundColor)],void 0,n),r.borderColor=Se([a.hoverBorderColor,t.hoverBorderColor,o(r.borderColor)],void 0,n),r.borderWidth=Se([a.hoverBorderWidth,t.hoverBorderWidth,r.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var n,a,r,o,s,u,e=this.getMeta().dataset,t={};if(e){for(u=e._model,s=this._resolveDatasetElementOptions(e,!0),n=0,a=(o=Object.keys(s)).length;n<a;++n)t[r=o[n]]=u[r],u[r]=s[r];e.$previousStyle=t}},resyncElements:function(){var e=this,t=e.getMeta(),n=e.getDataset().data,a=t.data.length,r=n.length;r<a?t.data.splice(r,a-r):r>a&&e.insertElements(a,r-a)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),wt.extend=m.inherits;var X=wt,le=2*Math.PI;function rn(e,t){var n=t.startAngle,a=t.endAngle,r=t.pixelMargin,o=r/t.outerRadius,s=t.x,u=t.y;e.beginPath(),e.arc(s,u,t.outerRadius,n-o,a+o),t.innerRadius>r?e.arc(s,u,t.innerRadius-r,a+(o=r/t.innerRadius),n-o,!0):e.arc(s,u,r,a+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip()}function da(e,t,n){var a="inner"===t.borderAlign;a?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),n.fullCircles&&function ua(e,t,n,a){var o,r=n.endAngle;for(a&&(n.endAngle=n.startAngle+le,rn(e,n),n.endAngle=r,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=le,n.fullCircles--)),e.beginPath(),e.arc(n.x,n.y,n.innerRadius,n.startAngle+le,n.startAngle,!0),o=0;o<n.fullCircles;++o)e.stroke();for(e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.startAngle+le),o=0;o<n.fullCircles;++o)e.stroke()}(e,t,n,a),a&&rn(e,n),e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.endAngle),e.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),e.closePath(),e.stroke()}P._set("global",{elements:{arc:{backgroundColor:P.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var fa=de.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var a=m.getAngleFromPoint(n,{x:e,y:t}),r=a.angle,o=a.distance,s=n.startAngle,u=n.endAngle;u<s;)u+=le;for(;r>u;)r-=le;for(;r<s;)r+=le;return r>=s&&r<=u&&o>=n.innerRadius&&o<=n.outerRadius}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var r,e=this._chart.ctx,t=this._view,n="inner"===t.borderAlign?.33:0,a={x:t.x,y:t.y,innerRadius:t.innerRadius,outerRadius:Math.max(t.outerRadius-n,0),pixelMargin:n,startAngle:t.startAngle,endAngle:t.endAngle,fullCircles:Math.floor(t.circumference/le)};if(e.save(),e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,a.fullCircles){for(a.endAngle=a.startAngle+le,e.beginPath(),e.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),r=0;r<a.fullCircles;++r)e.fill();a.endAngle=a.startAngle+t.circumference%le}e.beginPath(),e.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),e.fill(),t.borderWidth&&da(e,t,a),e.restore()}}),on=m.valueOrDefault,sn=P.global.defaultColor;P._set("global",{elements:{line:{tension:.4,backgroundColor:sn,borderWidth:3,borderColor:sn,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ha=de.extend({_type:"line",draw:function(){var d,f,h,e=this,t=e._view,n=e._chart.ctx,a=t.spanGaps,r=e._children.slice(),o=P.global,s=o.elements.line,u=-1,l=e._loop;if(r.length){if(e._loop){for(d=0;d<r.length;++d)if(f=m.previousItem(r,d),!r[d]._view.skip&&f._view.skip){r=r.slice(d).concat(r.slice(0,d)),l=a;break}l&&r.push(r[0])}for(n.save(),n.lineCap=t.borderCapStyle||s.borderCapStyle,n.setLineDash&&n.setLineDash(t.borderDash||s.borderDash),n.lineDashOffset=on(t.borderDashOffset,s.borderDashOffset),n.lineJoin=t.borderJoinStyle||s.borderJoinStyle,n.lineWidth=on(t.borderWidth,s.borderWidth),n.strokeStyle=t.borderColor||o.defaultColor,n.beginPath(),(h=r[0]._view).skip||(n.moveTo(h.x,h.y),u=0),d=1;d<r.length;++d)h=r[d]._view,f=-1===u?m.previousItem(r,d):r[u],h.skip||(u!==d-1&&!a||-1===u?n.moveTo(h.x,h.y):m.canvas.lineTo(n,f._view,h),u=d);l&&n.closePath(),n.stroke(),n.restore()}}}),ga=m.valueOrDefault,ln=P.global.defaultColor;function cn(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}P._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ln,borderColor:ln,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var va=de.extend({_type:"point",inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:cn,inXRange:cn,inYRange:function ma(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._chart.ctx,a=t.pointStyle,r=t.rotation,o=t.radius,s=t.x,u=t.y,l=P.global,d=l.defaultColor;t.skip||(void 0===e||m.canvas._isPointInArea(t,e))&&(n.strokeStyle=t.borderColor||d,n.lineWidth=ga(t.borderWidth,l.elements.point.borderWidth),n.fillStyle=t.backgroundColor||d,m.canvas.drawPoint(n,a,o,s,u,r))}}),un=P.global.defaultColor;function lt(e){return e&&void 0!==e.width}function dn(e){var t,n,a,r,o;return lt(e)?(t=e.x-(o=e.width/2),n=e.x+o,a=Math.min(e.y,e.base),r=Math.max(e.y,e.base)):(o=e.height/2,t=Math.min(e.x,e.base),n=Math.max(e.x,e.base),a=e.y-o,r=e.y+o),{left:t,top:a,right:n,bottom:r}}function fn(e,t,n){return e===t?n:e===n?t:e}function _a(e,t,n){var o,s,u,l,a=e.borderWidth,r=function pa(e){var t=e.borderSkipped,n={};return t&&(e.horizontal?e.base>e.x&&(t=fn(t,"left","right")):e.base<e.y&&(t=fn(t,"bottom","top")),n[t]=!0),n}(e);return m.isObject(a)?(o=+a.top||0,s=+a.right||0,u=+a.bottom||0,l=+a.left||0):o=s=u=l=+a||0,{t:r.top||o<0?0:o>n?n:o,r:r.right||s<0?0:s>t?t:s,b:r.bottom||u<0?0:u>n?n:u,l:r.left||l<0?0:l>t?t:l}}function Ve(e,t,n){var a=null===t,r=null===n,o=!(!e||a&&r)&&dn(e);return o&&(a||t>=o.left&&t<=o.right)&&(r||n>=o.top&&n<=o.bottom)}P._set("global",{elements:{rectangle:{backgroundColor:un,borderColor:un,borderSkipped:"bottom",borderWidth:0}}});var xa=de.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,n=function ba(e){var t=dn(e),n=t.right-t.left,a=t.bottom-t.top,r=_a(e,n/2,a/2);return{outer:{x:t.left,y:t.top,w:n,h:a},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:a-r.t-r.b}}}(t),a=n.outer,r=n.inner;e.fillStyle=t.backgroundColor,e.fillRect(a.x,a.y,a.w,a.h),(a.w!==r.w||a.h!==r.h)&&(e.save(),e.beginPath(),e.rect(a.x,a.y,a.w,a.h),e.clip(),e.fillStyle=t.borderColor,e.rect(r.x,r.y,r.w,r.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return Ve(this._view,e,t)},inLabelRange:function(e,t){var n=this._view;return lt(n)?Ve(n,e,null):Ve(n,null,t)},inXRange:function(e){return Ve(this._view,e,null)},inYRange:function(e){return Ve(this._view,null,e)},getCenterPoint:function(){var t,n,e=this._view;return lt(e)?(t=e.x,n=(e.y+e.base)/2):(t=(e.x+e.base)/2,n=e.y),{x:t,y:n}},getArea:function(){var e=this._view;return lt(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),K={},ya=ha,Ma=va,Ta=xa;K.Arc=fa,K.Line=ya,K.Point=Ma,K.Rectangle=Ta;var He=m._deprecated,ke=m.valueOrDefault;function Sa(e,t,n){var u,l,a=n.barThickness,r=t.stackCount,o=t.pixels[e],s=m.isNullOrUndef(a)?function wa(e,t){var a,r,o,s,n=e._length;for(o=1,s=t.length;o<s;++o)n=Math.min(n,Math.abs(t[o]-t[o-1]));for(o=0,s=e.getTicks().length;o<s;++o)r=e.getPixelForTick(o),n=o>0?Math.min(n,Math.abs(r-a)):n,a=r;return n}(t.scale,t.pixels):-1;return m.isNullOrUndef(a)?(u=s*n.categoryPercentage,l=n.barPercentage):(u=a*r,l=1),{chunk:u/r,ratio:l,start:o-u/2}}P._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),P._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var hn=X.extend({dataElementType:K.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,n,e=this;X.prototype.initialize.apply(e,arguments),(t=e.getMeta()).stack=e.getDataset().stack,t.bar=!0,n=e._getIndexScale().options,He("bar chart",n.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),He("bar chart",n.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),He("bar chart",n.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),He("bar chart",e._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),He("bar chart",n.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var a,r,t=this,n=t.getMeta().data;for(t._ruler=t.getRuler(),a=0,r=n.length;a<r;++a)t.updateElement(n[a],a,e)},updateElement:function(e,t,n){var a=this,r=a.getMeta(),o=a.getDataset(),s=a._resolveDataElementOptions(e,t);e._xScale=a.getScaleForId(r.xAxisID),e._yScale=a.getScaleForId(r.yAxisID),e._datasetIndex=a.index,e._index=t,e._model={backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderSkipped:s.borderSkipped,borderWidth:s.borderWidth,datasetLabel:o.label,label:a.chart.data.labels[t]},m.isArray(o.data[t])&&(e._model.borderSkipped=null),a._updateElementGeometry(e,t,n,s),e.pivot()},_updateElementGeometry:function(e,t,n,a){var r=this,o=e._model,s=r._getValueScale(),u=s.getBasePixel(),l=s.isHorizontal(),d=r._ruler||r.getRuler(),f=r.calculateBarValuePixels(r.index,t,a),h=r.calculateBarIndexPixels(r.index,t,d,a);o.horizontal=l,o.base=n?u:f.base,o.x=l?n?u:f.head:h.center,o.y=l?h.center:n?u:f.head,o.height=l?h.size:void 0,o.width=l?void 0:h.size},_getStacks:function(e){var u,l,n=this._getIndexScale(),a=n._getMatchingVisibleMetas(this._type),r=n.options.stacked,o=a.length,s=[];for(u=0;u<o&&(l=a[u],(!1===r||-1===s.indexOf(l.stack)||void 0===r&&void 0===l.stack)&&s.push(l.stack),l.index!==e);++u);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a},getRuler:function(){var a,r,e=this,t=e._getIndexScale(),n=[];for(a=0,r=e.getMeta().data.length;a<r;++a)n.push(t.getPixelForValue(null,a,e.index));return{pixels:n,start:t._startPixel,end:t._endPixel,stackCount:e.getStackCount(),scale:t}},calculateBarValuePixels:function(e,t,n){var y,T,S,k,D,O,q,a=this,r=a.chart,o=a._getValueScale(),s=o.isHorizontal(),u=r.data.datasets,l=o._getMatchingVisibleMetas(a._type),d=o._parseValue(u[e].data[t]),f=n.minBarLength,h=o.options.stacked,p=a.getMeta().stack,_=void 0===d.start?0:d.max>=0&&d.min>=0?d.min:d.max,b=void 0===d.start?d.end:d.max>=0&&d.min>=0?d.max-d.min:d.min-d.max,x=l.length;if(h||void 0===h&&void 0!==p)for(y=0;y<x&&(T=l[y]).index!==e;++y)T.stack===p&&(S=void 0===(q=o._parseValue(u[T.index].data[t])).start?q.end:q.min>=0&&q.max>=0?q.max:q.min,(d.min<0&&S<0||d.max>=0&&S>0)&&(_+=S));return k=o.getPixelForValue(_),O=(D=o.getPixelForValue(_+b))-k,void 0!==f&&Math.abs(O)<f&&(O=f,D=b>=0&&!s||b<0&&s?k-f:k+f),{size:O,base:k,head:D,center:D+O/2}},calculateBarIndexPixels:function(e,t,n,a){var o="flex"===a.barThickness?function ka(e,t,n){var l,a=t.pixels,r=a[e],o=e>0?a[e-1]:null,s=e<a.length-1?a[e+1]:null,u=n.categoryPercentage;return null===o&&(o=r-(null===s?t.end-t.start:s-r)),null===s&&(s=r+r-o),l=r-(r-Math.min(o,s))/2*u,{chunk:Math.abs(s-o)/2*u/t.stackCount,ratio:n.barPercentage,start:l}}(t,n,a):Sa(t,n,a),s=this.getStackIndex(e,this.getMeta().stack),u=o.start+o.chunk*s+o.chunk/2,l=Math.min(ke(a.maxBarThickness,1/0),o.chunk*o.ratio);return{base:u-l/2,head:u+l/2,center:u,size:l}},draw:function(){var e=this,t=e.chart,n=e._getValueScale(),a=e.getMeta().data,r=e.getDataset(),o=a.length,s=0;for(m.canvas.clipArea(t.ctx,t.chartArea);s<o;++s){var u=n._parseValue(r.data[s]);!isNaN(u.min)&&!isNaN(u.max)&&a[s].draw()}m.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var e=this,t=m.extend({},X.prototype._resolveDataElementOptions.apply(e,arguments)),n=e._getIndexScale().options,a=e._getValueScale().options;return t.barPercentage=ke(n.barPercentage,t.barPercentage),t.barThickness=ke(n.barThickness,t.barThickness),t.categoryPercentage=ke(n.categoryPercentage,t.categoryPercentage),t.maxBarThickness=ke(n.maxBarThickness,t.maxBarThickness),t.minBarLength=ke(a.minBarLength,t.minBarLength),t}}),ce=m.valueOrDefault,Ia=m.options.resolve;P._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": ("+e.xLabel+", "+e.yLabel+", "+t.datasets[e.datasetIndex].data[e.index].r+")"}}}});var Pa=X.extend({dataElementType:K.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,n=t.getMeta();m.each(n.data,function(r,o){t.updateElement(r,o,e)})},updateElement:function(e,t,n){var a=this,r=a.getMeta(),o=e.custom||{},s=a.getScaleForId(r.xAxisID),u=a.getScaleForId(r.yAxisID),l=a._resolveDataElementOptions(e,t),d=a.getDataset().data[t],f=a.index,h=n?s.getPixelForDecimal(.5):s.getPixelForValue("object"==typeof d?d:NaN,t,f),p=n?u.getBasePixel():u.getPixelForValue(d,t,f);e._xScale=s,e._yScale=u,e._options=l,e._datasetIndex=f,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:n?0:l.radius,skip:o.skip||isNaN(h)||isNaN(p),x:h,y:p},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options,a=m.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ce(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=ce(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=ce(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(e,t){var n=this,a=n.chart,r=n.getDataset(),o=e.custom||{},s=r.data[t]||{},u=X.prototype._resolveDataElementOptions.apply(n,arguments),l={chart:a,dataIndex:t,dataset:r,datasetIndex:n.index};return n._cachedDataOpts===u&&(u=m.extend({},u)),u.radius=Ia([o.radius,s.r,n._config.radius,a.options.elements.point.radius],l,t),u}}),ct=m.valueOrDefault,be=Math.PI,ge=2*be,xe=be/2;P._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var o,s,u,t=document.createElement("ul"),n=e.data,a=n.datasets,r=n.labels;if(t.setAttribute("class",e.id+"-legend"),a.length)for(o=0,s=a[0].data.length;o<s;++o)(u=t.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[o],r[o]&&u.appendChild(document.createTextNode(r[o]));return t.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,a){var r=e.getDatasetMeta(0),o=r.controller.getStyle(a);return{text:n,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,hidden:isNaN(t.datasets[0].data[a])||r.data[a].hidden,index:a}}):[]}},onClick:function(e,t){var r,o,s,n=t.index,a=this.chart;for(r=0,o=(a.data.datasets||[]).length;r<o;++r)(s=a.getDatasetMeta(r)).data[n]&&(s.data[n].hidden=!s.data[n].hidden);a.update()}},cutoutPercentage:50,rotation:-xe,circumference:ge,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],a=": "+t.datasets[e.datasetIndex].data[e.index];return m.isArray(n)?(n=n.slice())[0]+=a:n+=a,n}}}});var gn=X.extend({dataElementType:K.Arc,linkScales:m.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var y,T,t=this,n=t.chart,a=n.chartArea,r=n.options,o=1,s=1,u=0,l=0,d=t.getMeta(),f=d.data,h=r.cutoutPercentage/100||0,p=r.circumference,_=t._getRingWeight(t.index);if(p<ge){var S=r.rotation%ge,k=(S+=S>=be?-ge:S<-be?ge:0)+p,D=Math.cos(S),O=Math.sin(S),q=Math.cos(k),L=Math.sin(k),V=S<=0&&k>=0||k>=ge,H=S<=xe&&k>=xe||k>=ge+xe,j=S<=-xe&&k>=-xe||k>=be+xe,W=S===-be||k>=be?-1:Math.min(D,D*h,q,q*h),$=j?-1:Math.min(O,O*h,L,L*h),mt=V?1:Math.max(D,D*h,q,q*h),vt=H?1:Math.max(O,O*h,L,L*h);o=(mt-W)/2,s=(vt-$)/2,u=-(mt+W)/2,l=-(vt+$)/2}for(y=0,T=f.length;y<T;++y)f[y]._options=t._resolveDataElementOptions(f[y],y);for(n.borderWidth=t.getMaxBorderWidth(),n.outerRadius=Math.max(Math.min((a.right-a.left-n.borderWidth)/o,(a.bottom-a.top-n.borderWidth)/s)/2,0),n.innerRadius=Math.max(n.outerRadius*h,0),n.radiusLength=(n.outerRadius-n.innerRadius)/(t._getVisibleDatasetWeightTotal()||1),n.offsetX=u*n.outerRadius,n.offsetY=l*n.outerRadius,d.total=t.calculateTotal(),t.outerRadius=n.outerRadius-n.radiusLength*t._getRingWeightOffset(t.index),t.innerRadius=Math.max(t.outerRadius-n.radiusLength*_,0),y=0,T=f.length;y<T;++y)t.updateElement(f[y],y,e)},updateElement:function(e,t,n){var a=this,r=a.chart,o=r.chartArea,s=r.options,u=s.animation,l=(o.left+o.right)/2,d=(o.top+o.bottom)/2,f=s.rotation,h=s.rotation,p=a.getDataset(),_=n&&u.animateRotate||e.hidden?0:a.calculateCircumference(p.data[t])*(s.circumference/ge),y=e._options||{};m.extend(e,{_datasetIndex:a.index,_index:t,_model:{backgroundColor:y.backgroundColor,borderColor:y.borderColor,borderWidth:y.borderWidth,borderAlign:y.borderAlign,x:l+r.offsetX,y:d+r.offsetY,startAngle:f,endAngle:h,circumference:_,outerRadius:n&&u.animateScale?0:a.outerRadius,innerRadius:n&&u.animateScale?0:a.innerRadius,label:m.valueAtIndexOrDefault(p.label,t,r.data.labels[t])}});var T=e._model;(!n||!u.animateRotate)&&(T.startAngle=0===t?s.rotation:a.getMeta().data[t-1]._model.endAngle,T.endAngle=T.startAngle+T.circumference),e.pivot()},calculateTotal:function(){var a,e=this.getDataset(),t=this.getMeta(),n=0;return m.each(t.data,function(r,o){a=e.data[o],!isNaN(a)&&!r.hidden&&(n+=Math.abs(a))}),n},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?ge*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var r,o,s,u,l,d,f,h,n=0,a=this.chart;if(!e)for(r=0,o=a.data.datasets.length;r<o;++r)if(a.isDatasetVisible(r)){e=(s=a.getDatasetMeta(r)).data,r!==this.index&&(l=s.controller);break}if(!e)return 0;for(r=0,o=e.length;r<o;++r)u=e[r],l?(l._configure(),d=l._resolveDataElementOptions(u,r)):d=u._options,"inner"!==d.borderAlign&&(n=(h=d.hoverBorderWidth)>(n=(f=d.borderWidth)>n?f:n)?h:n);return n},setHoverStyle:function(e){var t=e._model,n=e._options,a=m.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=ct(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=ct(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=ct(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t},_getRingWeight:function(e){return Math.max(ct(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});P._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),P._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Aa=hn.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),me=m.valueOrDefault,Oa=m.options.resolve,St=m.canvas._isPointInArea;function mn(e,t){var n=e&&e.options.ticks||{},a=n.reverse,r=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:a?o:r,end:a?r:o}}function Da(e,t,n){var a=n/2,r=mn(e,a),o=mn(t,a);return{top:o.end,right:r.end,bottom:o.start,left:r.start}}function Fa(e){var t,n,a,r;return m.isObject(e)?(t=e.top,n=e.right,a=e.bottom,r=e.left):t=n=a=r=e,{top:t,right:n,bottom:a,left:r}}P._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var vn=X.extend({datasetElementType:K.Line,dataElementType:K.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var l,d,t=this,n=t.getMeta(),a=n.dataset,r=n.data||[],s=t._config,u=t._showLine=me(s.showLine,t.chart.options.showLines);for(t._xScale=t.getScaleForId(n.xAxisID),t._yScale=t.getScaleForId(n.yAxisID),u&&(void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),a._scale=t._yScale,a._datasetIndex=t.index,a._children=r,a._model=t._resolveDatasetElementOptions(a),a.pivot()),l=0,d=r.length;l<d;++l)t.updateElement(r[l],l,e);for(u&&0!==a._model.tension&&t.updateBezierControlPoints(),l=0,d=r.length;l<d;++l)r[l].pivot()},updateElement:function(e,t,n){var p,_,a=this,r=a.getMeta(),o=e.custom||{},s=a.getDataset(),u=a.index,l=s.data[t],d=a._xScale,f=a._yScale,h=r.dataset._model,b=a._resolveDataElementOptions(e,t);p=d.getPixelForValue("object"==typeof l?l:NaN,t,u),_=n?f.getBasePixel():a.calculatePointY(l,t,u),e._xScale=d,e._yScale=f,e._options=b,e._datasetIndex=u,e._index=t,e._model={x:p,y:_,skip:o.skip||isNaN(p)||isNaN(_),radius:b.radius,pointStyle:b.pointStyle,rotation:b.rotation,backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,tension:me(o.tension,h?h.tension:0),steppedLine:!!h&&h.steppedLine,hitRadius:b.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,n=t._config,a=e.custom||{},r=t.chart.options,o=r.elements.line,s=X.prototype._resolveDatasetElementOptions.apply(t,arguments);return s.spanGaps=me(n.spanGaps,r.spanGaps),s.tension=me(n.lineTension,o.tension),s.steppedLine=Oa([a.steppedLine,n.steppedLine,o.stepped]),s.clip=Fa(me(n.clip,Da(t._xScale,t._yScale,s.borderWidth))),s},calculatePointY:function(e,t,n){var l,f,h,p,_,b,r=this.chart,o=this._yScale,s=0,u=0;if(o.options.stacked){for(p=+o.getRightValue(e),b=(_=r._getSortedVisibleDatasetMetas()).length,l=0;l<b&&(f=_[l]).index!==n;++l)"line"===f.type&&f.yAxisID===o.id&&((h=+o.getRightValue(r.data.datasets[f.index].data[t]))<0?u+=h||0:s+=h||0);return o.getPixelForValue(p<0?u+p:s+p)}return o.getPixelForValue(e)},updateBezierControlPoints:function(){var s,u,l,d,t=this.chart,n=this.getMeta(),a=n.dataset._model,r=t.chartArea,o=n.data||[];function f(h,p,_){return Math.max(Math.min(h,_),p)}if(a.spanGaps&&(o=o.filter(function(h){return!h._model.skip})),"monotone"===a.cubicInterpolationMode)m.splineCurveMonotone(o);else for(s=0,u=o.length;s<u;++s)l=o[s]._model,d=m.splineCurve(m.previousItem(o,s)._model,l,m.nextItem(o,s)._model,a.tension),l.controlPointPreviousX=d.previous.x,l.controlPointPreviousY=d.previous.y,l.controlPointNextX=d.next.x,l.controlPointNextY=d.next.y;if(t.options.elements.line.capBezierPoints)for(s=0,u=o.length;s<u;++s)St(l=o[s]._model,r)&&(s>0&&St(o[s-1]._model,r)&&(l.controlPointPreviousX=f(l.controlPointPreviousX,r.left,r.right),l.controlPointPreviousY=f(l.controlPointPreviousY,r.top,r.bottom)),s<o.length-1&&St(o[s+1]._model,r)&&(l.controlPointNextX=f(l.controlPointNextX,r.left,r.right),l.controlPointNextY=f(l.controlPointNextY,r.top,r.bottom)))},draw:function(){var l,e=this,t=e.chart,n=e.getMeta(),a=n.data||[],r=t.chartArea,o=t.canvas,s=0,u=a.length;for(e._showLine&&(m.canvas.clipArea(t.ctx,{left:!1===(l=n.dataset._model.clip).left?0:r.left-l.left,right:!1===l.right?o.width:r.right+l.right,top:!1===l.top?0:r.top-l.top,bottom:!1===l.bottom?o.height:r.bottom+l.bottom}),n.dataset.draw(),m.canvas.unclipArea(t.ctx));s<u;++s)a[s].draw(r)},setHoverStyle:function(e){var t=e._model,n=e._options,a=m.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=me(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=me(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=me(n.hoverBorderWidth,n.borderWidth),t.radius=me(n.hoverRadius,n.radius)}}),Ea=m.options.resolve;P._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var o,s,u,t=document.createElement("ul"),n=e.data,a=n.datasets,r=n.labels;if(t.setAttribute("class",e.id+"-legend"),a.length)for(o=0,s=a[0].data.length;o<s;++o)(u=t.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[o],r[o]&&u.appendChild(document.createTextNode(r[o]));return t.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,a){var r=e.getDatasetMeta(0),o=r.controller.getStyle(a);return{text:n,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,hidden:isNaN(t.datasets[0].data[a])||r.data[a].hidden,index:a}}):[]}},onClick:function(e,t){var r,o,s,n=t.index,a=this.chart;for(r=0,o=(a.data.datasets||[]).length;r<o;++r)(s=a.getDatasetMeta(r)).data[n].hidden=!s.data[n].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var Za=X.extend({dataElementType:K.Arc,linkScales:m.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var l,d,f,t=this,n=t.getDataset(),a=t.getMeta(),r=t.chart.options.startAngle||0,o=t._starts=[],s=t._angles=[],u=a.data;for(t._updateRadius(),a.count=t.countVisibleElements(),l=0,d=n.data.length;l<d;l++)o[l]=r,f=t._computeAngle(l),s[l]=f,r+=f;for(l=0,d=u.length;l<d;++l)u[l]._options=t._resolveDataElementOptions(u[l],l),t.updateElement(u[l],l,e)},_updateRadius:function(){var e=this,t=e.chart,n=t.chartArea,a=t.options,r=Math.min(n.right-n.left,n.bottom-n.top);t.outerRadius=Math.max(r/2,0),t.innerRadius=Math.max(a.cutoutPercentage?t.outerRadius/100*a.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,n){var a=this,r=a.chart,o=a.getDataset(),s=r.options,u=s.animation,l=r.scale,d=r.data.labels,f=l.xCenter,h=l.yCenter,p=s.startAngle,_=e.hidden?0:l.getDistanceFromCenterForValue(o.data[t]),b=a._starts[t],x=b+(e.hidden?0:a._angles[t]),y=u.animateScale?0:l.getDistanceFromCenterForValue(o.data[t]),T=e._options||{};m.extend(e,{_datasetIndex:a.index,_index:t,_scale:l,_model:{backgroundColor:T.backgroundColor,borderColor:T.borderColor,borderWidth:T.borderWidth,borderAlign:T.borderAlign,x:f,y:h,innerRadius:0,outerRadius:n?y:_,startAngle:n&&u.animateRotate?p:b,endAngle:n&&u.animateRotate?p:x,label:m.valueAtIndexOrDefault(d,t,d[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return m.each(t.data,function(a,r){!isNaN(e.data[r])&&!a.hidden&&n++}),n},setHoverStyle:function(e){var t=e._model,n=e._options,a=m.getHoverColor,r=m.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=r(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=r(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=r(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(e){var t=this,n=this.getMeta().count,a=t.getDataset(),r=t.getMeta();return isNaN(a.data[e])||r.data[e].hidden?0:Ea([t.chart.options.elements.arc.angle,2*Math.PI/n],{chart:t.chart,dataIndex:e,dataset:a,datasetIndex:t.index},e)}});P._set("pie",m.clone(P.doughnut)),P._set("pie",{cutoutPercentage:0});var Ra=gn,Ce=m.valueOrDefault;P._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var La=X.extend({datasetElementType:K.Line,dataElementType:K.Point,linkScales:m.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var u,l,t=this,n=t.getMeta(),a=n.dataset,r=n.data||[],o=t.chart.scale,s=t._config;for(void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),a._scale=o,a._datasetIndex=t.index,a._children=r,a._loop=!0,a._model=t._resolveDatasetElementOptions(a),a.pivot(),u=0,l=r.length;u<l;++u)t.updateElement(r[u],u,e);for(t.updateBezierControlPoints(),u=0,l=r.length;u<l;++u)r[u].pivot()},updateElement:function(e,t,n){var a=this,r=e.custom||{},o=a.getDataset(),s=a.chart.scale,u=s.getPointPositionForValue(t,o.data[t]),l=a._resolveDataElementOptions(e,t),d=a.getMeta().dataset._model,f=n?s.xCenter:u.x,h=n?s.yCenter:u.y;e._scale=s,e._options=l,e._datasetIndex=a.index,e._index=t,e._model={x:f,y:h,skip:r.skip||isNaN(f)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ce(r.tension,d?d.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,n=e.chart.options,a=X.prototype._resolveDatasetElementOptions.apply(e,arguments);return a.spanGaps=Ce(t.spanGaps,n.spanGaps),a.tension=Ce(t.lineTension,n.elements.line.tension),a},updateBezierControlPoints:function(){var r,o,s,u,t=this.getMeta(),n=this.chart.chartArea,a=t.data||[];function l(d,f,h){return Math.max(Math.min(d,h),f)}for(t.dataset._model.spanGaps&&(a=a.filter(function(d){return!d._model.skip})),r=0,o=a.length;r<o;++r)s=a[r]._model,u=m.splineCurve(m.previousItem(a,r,!0)._model,s,m.nextItem(a,r,!0)._model,s.tension),s.controlPointPreviousX=l(u.previous.x,n.left,n.right),s.controlPointPreviousY=l(u.previous.y,n.top,n.bottom),s.controlPointNextX=l(u.next.x,n.left,n.right),s.controlPointNextY=l(u.next.y,n.top,n.bottom)},setHoverStyle:function(e){var t=e._model,n=e._options,a=m.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ce(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=Ce(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=Ce(n.hoverBorderWidth,n.borderWidth),t.radius=Ce(n.hoverRadius,n.radius)}});P._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),P._set("global",{datasets:{scatter:{showLine:!1}}});var pn={bar:hn,bubble:Pa,doughnut:gn,horizontalBar:Aa,line:vn,polarArea:Za,pie:Ra,radar:La,scatter:vn};function ye(e,t){return e.native?{x:e.x,y:e.y}:m.getRelativePosition(e,t)}function Ue(e,t){var a,r,o,s,u,l,n=e._getSortedVisibleDatasetMetas();for(r=0,s=n.length;r<s;++r)for(o=0,u=(a=n[r].data).length;o<u;++o)(l=a[o])._view.skip||t(l)}function kt(e,t){var n=[];return Ue(e,function(a){a.inRange(t.x,t.y)&&n.push(a)}),n}function It(e,t,n,a){var r=Number.POSITIVE_INFINITY,o=[];return Ue(e,function(s){if(!n||s.inRange(t.x,t.y)){var u=s.getCenterPoint(),l=a(t,u);l<r?(o=[s],r=l):l===r&&o.push(s)}}),o}function Pt(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(a,r){var o=t?Math.abs(a.x-r.x):0,s=n?Math.abs(a.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function At(e,t,n){var a=ye(t,e);n.axis=n.axis||"x";var r=Pt(n.axis),o=n.intersect?kt(e,a):It(e,a,!1,r),s=[];return o.length?(e._getSortedVisibleDatasetMetas().forEach(function(u){var l=u.data[o[0]._index];l&&!l._view.skip&&s.push(l)}),s):[]}var Ie={modes:{single:function(e,t){var n=ye(t,e),a=[];return Ue(e,function(r){if(r.inRange(n.x,n.y))return a.push(r),a}),a.slice(0,1)},label:At,index:At,dataset:function(e,t,n){var a=ye(t,e);n.axis=n.axis||"xy";var r=Pt(n.axis),o=n.intersect?kt(e,a):It(e,a,!1,r);return o.length>0&&(o=e.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(e,t){return At(e,t,{intersect:!1})},point:function(e,t){return kt(e,ye(t,e))},nearest:function(e,t,n){var a=ye(t,e);n.axis=n.axis||"xy";var r=Pt(n.axis);return It(e,a,n.intersect,r)},x:function(e,t,n){var a=ye(t,e),r=[],o=!1;return Ue(e,function(s){s.inXRange(a.x)&&r.push(s),s.inRange(a.x,a.y)&&(o=!0)}),n.intersect&&!o&&(r=[]),r},y:function(e,t,n){var a=ye(t,e),r=[],o=!1;return Ue(e,function(s){s.inYRange(a.y)&&r.push(s),s.inRange(a.x,a.y)&&(o=!0)}),n.intersect&&!o&&(r=[]),r}}},Ot=m.extend;function Ye(e,t){return m.where(e,function(n){return n.pos===t})}function ut(e,t){return e.sort(function(n,a){var r=t?a:n,o=t?n:a;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function We(e,t,n,a){return Math.max(e[n],t[n])+Math.max(e[a],t[a])}function za(e,t,n){var o,s,a=n.box,r=e.maxPadding;if(n.size&&(e[n.pos]-=n.size),n.size=n.horizontal?a.height:a.width,e[n.pos]+=n.size,a.getPadding){var u=a.getPadding();r.top=Math.max(r.top,u.top),r.left=Math.max(r.left,u.left),r.bottom=Math.max(r.bottom,u.bottom),r.right=Math.max(r.right,u.right)}if(o=t.outerWidth-We(r,e,"left","right"),s=t.outerHeight-We(r,e,"top","bottom"),o!==e.w||s!==e.h){e.w=o,e.h=s;var l=n.horizontal?[o,e.w]:[s,e.h];return!(l[0]===l[1]||isNaN(l[0])&&isNaN(l[1]))}}function Ha(e,t){var n=t.maxPadding;return function a(r){var o={left:0,top:0,right:0,bottom:0};return r.forEach(function(s){o[s]=Math.max(t[s],n[s])}),o}(e?["left","right"]:["top","bottom"])}function ft(e,t,n){var r,o,s,u,l,d,a=[];for(r=0,o=e.length;r<o;++r)(u=(s=e[r]).box).update(s.width||t.w,s.height||t.h,Ha(s.horizontal,t)),za(t,n,s)&&(d=!0,a.length&&(l=!0)),u.fullWidth||a.push(s);return l&&ft(a,t,n)||d}function _n(e,t,n){var s,u,l,d,a=n.padding,r=t.x,o=t.y;for(s=0,u=e.length;s<u;++s)d=(l=e[s]).box,l.horizontal?(d.left=d.fullWidth?a.left:t.left,d.right=d.fullWidth?n.outerWidth-a.right:t.left+t.w,d.top=o,d.bottom=o+d.height,d.width=d.right-d.left,o=d.bottom):(d.left=r,d.right=r+d.width,d.top=t.top,d.bottom=t.top+t.h,d.height=d.bottom-d.top,r=d.right);t.x=r,t.y=o}P._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ae={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var s,a=["fullWidth","position","weight"],r=a.length,o=0;o<r;++o)n.hasOwnProperty(s=a[o])&&(t[s]=n[s])},update:function(e,t,n){if(e){var r=m.options.toPadding((e.options.layout||{}).padding),o=t-r.width,s=n-r.height,u=function dt(e){var t=function qa(e){var n,a,r,t=[];for(n=0,a=(e||[]).length;n<a;++n)t.push({index:n,box:r=e[n],pos:r.position,horizontal:r.isHorizontal(),weight:r.weight});return t}(e),n=ut(Ye(t,"left"),!0),a=ut(Ye(t,"right")),r=ut(Ye(t,"top"),!0),o=ut(Ye(t,"bottom"));return{leftAndTop:n.concat(r),rightAndBottom:a.concat(o),chartArea:Ye(t,"chartArea"),vertical:n.concat(a),horizontal:r.concat(o)}}(e.boxes),l=u.vertical,d=u.horizontal,f=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:o,vBoxMaxWidth:o/2/l.length,hBoxMaxHeight:s/2}),h=Ot({maxPadding:Ot({},r),w:o,h:s,x:r.left,y:r.top},r);(function Ba(e,t){var n,a,r;for(n=0,a=e.length;n<a;++n)(r=e[n]).width=r.horizontal?r.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,r.height=r.horizontal&&t.hBoxMaxHeight})(l.concat(d),f),ft(l,h,f),ft(d,h,f)&&ft(l,h,f),function Va(e){var t=e.maxPadding;function n(a){var r=Math.max(t[a]-e[a],0);return e[a]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(h),_n(u.leftAndTop,h,f),h.x+=h.w,h.y+=h.h,_n(u.rightAndBottom,h,f),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h},m.each(u.chartArea,function(p){var _=p.box;Ot(_,e.chartArea),_.update(h.w,h.h)})}}},ja=function zt(e){return e&&e.default||e}(Object.freeze({__proto__:null,default:"/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n"})),J="$chartjs",Dt="chartjs-",Ft=Dt+"size-monitor",bn=Dt+"render-monitor",xn=["animationstart","webkitAnimationStart"],Ja={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function Cn(e,t){var n=m.getStyle(e,t),a=n&&n.match(/^(\d+)(\.\d+)?px$/);return a?Number(a[1]):void 0}var yn=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch{}return e}()&&{passive:!0};function je(e,t,n){e.addEventListener(t,n,yn)}function Et(e,t,n){e.removeEventListener(t,n,yn)}function Zt(e,t,n,a,r){return{type:e,chart:t,native:r||null,x:void 0!==n?n:null,y:void 0!==a?a:null}}function Qe(e){var t=document.createElement("div");return t.className=e||"",t}function ar(e,t,n){var a=e[J]||(e[J]={}),r=a.resizer=function er(e){var t=1e6,n=Qe(Ft),a=Qe(Ft+"-expand"),r=Qe(Ft+"-shrink");a.appendChild(Qe()),r.appendChild(Qe()),n.appendChild(a),n.appendChild(r),n._reset=function(){a.scrollLeft=t,a.scrollTop=t,r.scrollLeft=t,r.scrollTop=t};var o=function(){n._reset(),e()};return je(a,"scroll",o.bind(a,"expand")),je(r,"scroll",o.bind(r,"shrink")),n}(function Xa(e,t){var n=!1,a=[];return function(){a=Array.prototype.slice.call(arguments),t=t||this,n||(n=!0,m.requestAnimFrame.call(window,function(){n=!1,e.apply(t,a)}))}}(function(){if(a.resizer){var o=n.options.maintainAspectRatio&&e.parentNode,s=o?o.clientWidth:0;t(Zt("resize",n)),o&&o.clientWidth<s&&n.canvas&&t(Zt("resize",n))}}));!function tr(e,t){var n=e[J]||(e[J]={}),a=n.renderProxy=function(r){"chartjs-render-animation"===r.animationName&&t()};m.each(xn,function(r){je(e,r,a)}),n.reflow=!!e.offsetParent,e.classList.add(bn)}(e,function(){if(a.resizer){var o=e.parentNode;o&&o!==r.parentNode&&o.insertBefore(r,o.firstChild),r._reset()}})}function rr(e){var t=e[J]||{},n=t.resizer;delete t.resizer,function nr(e){var t=e[J]||{},n=t.renderProxy;n&&(m.each(xn,function(a){Et(e,a,n)}),delete t.renderProxy),e.classList.remove(bn)}(e),n&&n.parentNode&&n.parentNode.removeChild(n)}var Mn={disableCSSInjection:!1,_enabled:typeof window<"u"&&typeof document<"u",_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;!function ir(e,t){var n=e[J]||(e[J]={});if(!n.containsStyles){n.containsStyles=!0,t="/* Chart.js */\n"+t;var a=document.createElement("style");a.setAttribute("type","text/css"),a.appendChild(document.createTextNode(t)),e.appendChild(a)}}(t.host?t:document.head,ja)}},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(this._ensureLoaded(e),function $a(e,t){var n=e.style,a=e.getAttribute("height"),r=e.getAttribute("width");if(e[J]={initial:{height:a,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===r||""===r){var o=Cn(e,"width");void 0!==o&&(e.width=o)}if(null===a||""===a)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var s=Cn(e,"height");void 0!==o&&(e.height=s)}return e}(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t[J]){var n=t[J].initial;["height","width"].forEach(function(a){var r=n[a];m.isNullOrUndef(r)?t.removeAttribute(a):t.setAttribute(a,r)}),m.each(n.style||{},function(a,r){t.style[r]=a}),t.width=t.width,delete t[J]}},addEventListener:function(e,t,n){var a=e.canvas;if("resize"!==t){var r=n[J]||(n[J]={});je(a,t,(r.proxies||(r.proxies={}))[e.id+"_"+t]=function(u){n(function Ka(e,t){var n=Ja[e.type]||e.type,a=m.getRelativePosition(e,t);return Zt(n,t,a.x,a.y,e)}(u,e))})}else ar(a,n,e)},removeEventListener:function(e,t,n){var a=e.canvas;if("resize"!==t){var s=((n[J]||{}).proxies||{})[e.id+"_"+t];!s||Et(a,t,s)}else rr(a)}};m.addEvent=je,m.removeEvent=Et;var Pe=m.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Mn._enabled?Mn:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}});P._set("global",{plugins:{}});var B={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(n){-1===t.indexOf(n)&&t.push(n)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(n){var a=t.indexOf(n);-1!==a&&t.splice(a,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var o,s,u,l,d,a=this.descriptors(e),r=a.length;for(o=0;o<r;++o)if("function"==typeof(d=(u=(s=a[o]).plugin)[t])&&((l=[e].concat(n||[])).push(s.options),!1===d.apply(u,l)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],a=[],r=e&&e.config||{},o=r.options&&r.options.plugins||{};return this._plugins.concat(r.plugins||[]).forEach(function(s){if(-1===n.indexOf(s)){var l=s.id,d=o[l];!1!==d&&(!0===d&&(d=m.clone(P.global.plugins[l])),n.push(s),a.push({plugin:s,options:d||{}}))}}),t.descriptors=a,t.id=this._cacheId,a},_invalidate:function(e){delete e.$plugins}},Je={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=m.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?m.merge(Object.create(null),[P.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var n=this;n.defaults.hasOwnProperty(e)&&(n.defaults[e]=m.extend(n.defaults[e],t))},addScalesToLayout:function(e){m.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,ae.addBox(e,t)})}},ve=m.valueOrDefault,g=m.rtl.getRtlAdapter;P._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:m.noop,title:function(e,t){var n="",a=t.labels,r=a?a.length:0;if(e.length>0){var o=e[0];o.label?n=o.label:o.xLabel?n=o.xLabel:r>0&&o.index<r&&(n=a[o.index])}return n},afterTitle:m.noop,beforeBody:m.noop,beforeLabel:m.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),m.isNullOrUndef(e.value)?n+=e.yLabel:n+=e.value,n},labelColor:function(e,t){var r=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:r.borderColor,backgroundColor:r.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:m.noop,afterBody:m.noop,beforeFooter:m.noop,footer:m.noop,afterFooter:m.noop}}});var C={average:function(e){if(!e.length)return!1;var t,n,a=0,r=0,o=0;for(t=0,n=e.length;t<n;++t){var s=e[t];if(s&&s.hasValue()){var u=s.tooltipPosition();a+=u.x,r+=u.y,++o}}return{x:a/o,y:r/o}},nearest:function(e,t){var o,s,u,n=t.x,a=t.y,r=Number.POSITIVE_INFINITY;for(o=0,s=e.length;o<s;++o){var l=e[o];if(l&&l.hasValue()){var d=l.getCenterPoint(),f=m.distanceBetweenPoints(t,d);f<r&&(r=f,u=l)}}if(u){var h=u.tooltipPosition();n=h.x,a=h.y}return{x:n,y:a}}};function c(e,t){return t&&(m.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function v(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function M(e){var t=e._xScale,n=e._yScale||e._scale,a=e._index,r=e._datasetIndex,o=e._chart.getDatasetMeta(r).controller,s=o._getIndexScale(),u=o._getValueScale();return{xLabel:t?t.getLabelForIndex(a,r):"",yLabel:n?n.getLabelForIndex(a,r):"",label:s?""+s.getLabelForIndex(a,r):"",value:u?""+u.getLabelForIndex(a,r):"",index:a,datasetIndex:r,x:e._model.x,y:e._model.y}}function w(e){var t=P.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:ve(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:ve(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:ve(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:ve(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:ve(e.titleFontStyle,t.defaultFontStyle),titleFontSize:ve(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:ve(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:ve(e.footerFontStyle,t.defaultFontStyle),footerFontSize:ve(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function pe(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Ae(e){return c([],v(e))}var or=de.extend({initialize:function(){this._model=w(this._options),this._lastActive=[]},getTitle:function(){var e=this,n=e._options.callbacks,a=n.beforeTitle.apply(e,arguments),r=n.title.apply(e,arguments),o=n.afterTitle.apply(e,arguments),s=[];return s=c(s,v(a)),s=c(s,v(r)),c(s,v(o))},getBeforeBody:function(){return Ae(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var n=this,a=n._options.callbacks,r=[];return m.each(e,function(o){var s={before:[],lines:[],after:[]};c(s.before,v(a.beforeLabel.call(n,o,t))),c(s.lines,a.label.call(n,o,t)),c(s.after,v(a.afterLabel.call(n,o,t))),r.push(s)}),r},getAfterBody:function(){return Ae(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,n=t.beforeFooter.apply(e,arguments),a=t.footer.apply(e,arguments),r=t.afterFooter.apply(e,arguments),o=[];return o=c(o,v(n)),o=c(o,v(a)),c(o,v(r))},update:function(e){var h,p,t=this,n=t._options,a=t._model,r=t._model=w(n),o=t._active,s=t._data,u={xAlign:a.xAlign,yAlign:a.yAlign},l={x:a.x,y:a.y},d={width:a.width,height:a.height},f={x:a.caretX,y:a.caretY};if(o.length){r.opacity=1;var _=[],b=[];f=C[n.position].call(t,o,t._eventPosition);var x=[];for(h=0,p=o.length;h<p;++h)x.push(M(o[h]));n.filter&&(x=x.filter(function(y){return n.filter(y,s)})),n.itemSort&&(x=x.sort(function(y,T){return n.itemSort(y,T,s)})),m.each(x,function(y){_.push(n.callbacks.labelColor.call(t,y,t._chart)),b.push(n.callbacks.labelTextColor.call(t,y,t._chart))}),r.title=t.getTitle(x,s),r.beforeBody=t.getBeforeBody(x,s),r.body=t.getBody(x,s),r.afterBody=t.getAfterBody(x,s),r.footer=t.getFooter(x,s),r.x=f.x,r.y=f.y,r.caretPadding=n.caretPadding,r.labelColors=_,r.labelTextColors=b,r.dataPoints=x,l=function Me(e,t,n,a){var r=e.x,o=e.y,u=e.caretPadding,d=n.xAlign,f=n.yAlign,h=e.caretSize+u,p=e.cornerRadius+u;return"right"===d?r-=t.width:"center"===d&&((r-=t.width/2)+t.width>a.width&&(r=a.width-t.width),r<0&&(r=0)),"top"===f?o+=h:o-="bottom"===f?t.height+h:t.height/2,"center"===f?"left"===d?r+=h:"right"===d&&(r-=h):"left"===d?r-=p:"right"===d&&(r+=p),{x:r,y:o}}(r,d=function A(e,t){var n=e._chart.ctx,a=2*t.yPadding,r=0,o=t.body,s=o.reduce(function(b,x){return b+x.before.length+x.lines.length+x.after.length},0),u=t.title.length,l=t.footer.length,d=t.titleFontSize,f=t.bodyFontSize,h=t.footerFontSize;a+=u*d,a+=u?(u-1)*t.titleSpacing:0,a+=u?t.titleMarginBottom:0,a+=(s+=t.beforeBody.length+t.afterBody.length)*f,a+=s?(s-1)*t.bodySpacing:0,a+=l?t.footerMarginTop:0,a+=l*h,a+=l?(l-1)*t.footerSpacing:0;var p=0,_=function(b){r=Math.max(r,n.measureText(b).width+p)};return n.font=m.fontString(d,t._titleFontStyle,t._titleFontFamily),m.each(t.title,_),n.font=m.fontString(f,t._bodyFontStyle,t._bodyFontFamily),m.each(t.beforeBody.concat(t.afterBody),_),p=t.displayColors?f+2:0,m.each(o,function(b){m.each(b.before,_),m.each(b.lines,_),m.each(b.after,_)}),p=0,n.font=m.fontString(h,t._footerFontStyle,t._footerFontFamily),m.each(t.footer,_),{width:r+=2*t.xPadding,height:a}}(this,r),u=function z(e,t){var n=e._model,a=e._chart,r=e._chart.chartArea,o="center",s="center";n.y<t.height?s="top":n.y>a.height-t.height&&(s="bottom");var u,l,d,f,h,p=(r.left+r.right)/2,_=(r.top+r.bottom)/2;"center"===s?(u=function(x){return x<=p},l=function(x){return x>p}):(u=function(x){return x<=t.width/2},l=function(x){return x>=a.width-t.width/2}),d=function(x){return x+t.width+n.caretSize+n.caretPadding>a.width},f=function(x){return x-t.width-n.caretSize-n.caretPadding<0},h=function(x){return x<=_?"top":"bottom"},u(n.x)?(o="left",d(n.x)&&(o="center",s=h(n.y))):l(n.x)&&(o="right",f(n.x)&&(o="center",s=h(n.y)));var b=e._options;return{xAlign:b.xAlign?b.xAlign:o,yAlign:b.yAlign?b.yAlign:s}}(this,d),t._chart)}else r.opacity=0;return r.xAlign=u.xAlign,r.yAlign=u.yAlign,r.x=l.x,r.y=l.y,r.width=d.width,r.height=d.height,r.caretX=f.x,r.caretY=f.y,t._model=r,e&&n.custom&&n.custom.call(t,r),t},drawCaret:function(e,t){var n=this._chart.ctx,r=this.getCaretPosition(e,t,this._view);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)},getCaretPosition:function(e,t,n){var a,r,o,s,u,l,d=n.caretSize,f=n.cornerRadius,h=n.xAlign,p=n.yAlign,_=e.x,b=e.y,x=t.width,y=t.height;if("center"===p)u=b+y/2,"left"===h?(r=(a=_)-d,o=a,s=u+d,l=u-d):(r=(a=_+x)+d,o=a,s=u-d,l=u+d);else if("left"===h?(a=(r=_+f+d)-d,o=r+d):"right"===h?(a=(r=_+x-f-d)-d,o=r+d):(a=(r=n.caretX)-d,o=r+d),"top"===p)u=(s=b)-d,l=s;else{u=(s=b+y)+d,l=s;var T=o;o=a,a=T}return{x1:a,x2:r,x3:o,y1:s,y2:u,y3:l}},drawTitle:function(e,t,n){var o,s,u,a=t.title,r=a.length;if(r){var l=g(t.rtl,t.x,t.width);for(e.x=pe(t,t._titleAlign),n.textAlign=l.textAlign(t._titleAlign),n.textBaseline="middle",o=t.titleFontSize,s=t.titleSpacing,n.fillStyle=t.titleFontColor,n.font=m.fontString(o,t._titleFontStyle,t._titleFontFamily),u=0;u<r;++u)n.fillText(a[u],l.x(e.x),e.y+o/2),e.y+=o+s,u+1===r&&(e.y+=t.titleMarginBottom-s)}},drawBody:function(e,t,n){var p,_,b,x,y,T,S,k,a=t.bodyFontSize,r=t.bodySpacing,o=t._bodyAlign,s=t.body,u=t.displayColors,l=0,d=u?pe(t,"left"):0,f=g(t.rtl,t.x,t.width),h=function(q){n.fillText(q,f.x(e.x+l),e.y+a/2),e.y+=a+r},D=f.textAlign(o);for(n.textAlign=o,n.textBaseline="middle",n.font=m.fontString(a,t._bodyFontStyle,t._bodyFontFamily),e.x=pe(t,D),n.fillStyle=t.bodyFontColor,m.each(t.beforeBody,h),l=u&&"right"!==D?"center"===o?a/2+1:a+2:0,y=0,S=s.length;y<S;++y){for(p=s[y],b=t.labelColors[y],n.fillStyle=_=t.labelTextColors[y],m.each(p.before,h),T=0,k=(x=p.lines).length;T<k;++T){if(u){var O=f.x(d);n.fillStyle=t.legendColorBackground,n.fillRect(f.leftForLtr(O,a),e.y,a,a),n.lineWidth=1,n.strokeStyle=b.borderColor,n.strokeRect(f.leftForLtr(O,a),e.y,a,a),n.fillStyle=b.backgroundColor,n.fillRect(f.leftForLtr(f.xPlus(O,1),a-2),e.y+1,a-2,a-2),n.fillStyle=_}h(x[T])}m.each(p.after,h)}l=0,m.each(t.afterBody,h),e.y-=r},drawFooter:function(e,t,n){var o,s,a=t.footer,r=a.length;if(r){var u=g(t.rtl,t.x,t.width);for(e.x=pe(t,t._footerAlign),e.y+=t.footerMarginTop,n.textAlign=u.textAlign(t._footerAlign),n.textBaseline="middle",o=t.footerFontSize,n.fillStyle=t.footerFontColor,n.font=m.fontString(o,t._footerFontStyle,t._footerFontFamily),s=0;s<r;++s)n.fillText(a[s],u.x(e.x),e.y+o/2),e.y+=o+t.footerSpacing}},drawBackground:function(e,t,n,a){n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,n.lineWidth=t.borderWidth;var r=t.xAlign,o=t.yAlign,s=e.x,u=e.y,l=a.width,d=a.height,f=t.cornerRadius;n.beginPath(),n.moveTo(s+f,u),"top"===o&&this.drawCaret(e,a),n.lineTo(s+l-f,u),n.quadraticCurveTo(s+l,u,s+l,u+f),"center"===o&&"right"===r&&this.drawCaret(e,a),n.lineTo(s+l,u+d-f),n.quadraticCurveTo(s+l,u+d,s+l-f,u+d),"bottom"===o&&this.drawCaret(e,a),n.lineTo(s+f,u+d),n.quadraticCurveTo(s,u+d,s,u+d-f),"center"===o&&"left"===r&&this.drawCaret(e,a),n.lineTo(s,u+f),n.quadraticCurveTo(s,u,s+f,u),n.closePath(),n.fill(),t.borderWidth>0&&n.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},a={x:t.x,y:t.y},r=Math.abs(t.opacity<.001)?0:t.opacity;this._options.enabled&&(t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(a,t,e,n),a.y+=t.yPadding,m.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),m.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var a,t=this,n=t._options;return t._lastActive=t._lastActive||[],"mouseout"===e.type?t._active=[]:(t._active=t._chart.getElementsAtEventForMode(e,n.mode,n),n.reverse&&t._active.reverse()),(a=!m.arrayEquals(t._active,t._lastActive))&&(t._lastActive=t._active,(n.enabled||n.custom)&&(t._eventPosition={x:e.x,y:e.y},t.update(!0),t.pivot())),a}}),Rt=or;Rt.positioners=C;var Lt=m.valueOrDefault;function Ir(){return m.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,n,a){if("xAxes"===e||"yAxes"===e){var o,s,u,r=n[e].length;for(t[e]||(t[e]=[]),o=0;o<r;++o)s=Lt((u=n[e][o]).type,"xAxes"===e?"category":"linear"),o>=t[e].length&&t[e].push({}),m.merge(t[e][o],!t[e][o].type||u.type&&u.type!==t[e][o].type?[Je.getScaleDefaults(s),u]:u)}else m._merger(e,t,n,a)}})}function lr(){return m.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,n,a){var r=t[e]||Object.create(null),o=n[e];"scales"===e?t[e]=Ir(r,o):"scale"===e?t[e]=m.merge(r,[Je.getScaleDefaults(o.type),o]):m._merger(e,t,n,a)}})}function ti(e){var t=e.options;m.each(e.scales,function(n){ae.removeBox(e,n)}),t=lr(P.global,P[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Pr(e,t,n){var a,r=function(o){return o.id===a};do{a=t+n++}while(m.findIndex(e,r)>=0);return a}function Ar(e){return"top"===e||"bottom"===e}function Or(e,t){return function(n,a){return n[e]===a[e]?n[t]-a[t]:n[e]-a[e]}}P._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Oe=function(e,t){return this.construct(e,t),this};m.extend(Oe.prototype,{construct:function(e,t){var n=this;t=function ei(e){var t=(e=e||Object.create(null)).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=lr(P.global,P[e.type],e.options||{}),e}(t);var a=Pe.acquireContext(e,t),r=a&&a.canvas,o=r&&r.height,s=r&&r.width;n.id=m.uid(),n.ctx=a,n.canvas=r,n.config=t,n.width=s,n.height=o,n.aspectRatio=o?s/o:null,n.options=t.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Oe.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(u){n.config.data=u}}),a&&r?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return B.notify(e,"beforeInit"),m.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),B.notify(e,"afterInit"),e},clear:function(){return m.canvas.clear(this),this},stop:function(){return Tt.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,a=t.canvas,r=n.maintainAspectRatio&&t.aspectRatio||null,o=Math.max(0,Math.floor(m.getMaximumWidth(a))),s=Math.max(0,Math.floor(r?o/r:m.getMaximumHeight(a)));if((t.width!==o||t.height!==s)&&(a.width=t.width=o,a.height=t.height=s,a.style.width=o+"px",a.style.height=s+"px",m.retinaScale(t,n.devicePixelRatio),!e)){var u={width:o,height:s};B.notify(t,"resize",[u]),n.onResize&&n.onResize(t,u),t.stop(),t.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;m.each(t.xAxes,function(a,r){a.id||(a.id=Pr(t.xAxes,"x-axis-",r))}),m.each(t.yAxes,function(a,r){a.id||(a.id=Pr(t.yAxes,"y-axis-",r))}),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,n=e.scales||{},a=[],r=Object.keys(n).reduce(function(o,s){return o[s]=!1,o},{});t.scales&&(a=a.concat((t.scales.xAxes||[]).map(function(o){return{options:o,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(o){return{options:o,dtype:"linear",dposition:"left"}}))),t.scale&&a.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),m.each(a,function(o){var s=o.options,u=s.id,l=Lt(s.type,o.dtype);Ar(s.position)!==Ar(o.dposition)&&(s.position=o.dposition),r[u]=!0;var d=null;if(u in n&&n[u].type===l)(d=n[u]).options=s,d.ctx=e.ctx,d.chart=e;else{var f=Je.getScaleConstructor(l);if(!f)return;d=new f({id:u,type:l,options:s,ctx:e.ctx,chart:e}),n[d.id]=d}d.mergeTicksOptions(),o.isDefault&&(e.scale=d)}),m.each(r,function(o,s){o||delete n[s]}),e.scales=n,Je.addScalesToLayout(this)},buildOrUpdateControllers:function(){var a,r,e=this,t=[],n=e.data.datasets;for(a=0,r=n.length;a<r;a++){var o=n[a],s=e.getDatasetMeta(a),u=o.type||e.config.type;if(s.type&&s.type!==u&&(e.destroyDatasetMeta(a),s=e.getDatasetMeta(a)),s.type=u,s.order=o.order||0,s.index=a,s.controller)s.controller.updateIndex(a),s.controller.linkScales();else{var l=pn[s.type];if(void 0===l)throw new Error('"'+s.type+'" is not a chart type.');s.controller=new l(e,a),t.push(s.controller)}}return t},resetElements:function(){var e=this;m.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var n,a,t=this;if((!e||"object"!=typeof e)&&(e={duration:e,lazy:arguments[1]}),ti(t),B._invalidate(t),!1!==B.notify(t,"beforeUpdate")){t.tooltip._data=t.data;var r=t.buildOrUpdateControllers();for(n=0,a=t.data.datasets.length;n<a;n++)t.getDatasetMeta(n).controller.buildOrUpdateElements();t.updateLayout(),t.options.animation&&t.options.animation.duration&&m.each(r,function(o){o.reset()}),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],B.notify(t,"afterUpdate"),t._layers.sort(Or("z","_idx")),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){var e=this;!1!==B.notify(e,"beforeLayout")&&(ae.update(this,this.width,this.height),e._layers=[],m.each(e.boxes,function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())},e),e._layers.forEach(function(t,n){t._idx=n}),B.notify(e,"afterScaleUpdate"),B.notify(e,"afterLayout"))},updateDatasets:function(){var e=this;if(!1!==B.notify(e,"beforeDatasetsUpdate")){for(var t=0,n=e.data.datasets.length;t<n;++t)e.updateDataset(t);B.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,n=t.getDatasetMeta(e),a={meta:n,index:e};!1!==B.notify(t,"beforeDatasetUpdate",[a])&&(n.controller._update(),B.notify(t,"afterDatasetUpdate",[a]))},render:function(e){var t=this;(!e||"object"!=typeof e)&&(e={duration:e,lazy:arguments[1]});var n=t.options.animation,a=Lt(e.duration,n&&n.duration),r=e.lazy;if(!1!==B.notify(t,"beforeRender")){var o=function(u){B.notify(t,"afterRender"),m.callback(n&&n.onComplete,[u],t)};if(n&&a){var s=new Mt({numSteps:a/16.66,easing:e.easing||n.easing,render:function(u,l){var f=l.currentStep,h=f/l.numSteps;u.draw((0,m.easing.effects[l.easing])(h),h,f)},onAnimationProgress:n.onProgress,onAnimationComplete:o});Tt.addAnimation(t,s,a,r)}else t.draw(),o(new Mt({numSteps:0,chart:t}));return t}},draw:function(e){var n,a,t=this;if(t.clear(),m.isNullOrUndef(e)&&(e=1),t.transition(e),!(t.width<=0||t.height<=0)&&!1!==B.notify(t,"beforeDraw",[e])){for(a=t._layers,n=0;n<a.length&&a[n].z<=0;++n)a[n].draw(t.chartArea);for(t.drawDatasets(e);n<a.length;++n)a[n].draw(t.chartArea);t._drawTooltip(e),B.notify(t,"afterDraw",[e])}},transition:function(e){for(var t=this,n=0,a=(t.data.datasets||[]).length;n<a;++n)t.isDatasetVisible(n)&&t.getDatasetMeta(n).controller.transition(e);t.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var r,o,t=this,a=[];for(r=0,o=(t.data.datasets||[]).length;r<o;++r)(!e||t.isDatasetVisible(r))&&a.push(t.getDatasetMeta(r));return a.sort(Or("order","index")),a},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var n,a,t=this;if(!1!==B.notify(t,"beforeDatasetsDraw",[e])){for(a=(n=t._getSortedVisibleDatasetMetas()).length-1;a>=0;--a)t.drawDataset(n[a],e);B.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var a={meta:e,index:e.index,easingValue:t};!1!==B.notify(this,"beforeDatasetDraw",[a])&&(e.controller.draw(t),B.notify(this,"afterDatasetDraw",[a]))},_drawTooltip:function(e){var t=this,n=t.tooltip,a={tooltip:n,easingValue:e};!1!==B.notify(t,"beforeTooltipDraw",[a])&&(n.draw(),B.notify(t,"afterTooltipDraw",[a]))},getElementAtEvent:function(e){return Ie.modes.single(this,e)},getElementsAtEvent:function(e){return Ie.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return Ie.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var a=Ie.modes[t];return"function"==typeof a?a(this,e,n):[]},getDatasetAtEvent:function(e){return Ie.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,n=t.data.datasets[e];n._meta||(n._meta={});var a=n._meta[t.id];return a||(a=n._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n.order||0,index:e}),a},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],a=n._meta&&n._meta[t];a&&(a.controller.destroy(),delete n._meta[t])},destroy:function(){var n,a,e=this,t=e.canvas;for(e.stop(),n=0,a=e.data.datasets.length;n<a;++n)e.destroyDatasetMeta(n);t&&(e.unbindEvents(),m.canvas.clear(e),Pe.releaseContext(e.ctx),e.canvas=null,e.ctx=null),B.notify(e,"destroy"),delete Oe.instances[e.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Rt({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};m.each(e.options.events,function(a){Pe.addEventListener(e,a,n),t[a]=n}),e.options.responsive&&(n=function(){e.resize()},Pe.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;!t||(delete e._listeners,m.each(t,function(n,a){Pe.removeEventListener(e,a,n)}))},updateHoverStyle:function(e,t,n){var r,o,s,a=n?"set":"remove";for(o=0,s=e.length;o<s;++o)(r=e[o])&&this.getDatasetMeta(r._datasetIndex).controller[a+"HoverStyle"](r);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+a+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==B.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var a=t.handleEvent(e);n&&(a=n._start?n.handleEvent(e):a|n.handleEvent(e)),B.notify(t,"afterEvent",[e]);var r=t._bufferedRequest;return r?t.render(r):a&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var r,t=this,n=t.options||{},a=n.hover;return t.lastActive=t.lastActive||[],t.active="mouseout"===e.type?[]:t.getElementsAtEventForMode(e,a.mode,a),m.callback(n.onHover||n.hover.onHover,[e.native,t.active],t),("mouseup"===e.type||"click"===e.type)&&n.onClick&&n.onClick.call(t,e.native,t.active),t.lastActive.length&&t.updateHoverStyle(t.lastActive,a.mode,!1),t.active.length&&a.mode&&t.updateHoverStyle(t.active,a.mode,!0),r=!m.arrayEquals(t.active,t.lastActive),t.lastActive=t.active,r}}),Oe.instances={};var F=Oe;Oe.Controller=Oe,Oe.types={},m.configMerge=lr,m.scaleMerge=Ir;function $e(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Tn(e){this.options=e||{}}m.extend(Tn.prototype,{formats:$e,parse:$e,format:$e,add:$e,diff:$e,startOf:$e,endOf:$e,_create:function(e){return e}}),Tn.override=function(e){m.extend(Tn.prototype,e)};var cr={_date:Tn},Nt={formatters:{values:function(e){return m.isArray(e)?e:""+e},linear:function(e,t,n){var a=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(a)>1&&e!==Math.floor(e)&&(a=e-Math.floor(e));var r=m.log10(Math.abs(a)),o="";if(0!==e)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var u=m.log10(Math.abs(e)),l=Math.floor(u)-Math.floor(r);l=Math.max(Math.min(l,20),0),o=e.toExponential(l)}else{var d=-1*Math.floor(r);d=Math.max(Math.min(d,20),0),o=e.toFixed(d)}else o="0";return o},logarithmic:function(e,t,n){var a=e/Math.pow(10,Math.floor(m.log10(e)));return 0===e?"0":1===a||2===a||5===a||0===t||t===n.length-1?e.toExponential():""}}},Ge=m.isArray,qt=m.isNullOrUndef,Ke=m.valueOrDefault,ht=m.valueAtIndexOrDefault;function ii(e,t,n){var d,a=e.getTicks().length,r=Math.min(t,a-1),o=e.getPixelForTick(r),s=e._startPixel,u=e._endPixel,l=1e-6;if(!(n&&(d=1===a?Math.max(o-s,u-o):0===t?(e.getPixelForTick(1)-o)/2:(o-e.getPixelForTick(r-1))/2,o+=r<t?d:-d,o<s-l||o>u+l)))return o}function si(e,t,n,a){var f,h,p,_,b,x,y,T,S,k,D,O,q,r=n.length,o=[],s=[],u=[],l=0,d=0;for(f=0;f<r;++f){if(_=n[f].label,e.font=x=(b=n[f].major?t.major:t.minor).string,y=a[x]=a[x]||{data:{},gc:[]},T=b.lineHeight,S=k=0,qt(_)||Ge(_)){if(Ge(_))for(h=0,p=_.length;h<p;++h)!qt(D=_[h])&&!Ge(D)&&(S=m.measureText(e,y.data,y.gc,S,D),k+=T)}else S=m.measureText(e,y.data,y.gc,S,_),k=T;o.push(S),s.push(k),u.push(T/2),l=Math.max(S,l),d=Math.max(k,d)}function L(V){return{width:o[V]||0,height:s[V]||0,offset:u[V]||0}}return function oi(e,t){m.each(e,function(n){var o,a=n.gc,r=a.length/2;if(r>t){for(o=0;o<r;++o)delete n.data[a[o]];a.splice(0,r)}})}(a,r),O=o.indexOf(l),q=s.indexOf(d),{first:L(0),last:L(r-1),widest:L(O),highest:L(q)}}function Bt(e){return e.drawTicks?e.tickMarkLength:0}function ur(e){var t,n;return e.display?(t=m.options._parseFont(e),n=m.options.toPadding(e.padding),t.lineHeight+n.height):0}function Dr(e,t){return m.extend(m.options._parseFont({fontFamily:Ke(t.fontFamily,e.fontFamily),fontSize:Ke(t.fontSize,e.fontSize),fontStyle:Ke(t.fontStyle,e.fontStyle),lineHeight:Ke(t.lineHeight,e.lineHeight)}),{color:m.options.resolve([t.fontColor,e.fontColor,P.global.defaultFontColor])})}function dr(e){var t=Dr(e,e.minor);return{minor:t,major:e.major.enabled?Dr(e,e.major):t}}function fr(e){var n,a,r,t=[];for(a=0,r=e.length;a<r;++a)typeof(n=e[a])._index<"u"&&t.push(n);return t}function wn(e,t,n,a){var u,l,d,f,r=Ke(n,0),o=Math.min(Ke(a,e.length),e.length),s=0;for(t=Math.ceil(t),a&&(t=(u=a-n)/Math.floor(u/t)),f=r;f<0;)s++,f=Math.round(r+s*t);for(l=Math.max(r,0);l<o;l++)d=e[l],l===f?(d._index=l,s++,f=Math.round(r+s*t)):delete d.label}P._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Nt.formatters.values,minor:{},major:{}}});var hr=de.extend({zeroLineIndex:0,getPadding:function(){var e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){m.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var s,u,l,d,f,a=this,r=a.options.ticks,o=r.sampleSize;if(a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=m.extend({left:0,right:0,top:0,bottom:0},n),a._ticks=null,a.ticks=null,a._labelSizes=null,a._maxLabelLines=0,a.longestLabelWidth=0,a.longestTextCache=a.longestTextCache||{},a._gridLineItems=null,a._labelItems=null,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeDataLimits(),a.determineDataLimits(),a.afterDataLimits(),a.beforeBuildTicks(),d=a.buildTicks()||[],(!(d=a.afterBuildTicks(d)||d)||!d.length)&&a.ticks)for(d=[],s=0,u=a.ticks.length;s<u;++s)d.push({value:a.ticks[s],major:!1});return a._ticks=d,l=a._convertTicksToLabels((f=o<d.length)?function ri(e,t){for(var n=[],a=e.length/t,r=0,o=e.length;r<o;r+=a)n.push(e[Math.floor(r)]);return n}(d,o):d),a._configure(),a.beforeCalculateTickRotation(),a.calculateTickRotation(),a.afterCalculateTickRotation(),a.beforeFit(),a.fit(),a.afterFit(),a._ticksToDraw=r.display&&(r.autoSkip||"auto"===r.source)?a._autoSkip(d):d,f&&(l=a._convertTicksToLabels(a._ticksToDraw)),a.ticks=l,a.afterUpdate(),a.minSize},_configure:function(){var n,a,e=this,t=e.options.ticks.reverse;e.isHorizontal()?(n=e.left,a=e.right):(n=e.top,a=e.bottom,t=!t),e._startPixel=n,e._endPixel=a,e._reversePixels=t,e._length=a-n},afterUpdate:function(){m.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){m.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){m.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){m.callback(this.options.beforeDataLimits,[this])},determineDataLimits:m.noop,afterDataLimits:function(){m.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){m.callback(this.options.beforeBuildTicks,[this])},buildTicks:m.noop,afterBuildTicks:function(e){var t=this;return Ge(e)&&e.length?m.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=m.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){m.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this,t=e.options.ticks;e.ticks=e.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){m.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){m.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var u,l,d,f,h,p,_,e=this,t=e.options,n=t.ticks,a=e.getTicks().length,r=n.minRotation||0,o=n.maxRotation,s=r;!e._isVisible()||!n.display||r>=o||a<=1||!e.isHorizontal()?e.labelRotation=r:(l=(u=e._getLabelSizes()).widest.width,d=u.highest.height-u.highest.offset,f=Math.min(e.maxWidth,e.chart.width-l),l+6>(h=t.offset?e.maxWidth/a:f/(a-1))&&(h=f/(a-(t.offset?.5:1)),p=e.maxHeight-Bt(t.gridLines)-n.padding-ur(t.scaleLabel),_=Math.sqrt(l*l+d*d),s=m.toDegrees(Math.min(Math.asin(Math.min((u.highest.height+6)/h,1)),Math.asin(Math.min(p/_,1))-Math.asin(d/_))),s=Math.max(r,Math.min(o,s))),e.labelRotation=s)},afterCalculateTickRotation:function(){m.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){m.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},n=e.chart,a=e.options,r=a.ticks,o=a.scaleLabel,s=a.gridLines,u=e._isVisible(),l="bottom"===a.position,d=e.isHorizontal();if(d?t.width=e.maxWidth:u&&(t.width=Bt(s)+ur(o)),d?u&&(t.height=Bt(s)+ur(o)):t.height=e.maxHeight,r.display&&u){var f=dr(r),h=e._getLabelSizes(),p=h.first,_=h.last,b=h.widest,x=h.highest,y=.4*f.minor.lineHeight,T=r.padding;if(d){var S=0!==e.labelRotation,k=m.toRadians(e.labelRotation),D=Math.cos(k),O=Math.sin(k);t.height=Math.min(e.maxHeight,t.height+(O*b.width+D*(x.height-(S?x.offset:0))+(S?0:y))+T);var H,Q,L=e.getPixelForTick(0)-e.left,V=e.right-e.getPixelForTick(e.getTicks().length-1);S?(H=l?D*p.width+O*p.offset:O*(p.height-p.offset),Q=l?O*(_.height-_.offset):D*_.width+O*_.offset):(H=p.width/2,Q=_.width/2),e.paddingLeft=Math.max((H-L)*e.width/(e.width-L),0)+3,e.paddingRight=Math.max((Q-V)*e.width/(e.width-V),0)+3}else t.width=Math.min(e.maxWidth,t.width+(r.mirror?0:b.width+T+y)),e.paddingTop=p.height/2,e.paddingBottom=_.height/2}e.handleMargins(),d?(e.width=e._length=n.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=n.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){m.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(qt(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var n,a,r,t=this;for(t.ticks=e.map(function(o){return o.value}),t.beforeTickToLabelConversion(),n=t.convertTicksToLabels(e)||t.ticks,t.afterTickToLabelConversion(),a=0,r=e.length;a<r;++a)e[a].label=n[a];return n},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=si(e.ctx,dr(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,n,a,r;return Ge(e)?(t=+this.getRightValue(e[0]),n=+this.getRightValue(e[1]),a=Math.min(t,n),r=Math.max(t,n)):(t=void 0,n=e=+this.getRightValue(e),a=e,r=e),{min:a,max:r,start:t,end:n}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:m.noop,getPixelForValue:m.noop,getValueForPixel:m.noop,getPixelForTick:function(e){var t=this,n=t.options.offset,a=t._ticks.length,r=1/Math.max(a-(n?0:1),1);return e<0||e>a-1?null:t.getPixelForDecimal(e*r+(n?r/2:0))},getPixelForDecimal:function(e){var t=this;return t._reversePixels&&(e=1-e),t._startPixel+e*t._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this,t=e.min,n=e.max;return e.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0},_autoSkip:function(e){var d,f,h,p,t=this,n=t.options.ticks,a=t._length,r=n.maxTicksLimit||a/t._tickSize()+1,o=n.major.enabled?function ui(e){var n,a,t=[];for(n=0,a=e.length;n<a;n++)e[n].major&&t.push(n);return t}(e):[],s=o.length,u=o[0],l=o[s-1];if(s>r)return function di(e,t,n){var o,s,a=0,r=t[0];for(n=Math.ceil(n),o=0;o<e.length;o++)s=e[o],o===r?(s._index=o,r=t[++a*n]):delete s.label}(e,o,s/r),fr(e);if(h=function ci(e,t,n,a){var s,u,l,d,r=function li(e){var n,a,t=e.length;if(t<2)return!1;for(a=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==a)return!1;return a}(e),o=(t.length-1)/a;if(!r)return Math.max(o,1);for(l=0,d=(s=m.math._factorize(r)).length-1;l<d;l++)if((u=s[l])>o)return u;return Math.max(o,1)}(o,e,0,r),s>0){for(d=0,f=s-1;d<f;d++)wn(e,h,o[d],o[d+1]);return wn(e,h,m.isNullOrUndef(p=s>1?(l-u)/(s-1):null)?0:u-p,u),wn(e,h,l,m.isNullOrUndef(p)?e.length:l+p),fr(e)}return wn(e,h),fr(e)},_tickSize:function(){var e=this,t=e.options.ticks,n=m.toRadians(e.labelRotation),a=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),o=e._getLabelSizes(),s=t.autoSkipPadding||0,u=o?o.widest.width+s:0,l=o?o.highest.height+s:0;return e.isHorizontal()?l*a>u*r?u/a:l/r:l*r<u*a?l/a:u/r},_isVisible:function(){var a,r,o,e=this,t=e.chart,n=e.options.display;if("auto"!==n)return!!n;for(a=0,r=t.data.datasets.length;a<r;++a)if(t.isDatasetVisible(a)&&((o=t.getDatasetMeta(a)).xAxisID===e.id||o.yAxisID===e.id))return!0;return!1},_computeGridLineItems:function(e){var y,T,S,k,D,O,q,L,V,H,Q,j,W,$,mt,vt,yr,t=this,n=t.chart,a=t.options,r=a.gridLines,o=a.position,s=r.offsetGridLines,u=t.isHorizontal(),l=t._ticksToDraw,d=l.length+(s?1:0),f=Bt(r),h=[],p=r.drawBorder?ht(r.lineWidth,0,0):0,_=p/2,b=m._alignPixel,x=function(uo){return b(n,uo,p)};for("top"===o?(y=x(t.bottom),q=t.bottom-f,V=y-_,Q=x(e.top)+_,W=e.bottom):"bottom"===o?(y=x(t.top),Q=e.top,W=x(e.bottom)-_,q=y+_,V=t.top+f):"left"===o?(y=x(t.right),O=t.right-f,L=y-_,H=x(e.left)+_,j=e.right):(y=x(t.left),H=e.left,j=x(e.right)-_,O=y+_,L=t.left+f),T=0;T<d;++T)!(qt((S=l[T]||{}).label)&&T<l.length)&&(T===t.zeroLineIndex&&a.offset===s?($=r.zeroLineWidth,mt=r.zeroLineColor,vt=r.zeroLineBorderDash||[],yr=r.zeroLineBorderDashOffset||0):($=ht(r.lineWidth,T,1),mt=ht(r.color,T,"rgba(0,0,0,0.1)"),vt=r.borderDash||[],yr=r.borderDashOffset||0),void 0!==(k=ii(t,S._index||T,s))&&(D=b(n,k,$),u?O=L=H=j=D:q=V=Q=W=D,h.push({tx1:O,ty1:q,tx2:L,ty2:V,x1:H,y1:Q,x2:j,y2:W,width:$,color:mt,borderDash:vt,borderDashOffset:yr})));return h.ticksLength=d,h.borderValue=y,h},_computeLabelItems:function(){var p,_,b,x,y,T,S,k,D,O,q,L,e=this,t=e.options,n=t.ticks,a=t.position,r=n.mirror,o=e.isHorizontal(),s=e._ticksToDraw,u=dr(n),l=n.padding,d=Bt(t.gridLines),f=-m.toRadians(e.labelRotation),h=[];for("top"===a?(T=e.bottom-d-l,S=f?"left":"center"):"bottom"===a?(T=e.top+d+l,S=f?"right":"center"):"left"===a?(y=e.right-(r?0:d)-l,S=r?"left":"right"):(y=e.left+(r?0:d)+l,S=r?"right":"left"),p=0,_=s.length;p<_;++p)!qt(x=(b=s[p]).label)&&(k=e.getPixelForTick(b._index||p)+n.labelOffset,O=(D=b.major?u.major:u.minor).lineHeight,q=Ge(x)?x.length:1,o?(y=k,L="top"===a?((f?1:.5)-q)*O:(f?0:.5)*O):(T=k,L=(1-q)*O/2),h.push({x:y,y:T,rotation:f,label:x,font:D,textOffset:L,textAlign:S}));return h},_drawGrid:function(e){var t=this,n=t.options.gridLines;if(n.display){var l,d,f,h,p,a=t.ctx,r=t.chart,o=m._alignPixel,s=n.drawBorder?ht(n.lineWidth,0,0):0,u=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(f=0,h=u.length;f<h;++f)d=(p=u[f]).color,(l=p.width)&&d&&(a.save(),a.lineWidth=l,a.strokeStyle=d,a.setLineDash&&(a.setLineDash(p.borderDash),a.lineDashOffset=p.borderDashOffset),a.beginPath(),n.drawTicks&&(a.moveTo(p.tx1,p.ty1),a.lineTo(p.tx2,p.ty2)),n.drawOnChartArea&&(a.moveTo(p.x1,p.y1),a.lineTo(p.x2,p.y2)),a.stroke(),a.restore());if(s){var y,T,S,k,_=s,b=ht(n.lineWidth,u.ticksLength-1,1),x=u.borderValue;t.isHorizontal()?(y=o(r,t.left,_)-_/2,T=o(r,t.right,b)+b/2,S=k=x):(S=o(r,t.top,_)-_/2,k=o(r,t.bottom,b)+b/2,y=T=x),a.lineWidth=s,a.strokeStyle=ht(n.color,0),a.beginPath(),a.moveTo(y,S),a.lineTo(T,k),a.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var r,o,s,u,l,d,f,h,n=e.ctx,a=e._labelItems||(e._labelItems=e._computeLabelItems());for(r=0,s=a.length;r<s;++r){if(d=(l=a[r]).font,n.save(),n.translate(l.x,l.y),n.rotate(l.rotation),n.font=d.string,n.fillStyle=d.color,n.textBaseline="middle",n.textAlign=l.textAlign,h=l.textOffset,Ge(f=l.label))for(o=0,u=f.length;o<u;++o)n.fillText(""+f[o],0,h),h+=d.lineHeight;else n.fillText(f,0,h);n.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,n=e.options,a=n.scaleLabel;if(a.display){var f,h,r=Ke(a.fontColor,P.global.defaultFontColor),o=m.options._parseFont(a),s=m.options.toPadding(a.padding),u=o.lineHeight/2,l=n.position,d=0;if(e.isHorizontal())f=e.left+e.width/2,h="bottom"===l?e.bottom-u-s.bottom:e.top+u+s.top;else{var p="left"===l;f=p?e.left+u+s.top:e.right-u-s.top,h=e.top+e.height/2,d=p?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(f,h),t.rotate(d),t.textAlign="center",t.textBaseline="middle",t.fillStyle=r,t.font=o.string,t.fillText(a.labelString,0,0),t.restore()}},draw:function(e){var t=this;!t._isVisible()||(t._drawGrid(e),t._drawTitle(),t._drawLabels())},_layers:function(){var e=this,t=e.options,n=t.ticks&&t.ticks.z||0,a=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&n!==a&&e.draw===e._draw?[{z:a,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:n,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:n,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,n=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter(function(a){return(!e||a.type===e)&&(n?a.xAxisID===t.id:a.yAxisID===t.id)})}});hr.prototype._draw=hr.prototype.draw;var re=hr,gr=m.isNullOrUndef,Fr=re.extend({determineDataLimits:function(){var u,e=this,t=e._getLabels(),n=e.options.ticks,a=n.min,r=n.max,o=0,s=t.length-1;void 0!==a&&(u=t.indexOf(a))>=0&&(o=u),void 0!==r&&(u=t.indexOf(r))>=0&&(s=u),e.minIndex=o,e.maxIndex=s,e.min=t[o],e.max=t[s]},buildTicks:function(){var e=this,t=e._getLabels(),n=e.minIndex,a=e.maxIndex;e.ticks=0===n&&a===t.length-1?t:t.slice(n,a+1)},getLabelForIndex:function(e,t){var n=this,a=n.chart;return a.getDatasetMeta(t).controller._getValueScaleId()===n.id?n.getRightValue(a.data.datasets[t].data[e]):n._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,n=e.ticks;re.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),n&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(n.length-(t?0:1),1))},getPixelForValue:function(e,t,n){var r,o,s,a=this;return!gr(t)&&!gr(n)&&(e=a.chart.data.datasets[n].data[t]),gr(e)||(r=a.isHorizontal()?e.x:e.y),(void 0!==r||void 0!==e&&isNaN(t))&&(o=a._getLabels(),e=m.valueOrDefault(r,e),t=-1!==(s=o.indexOf(e))?s:t,isNaN(t)&&(t=e)),a.getPixelForDecimal((t-a._startValue)/a._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=this,n=Math.round(t._startValue+t.getDecimalForPixel(e)*t._valueRange);return Math.min(Math.max(n,0),t.ticks.length-1)},getBasePixel:function(){return this.bottom}});Fr._defaults={position:"bottom"};var Xe=m.isNullOrUndef;var Sn=re.extend({getRightValue:function(e){return"string"==typeof e?+e:re.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,n=e.options.ticks;if(n.beginAtZero){var a=m.sign(e.min),r=m.sign(e.max);a<0&&r<0?e.max=0:a>0&&r>0&&(e.min=0)}var o=void 0!==n.min||void 0!==n.suggestedMin,s=void 0!==n.max||void 0!==n.suggestedMax;void 0!==n.min?e.min=n.min:void 0!==n.suggestedMin&&(e.min=null===e.min?n.suggestedMin:Math.min(e.min,n.suggestedMin)),void 0!==n.max?e.max=n.max:void 0!==n.suggestedMax&&(e.max=null===e.max?n.suggestedMax:Math.max(e.max,n.suggestedMax)),o!==s&&e.min>=e.max&&(o?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,n.beginAtZero||e.min--)},getTickLimit:function(){var r,e=this,t=e.options.ticks,n=t.stepSize,a=t.maxTicksLimit;return n?r=Math.ceil(e.max/n)-Math.floor(e.min/n)+1:(r=e._computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:m.noop,buildTicks:function(){var e=this,n=e.options.ticks,a=e.getTickLimit(),r={maxTicks:a=Math.max(2,a),min:n.min,max:n.max,precision:n.precision,stepSize:m.valueOrDefault(n.fixedStepSize,n.stepSize)},o=e.ticks=function mi(e,t){var _,b,x,y,n=[],r=e.stepSize,o=r||1,s=e.maxTicks-1,u=e.min,l=e.max,d=e.precision,f=t.min,h=t.max,p=m.niceNum((h-f)/s/o)*o;if(p<1e-14&&Xe(u)&&Xe(l))return[f,h];(y=Math.ceil(h/p)-Math.floor(f/p))>s&&(p=m.niceNum(y*p/s/o)*o),r||Xe(d)?_=Math.pow(10,m._decimalPlaces(p)):(_=Math.pow(10,d),p=Math.ceil(p*_)/_),b=Math.floor(f/p)*p,x=Math.ceil(h/p)*p,r&&(!Xe(u)&&m.almostWhole(u/p,p/1e3)&&(b=u),!Xe(l)&&m.almostWhole(l/p,p/1e3)&&(x=l)),y=m.almostEquals(y=(x-b)/p,Math.round(y),p/1e3)?Math.round(y):Math.ceil(y),b=Math.round(b*_)/_,x=Math.round(x*_)/_,n.push(Xe(u)?b:u);for(var T=1;T<y;++T)n.push(Math.round((b+T*p)*_)/_);return n.push(Xe(l)?x:l),n}(r,e);e.handleDirectionalChanges(),e.max=m.max(o),e.min=m.min(o),n.reverse?(o.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),re.prototype.convertTicksToLabels.call(e)},_configure:function(){var r,e=this,t=e.getTicks(),n=e.min,a=e.max;re.prototype._configure.call(e),e.options.offset&&t.length&&(n-=r=(a-n)/Math.max(t.length-1,1)/2,a+=r),e._startValue=n,e._endValue=a,e._valueRange=a-n}}),vi={position:"left",ticks:{callback:Nt.formatters.linear}};function xi(e,t,n,a){var f,h,r=e.options,s=function bi(e,t,n){var a=[n.type,void 0===t&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===e[a]&&(e[a]={pos:[],neg:[]}),e[a]}(t,r.stacked,n),u=s.pos,l=s.neg,d=a.length;for(f=0;f<d;++f)h=e._parseValue(a[f]),!(isNaN(h.min)||isNaN(h.max)||n.data[f].hidden)&&(u[f]=u[f]||0,l[f]=l[f]||0,r.relativePoints?u[f]=100:h.min<0||h.max<0?l[f]+=h.min:u[f]+=h.max)}function Ci(e,t,n){var r,o,a=n.length;for(r=0;r<a;++r)o=e._parseValue(n[r]),!(isNaN(o.min)||isNaN(o.max)||t.data[r].hidden)&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}var Er=Sn.extend({determineDataLimits:function(){var l,d,f,h,e=this,t=e.options,a=e.chart.data.datasets,r=e._getMatchingVisibleMetas(),o=t.stacked,s={},u=r.length;if(e.min=Number.POSITIVE_INFINITY,e.max=Number.NEGATIVE_INFINITY,void 0===o)for(l=0;!o&&l<u;++l)o=void 0!==(d=r[l]).stack;for(l=0;l<u;++l)f=a[(d=r[l]).index].data,o?xi(e,s,d,f):Ci(e,d,f);m.each(s,function(p){h=p.pos.concat(p.neg),e.min=Math.min(e.min,m.min(h)),e.max=Math.max(e.max,m.max(h))}),e.min=m.isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=m.isFinite(e.max)&&!isNaN(e.max)?e.max:1,e.handleTickRangeOptions()},_computeTickLimit:function(){var t,e=this;return e.isHorizontal()?Math.ceil(e.width/40):(t=m.options._parseFont(e.options.ticks),Math.ceil(e.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this;return t.getPixelForDecimal((+t.getRightValue(e)-t._startValue)/t._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}});Er._defaults=vi;var mr=m.valueOrDefault,ie=m.math.log10;var Ti={position:"left",ticks:{callback:Nt.formatters.logarithmic}};function kn(e,t){return m.isFinite(e)&&e>=0?e:t}var Zr=re.extend({determineDataLimits:function(){var s,u,l,d,f,h,e=this,t=e.options,n=e.chart,a=n.data.datasets,r=e.isHorizontal();function o(y){return r?y.xAxisID===e.id:y.yAxisID===e.id}e.min=Number.POSITIVE_INFINITY,e.max=Number.NEGATIVE_INFINITY,e.minNotZero=Number.POSITIVE_INFINITY;var p=t.stacked;if(void 0===p)for(s=0;s<a.length;s++)if(u=n.getDatasetMeta(s),n.isDatasetVisible(s)&&o(u)&&void 0!==u.stack){p=!0;break}if(t.stacked||p){var _={};for(s=0;s<a.length;s++){var b=[(u=n.getDatasetMeta(s)).type,void 0===t.stacked&&void 0===u.stack?s:"",u.stack].join(".");if(n.isDatasetVisible(s)&&o(u))for(void 0===_[b]&&(_[b]=[]),f=0,h=(d=a[s].data).length;f<h;f++){var x=_[b];l=e._parseValue(d[f]),!(isNaN(l.min)||isNaN(l.max)||u.data[f].hidden||l.min<0||l.max<0)&&(x[f]=x[f]||0,x[f]+=l.max)}}m.each(_,function(y){if(y.length>0){var T=m.min(y),S=m.max(y);e.min=Math.min(e.min,T),e.max=Math.max(e.max,S)}})}else for(s=0;s<a.length;s++)if(u=n.getDatasetMeta(s),n.isDatasetVisible(s)&&o(u))for(f=0,h=(d=a[s].data).length;f<h;f++)l=e._parseValue(d[f]),!(isNaN(l.min)||isNaN(l.max)||u.data[f].hidden||l.min<0||l.max<0)&&(e.min=Math.min(l.min,e.min),e.max=Math.max(l.max,e.max),0!==l.min&&(e.minNotZero=Math.min(l.min,e.minNotZero)));e.min=m.isFinite(e.min)?e.min:null,e.max=m.isFinite(e.max)?e.max:null,e.minNotZero=m.isFinite(e.minNotZero)?e.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=kn(t.min,e.min),e.max=kn(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(ie(e.min))-1),e.max=Math.pow(10,Math.floor(ie(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(ie(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(ie(e.min))+1):10),null===e.minNotZero&&(e.minNotZero=e.min>0?e.min:e.max<1?Math.pow(10,Math.floor(ie(e.max))):1)},buildTicks:function(){var e=this,t=e.options.ticks,n=!e.isHorizontal(),a={min:kn(t.min),max:kn(t.max)},r=e.ticks=function Mi(e,t){var s,u,n=[],a=mr(e.min,Math.pow(10,Math.floor(ie(t.min)))),r=Math.floor(ie(t.max)),o=Math.ceil(t.max/Math.pow(10,r));0===a?(s=Math.floor(ie(t.minNotZero)),u=Math.floor(t.minNotZero/Math.pow(10,s)),n.push(a),a=u*Math.pow(10,s)):(s=Math.floor(ie(a)),u=Math.floor(a/Math.pow(10,s)));var l=s<0?Math.pow(10,Math.abs(s)):1;do{n.push(a),10==++u&&(u=1,l=++s>=0?1:l),a=Math.round(u*Math.pow(10,s)*l)/l}while(s<r||s===r&&u<o);var d=mr(e.max,a);return n.push(d),n}(a,e);e.max=m.max(r),e.min=m.min(r),t.reverse?(n=!n,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),n&&r.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),re.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(ie(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,n=0;re.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),n=mr(e.options.ticks.fontSize,P.global.defaultFontSize)/e._length),e._startValue=ie(t),e._valueOffset=n,e._valueRange=(ie(e.max)-ie(t))/(1-n)},getPixelForValue:function(e){var t=this,n=0;return(e=+t.getRightValue(e))>t.min&&e>0&&(n=(ie(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(n)},getValueForPixel:function(e){var t=this,n=t.getDecimalForPixel(e);return 0===n&&0===t.min?0:Math.pow(10,t._startValue+(n-t._valueOffset)*t._valueRange)}});Zr._defaults=Ti;var In=m.valueOrDefault,vr=m.valueAtIndexOrDefault,Rr=m.options.resolve,Si={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Nt.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function pr(e){var t=e.ticks;return t.display&&e.display?In(t.fontSize,P.global.defaultFontSize)+2*t.backdropPaddingY:0}function ki(e,t,n){return m.isArray(n)?{w:m.longestText(e,e.font,n),h:n.length*t}:{w:e.measureText(n).width,h:t}}function Lr(e,t,n,a,r){return e===a||e===r?{start:t-n/2,end:t+n/2}:e<a||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function Pi(e){return 0===e||180===e?"center":e<180?"left":"right"}function Ai(e,t,n,a){var o,s,r=n.y+a/2;if(m.isArray(t))for(o=0,s=t.length;o<s;++o)e.fillText(t[o],n.x,r),r+=a;else e.fillText(t,n.x,r)}function Oi(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function Pn(e){return m.isNumber(e)?e:0}var Nr=Sn.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=pr(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;m.each(t.data.datasets,function(r,o){if(t.isDatasetVisible(o)){var s=t.getDatasetMeta(o);m.each(r.data,function(u,l){var d=+e.getRightValue(u);isNaN(d)||s.data[l].hidden||(n=Math.min(d,n),a=Math.max(d,a))})}}),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=a===Number.NEGATIVE_INFINITY?0:a,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/pr(this.options))},convertTicksToLabels:function(){var e=this;Sn.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(function(){var t=m.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""})},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this,t=e.options;t.display&&t.pointLabels.display?function Ii(e){var r,o,s,t=m.options._parseFont(e.options.pointLabels),n={l:0,r:e.width,t:0,b:e.height-e.paddingTop},a={};e.ctx.font=t.string,e._pointLabelSizes=[];var u=e.chart.data.labels.length;for(r=0;r<u;r++){s=e.getPointPosition(r,e.drawingArea+5),o=ki(e.ctx,t.lineHeight,e.pointLabels[r]),e._pointLabelSizes[r]=o;var l=e.getIndexAngle(r),d=m.toDegrees(l)%360,f=Lr(d,s.x,o.w,0,180),h=Lr(d,s.y,o.h,90,270);f.start<n.l&&(n.l=f.start,a.l=l),f.end>n.r&&(n.r=f.end,a.r=l),h.start<n.t&&(n.t=h.start,a.t=l),h.end>n.b&&(n.b=h.end,a.b=l)}e.setReductions(e.drawingArea,n,a)}(e):e.setCenterPoint(0,0,0,0)},setReductions:function(e,t,n){var a=this,r=t.l/Math.sin(n.l),o=Math.max(t.r-a.width,0)/Math.sin(n.r),s=-t.t/Math.cos(n.t),u=-Math.max(t.b-(a.height-a.paddingTop),0)/Math.cos(n.b);r=Pn(r),o=Pn(o),s=Pn(s),u=Pn(u),a.drawingArea=Math.min(Math.floor(e-(r+o)/2),Math.floor(e-(s+u)/2)),a.setCenterPoint(r,o,s,u)},setCenterPoint:function(e,t,n,a){var r=this,u=n+r.drawingArea,l=r.height-r.paddingTop-a-r.drawingArea;r.xCenter=Math.floor((e+r.drawingArea+(r.width-t-r.drawingArea))/2+r.left),r.yCenter=Math.floor((u+l)/2+r.top+r.paddingTop)},getIndexAngle:function(e){var t=this.chart,o=(e*(360/t.data.labels.length)+((t.options||{}).startAngle||0))%360;return(o<0?o+360:o)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(m.isNullOrUndef(e))return NaN;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this,a=n.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(a)*t+n.xCenter,y:Math.sin(a)*t+n.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this,n=t.min,a=t.max;return t.getPointPositionForValue(e||0,t.beginAtZero?0:n<0&&a<0?a:n>0&&a>0?n:0)},_drawGrid:function(){var u,l,d,e=this,t=e.ctx,n=e.options,a=n.gridLines,r=n.angleLines,o=In(r.lineWidth,a.lineWidth),s=In(r.color,a.color);if(n.pointLabels.display&&function Di(e){var t=e.ctx,n=e.options,a=n.pointLabels,r=pr(n),o=e.getDistanceFromCenterForValue(n.ticks.reverse?e.min:e.max),s=m.options._parseFont(a);t.save(),t.font=s.string,t.textBaseline="middle";for(var u=e.chart.data.labels.length-1;u>=0;u--){var d=e.getPointPosition(u,o+(0===u?r/2:0)+5),f=vr(a.fontColor,u,P.global.defaultFontColor);t.fillStyle=f;var h=e.getIndexAngle(u),p=m.toDegrees(h);t.textAlign=Pi(p),Oi(p,e._pointLabelSizes[u],d),Ai(t,e.pointLabels[u],d,s.lineHeight)}t.restore()}(e),a.display&&m.each(e.ticks,function(f,h){0!==h&&(l=e.getDistanceFromCenterForValue(e.ticksAsNumbers[h]),function Fi(e,t,n,a){var d,r=e.ctx,o=t.circular,s=e.chart.data.labels.length,u=vr(t.color,a-1),l=vr(t.lineWidth,a-1);if((o||s)&&u&&l){if(r.save(),r.strokeStyle=u,r.lineWidth=l,r.setLineDash&&(r.setLineDash(t.borderDash||[]),r.lineDashOffset=t.borderDashOffset||0),r.beginPath(),o)r.arc(e.xCenter,e.yCenter,n,0,2*Math.PI);else{d=e.getPointPosition(0,n),r.moveTo(d.x,d.y);for(var f=1;f<s;f++)d=e.getPointPosition(f,n),r.lineTo(d.x,d.y)}r.closePath(),r.stroke(),r.restore()}}(e,a,l,h))}),r.display&&o&&s){for(t.save(),t.lineWidth=o,t.strokeStyle=s,t.setLineDash&&(t.setLineDash(Rr([r.borderDash,a.borderDash,[]])),t.lineDashOffset=Rr([r.borderDashOffset,a.borderDashOffset,0])),u=e.chart.data.labels.length-1;u>=0;u--)l=e.getDistanceFromCenterForValue(n.ticks.reverse?e.min:e.max),d=e.getPointPosition(u,l),t.beginPath(),t.moveTo(e.xCenter,e.yCenter),t.lineTo(d.x,d.y),t.stroke();t.restore()}},_drawLabels:function(){var e=this,t=e.ctx,a=e.options.ticks;if(a.display){var u,l,r=e.getIndexAngle(0),o=m.options._parseFont(a),s=In(a.fontColor,P.global.defaultFontColor);t.save(),t.font=o.string,t.translate(e.xCenter,e.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",m.each(e.ticks,function(d,f){0===f&&!a.reverse||(u=e.getDistanceFromCenterForValue(e.ticksAsNumbers[f]),a.showLabelBackdrop&&(l=t.measureText(d).width,t.fillStyle=a.backdropColor,t.fillRect(-l/2-a.backdropPaddingX,-u-o.size/2-a.backdropPaddingY,l+2*a.backdropPaddingX,o.size+2*a.backdropPaddingY)),t.fillStyle=s,t.fillText(d,0,-u))}),t.restore()}},_drawTitle:m.noop});Nr._defaults=Si;var _r=m._deprecated,qr=m.options.resolve,Zi=m.valueOrDefault,Br=Number.MIN_SAFE_INTEGER||-9007199254740991,br=Number.MAX_SAFE_INTEGER||9007199254740991,An={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},oe=Object.keys(An);function zr(e,t){return e-t}function Vr(e){return m.valueOrDefault(e.time.min,e.ticks.min)}function Hr(e){return m.valueOrDefault(e.time.max,e.ticks.max)}function gt(e,t,n,a){var r=function Ni(e,t,n){for(var o,s,u,a=0,r=e.length-1;a>=0&&a<=r;){if(u=e[o=a+r>>1],!(s=e[o-1]||null))return{lo:null,hi:u};if(u[t]<n)a=o+1;else{if(!(s[t]>n))return{lo:s,hi:u};r=o-1}}return{lo:u,hi:null}}(e,t,n),o=r.lo?r.hi?r.lo:e[e.length-2]:e[0],s=r.lo?r.hi?r.hi:e[e.length-1]:e[1],u=s[t]-o[t];return o[a]+(s[a]-o[a])*(u?(n-o[t])/u:0)}function xr(e,t){var n=e._adapter,a=e.options.time,r=a.parser,o=r||a.format,s=t;return"function"==typeof r&&(s=r(s)),m.isFinite(s)||(s="string"==typeof o?n.parse(s,o):n.parse(s)),null!==s?+s:(!r&&"function"==typeof o&&(s=o(t),m.isFinite(s)||(s=n.parse(s))),s)}function et(e,t){if(m.isNullOrUndef(t))return null;var n=e.options.time,a=xr(e,e.getRightValue(t));return null===a||n.round&&(a=+e._adapter.startOf(a,n.round)),a}function Ur(e,t,n,a){var o,s,r=oe.length;for(o=oe.indexOf(e);o<r-1;++o)if((s=An[oe[o]]).common&&Math.ceil((n-t)/((s.steps?s.steps:br)*s.size))<=a)return oe[o];return oe[r-1]}function Yr(e,t,n){var s,u,a=[],r={},o=t.length;for(s=0;s<o;++s)r[u=t[s]]=s,a.push({value:u,major:!1});return 0!==o&&n?function Hi(e,t,n,a){var u,l,r=e._adapter,o=+r.startOf(t[0].value,a),s=t[t.length-1].value;for(u=o;u<=s;u=+r.add(u,1,a))(l=n[u])>=0&&(t[l].major=!0);return t}(e,a,r,n):a}var Wr=re.extend({initialize:function(){this.mergeTicksOptions(),re.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,n=t.time||(t.time={}),a=e._adapter=new cr._date(t.adapters.date);return _r("time scale",n.format,"time.format","time.parser"),_r("time scale",n.min,"time.min","ticks.min"),_r("time scale",n.max,"time.max","ticks.max"),m.mergeIf(n.displayFormats,a.formats()),re.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),re.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var f,h,p,_,b,x,y,e=this,t=e.chart,n=e._adapter,a=e.options,r=a.time.unit||"day",o=br,s=Br,u=[],l=[],d=[],T=e._getLabels();for(f=0,p=T.length;f<p;++f)d.push(et(e,T[f]));for(f=0,p=(t.data.datasets||[]).length;f<p;++f)if(t.isDatasetVisible(f))if(m.isObject((b=t.data.datasets[f].data)[0]))for(l[f]=[],h=0,_=b.length;h<_;++h)x=et(e,b[h]),u.push(x),l[f][h]=x;else l[f]=d.slice(0),y||(u=u.concat(d),y=!0);else l[f]=[];d.length&&(o=Math.min(o,d[0]),s=Math.max(s,d[d.length-1])),u.length&&(u=p>1?function Ri(e){var a,r,o,t={},n=[];for(a=0,r=e.length;a<r;++a)t[o=e[a]]||(t[o]=!0,n.push(o));return n}(u).sort(zr):u.sort(zr),o=Math.min(o,u[0]),s=Math.max(s,u[u.length-1])),o=et(e,Vr(a))||o,s=et(e,Hr(a))||s,o=o===br?+n.startOf(Date.now(),r):o,s=s===Br?+n.endOf(Date.now(),r)+1:s,e.min=Math.min(o,s),e.max=Math.max(o+1,s),e._table=[],e._timestamps={data:u,datasets:l,labels:d}},buildTicks:function(){var h,p,_,e=this,t=e.min,n=e.max,a=e.options,r=a.ticks,o=a.time,s=e._timestamps,u=[],l=e.getLabelCapacity(t),d=r.source,f=a.distribution;for(s="data"===d||"auto"===d&&"series"===f?s.data:"labels"===d?s.labels:function zi(e,t,n,a){var p,r=e._adapter,o=e.options,s=o.time,u=s.unit||Ur(s.minUnit,t,n,a),l=qr([s.stepSize,s.unitStepSize,1]),d="week"===u&&s.isoWeekday,f=t,h=[];if(d&&(f=+r.startOf(f,"isoWeek",d)),f=+r.startOf(f,d?"day":u),r.diff(n,t,u)>1e5*l)throw t+" and "+n+" are too far apart with stepSize of "+l+" "+u;for(p=f;p<n;p=+r.add(p,l,u))h.push(p);return(p===n||"ticks"===o.bounds)&&h.push(p),h}(e,t,n,l),"ticks"===a.bounds&&s.length&&(t=s[0],n=s[s.length-1]),t=et(e,Vr(a))||t,n=et(e,Hr(a))||n,h=0,p=s.length;h<p;++h)(_=s[h])>=t&&_<=n&&u.push(_);return e.min=t,e.max=n,e._unit=o.unit||(r.autoSkip?Ur(o.minUnit,e.min,e.max,l):function qi(e,t,n,a,r){var o,s;for(o=oe.length-1;o>=oe.indexOf(n);o--)if(An[s=oe[o]].common&&e._adapter.diff(r,a,s)>=t-1)return s;return oe[n?oe.indexOf(n):0]}(e,u.length,o.minUnit,e.min,e.max)),e._majorUnit=r.major.enabled&&"year"!==e._unit?function Bi(e){for(var t=oe.indexOf(e)+1,n=oe.length;t<n;++t)if(An[oe[t]].common)return oe[t]}(e._unit):void 0,e._table=function Li(e,t,n,a){if("linear"===a||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var s,u,l,d,f,r=[],o=[t];for(s=0,u=e.length;s<u;++s)(d=e[s])>t&&d<n&&o.push(d);for(o.push(n),s=0,u=o.length;s<u;++s)f=o[s+1],d=o[s],(void 0===(l=o[s-1])||void 0===f||Math.round((f+l)/2)!==d)&&r.push({time:d,pos:s/(u-1)});return r}(e._timestamps.data,t,n,f),e._offsets=function Vi(e,t,n,a,r){var u,l,o=0,s=0;return r.offset&&t.length&&(u=gt(e,"time",t[0],"pos"),o=1===t.length?1-u:(gt(e,"time",t[1],"pos")-u)/2,l=gt(e,"time",t[t.length-1],"pos"),s=1===t.length?l:(l-gt(e,"time",t[t.length-2],"pos"))/2),{start:o,end:s,factor:1/(o+1+s)}}(e._table,u,0,0,a),r.reverse&&u.reverse(),Yr(e,u,e._majorUnit)},getLabelForIndex:function(e,t){var n=this,a=n._adapter,r=n.chart.data,o=n.options.time,s=r.labels&&e<r.labels.length?r.labels[e]:"",u=r.datasets[t].data[e];return m.isObject(u)&&(s=n.getRightValue(u)),o.tooltipFormat?a.format(xr(n,s),o.tooltipFormat):"string"==typeof s?s:a.format(xr(n,s),o.displayFormats.datetime)},tickFormatFunction:function(e,t,n,a){var r=this,s=r.options,u=s.time.displayFormats,d=r._majorUnit,f=u[d],h=n[t],p=s.ticks,_=d&&f&&h&&h.major,b=r._adapter.format(e,a||(_?f:u[r._unit])),x=_?p.major:p.minor,y=qr([x.callback,x.userCallback,p.callback,p.userCallback]);return y?y(b,t,n):b},convertTicksToLabels:function(e){var n,a,t=[];for(n=0,a=e.length;n<a;++n)t.push(this.tickFormatFunction(e[n].value,n,e));return t},getPixelForOffset:function(e){var t=this,n=t._offsets,a=gt(t._table,"time",e,"pos");return t.getPixelForDecimal((n.start+a)*n.factor)},getPixelForValue:function(e,t,n){var a=this,r=null;if(void 0!==t&&void 0!==n&&(r=a._timestamps.datasets[n][t]),null===r&&(r=et(a,e)),null!==r)return a.getPixelForOffset(r)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,n=t._offsets,a=t.getDecimalForPixel(e)/n.factor-n.end,r=gt(t._table,"pos",a,"time");return t._adapter._create(r)},_getLabelSize:function(e){var t=this,n=t.options.ticks,a=t.ctx.measureText(e).width,r=m.toRadians(t.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(r),s=Math.sin(r),u=Zi(n.fontSize,P.global.defaultFontSize);return{w:a*o+u*s,h:a*s+u*o}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,n=t.options.time,a=n.displayFormats,r=a[n.unit]||a.millisecond,o=t.tickFormatFunction(e,0,Yr(t,[e],t._majorUnit),r),s=t._getLabelSize(o),u=Math.floor(t.isHorizontal()?t.width/s.w:t.height/s.h);return t.options.offset&&u--,u>0?u:1}});Wr._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var Wi={category:Fr,linear:Er,logarithmic:Zr,radialLinear:Nr,time:Wr},ji={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};cr._date.override("function"==typeof E?{_id:"moment",formats:function(){return ji},parse:function(e,t){return"string"==typeof e&&"string"==typeof t?e=E(e,t):e instanceof E||(e=E(e)),e.isValid()?e.valueOf():null},format:function(e,t){return E(e).format(t)},add:function(e,t,n){return E(e).add(t,n).valueOf()},diff:function(e,t,n){return E(e).diff(E(t),n)},startOf:function(e,t,n){return e=E(e),"isoWeek"===t?e.isoWeekday(n).valueOf():e.startOf(t).valueOf()},endOf:function(e,t){return E(e).endOf(t).valueOf()},_create:function(e){return E(e)}}:{}),P._set("global",{plugins:{filler:{propagate:!0}}});var Qi={dataset:function(e){var t=e.fill,n=e.chart,a=n.getDatasetMeta(t),o=a&&n.isDatasetVisible(t)&&a.dataset._children||[],s=o.length||0;return s?function(u,l){return l<s&&o[l]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,a=t?t.y:null;return m.isArray(t)?function(r,o){return t[o]}:function(r){return{x:null===n?r.x:n,y:null===a?r.y:a}}}};function Ji(e,t,n){var o,a=e._model||{},r=a.fill;if(void 0===r&&(r=!!a.backgroundColor),!1===r||null===r)return!1;if(!0===r)return"origin";if(o=parseFloat(r,10),isFinite(o)&&Math.floor(o)===o)return("-"===r[0]||"+"===r[0])&&(o=t+o),!(o===t||o<0||o>=n)&&o;switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return!1}}function Ki(e){return(e.el._scale||{}).getPointPositionForValue?function Gi(e){var s,u,l,d,f,t=e.el._scale,n=t.options,a=t.chart.data.labels.length,r=e.fill,o=[];if(!a)return null;for(u=n.ticks.reverse?t.min:t.max,l=t.getPointPositionForValue(0,s=n.ticks.reverse?t.max:t.min),d=0;d<a;++d)f="start"===r||"end"===r?t.getPointPositionForValue(d,"start"===r?s:u):t.getBasePosition(d),n.gridLines.circular&&(f.cx=l.x,f.cy=l.y,f.angle=t.getIndexAngle(d)-Math.PI/2),o.push(f);return o}(e):function $i(e){var o,t=e.el._model||{},n=e.el._scale||{},a=e.fill,r=null;if(isFinite(a))return null;if("start"===a?r=void 0===t.scaleBottom?n.bottom:t.scaleBottom:"end"===a?r=void 0===t.scaleTop?n.top:t.scaleTop:void 0!==t.scaleZero?r=t.scaleZero:n.getBasePixel&&(r=n.getBasePixel()),null!=r){if(void 0!==r.x&&void 0!==r.y)return r;if(m.isFinite(r))return{x:(o=n.isHorizontal())?r:null,y:o?null:r}}return null}(e)}function Xi(e,t,n){var s,r=e[t].fill,o=[t];if(!n)return r;for(;!1!==r&&-1===o.indexOf(r);){if(!isFinite(r))return r;if(!(s=e[r]))return!1;if(s.visible)return r;o.push(r),r=s.fill}return!1}function eo(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),Qi[n](e))}function jr(e){return e&&!e.skip}function Qr(e,t,n,a,r){var o,s,u,l;if(a&&r){for(e.moveTo(t[0].x,t[0].y),o=1;o<a;++o)m.canvas.lineTo(e,t[o-1],t[o]);if(void 0!==n[0].angle){for(s=n[0].cx,u=n[0].cy,l=Math.sqrt(Math.pow(n[0].x-s,2)+Math.pow(n[0].y-u,2)),o=r-1;o>0;--o)e.arc(s,u,l,n[o].angle,n[o-1].angle,!0);return}for(e.lineTo(n[r-1].x,n[r-1].y),o=r-1;o>0;--o)m.canvas.lineTo(e,n[o],n[o-1],!0)}}function to(e,t,n,a,r,o){var p,_,b,x,y,T,S,k,s=t.length,u=a.spanGaps,l=[],d=[],f=0,h=0;for(e.beginPath(),p=0,_=s;p<_;++p)y=n(x=t[b=p%s]._view,b,a),T=jr(x),S=jr(y),o&&void 0===k&&T&&(_=s+(k=p+1)),T&&S?(f=l.push(x),h=d.push(y)):f&&h&&(u?(T&&l.push(x),S&&d.push(y)):(Qr(e,l,d,f,h),f=h=0,l=[],d=[]));Qr(e,l,d,f,h),e.closePath(),e.fillStyle=r,e.fill()}var no={id:"filler",afterDatasetsUpdate:function(e,t){var o,s,u,l,n=(e.data.datasets||[]).length,a=t.propagate,r=[];for(s=0;s<n;++s)l=null,(u=(o=e.getDatasetMeta(s)).dataset)&&u._model&&u instanceof K.Line&&(l={visible:e.isDatasetVisible(s),fill:Ji(u,s,n),chart:e,el:u}),o.$filler=l,r.push(l);for(s=0;s<n;++s)(l=r[s])&&(l.fill=Xi(r,s,a),l.boundary=Ki(l),l.mapper=eo(l))},beforeDatasetsDraw:function(e){var a,r,o,s,u,l,d,t=e._getSortedVisibleDatasetMetas(),n=e.ctx;for(r=t.length-1;r>=0;--r)(a=t[r].$filler)&&a.visible&&(u=(o=a.el)._children||[],d=(s=o._view).backgroundColor||P.global.defaultColor,(l=a.mapper)&&d&&u.length&&(m.canvas.clipArea(n,e.chartArea),to(n,u,l,s,d,o._loop),m.canvas.unclipArea(n)))}},ao=m.rtl.getRtlAdapter,De=m.noop,Fe=m.valueOrDefault;function Cr(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}P._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,a=this.chart,r=a.getDatasetMeta(n);r.hidden=null===r.hidden?!a.data.datasets[n].hidden:null,a.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.options.legend||{},a=n.labels&&n.labels.usePointStyle;return e._getSortedDatasetMetas().map(function(r){var o=r.controller.getStyle(a?0:void 0);return{text:t[r.index].label,fillStyle:o.backgroundColor,hidden:!e.isDatasetVisible(r.index),lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,pointStyle:o.pointStyle,rotation:o.rotation,datasetIndex:r.index}},this)}}},legendCallback:function(e){var a,r,o,t=document.createElement("ul"),n=e.data.datasets;for(t.setAttribute("class",e.id+"-legend"),a=0,r=n.length;a<r;a++)(o=t.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=n[a].backgroundColor,n[a].label&&o.appendChild(document.createTextNode(n[a].label));return t.outerHTML}});var Jr=de.extend({initialize:function(e){var t=this;m.extend(t,e),t.legendHitBoxes=[],t._hoveredItem=null,t.doughnutMode=!1},beforeUpdate:De,update:function(e,t,n){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=n,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeBuildLabels(),a.buildLabels(),a.afterBuildLabels(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:De,beforeSetDimensions:De,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:De,beforeBuildLabels:De,buildLabels:function(){var e=this,t=e.options.labels||{},n=m.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(a){return t.filter(a,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:De,beforeFit:De,fit:function(){var e=this,t=e.options,n=t.labels,a=t.display,r=e.ctx,o=m.options._parseFont(n),s=o.size,u=e.legendHitBoxes=[],l=e.minSize,d=e.isHorizontal();if(d?(l.width=e.maxWidth,l.height=a?10:0):(l.width=a?10:0,l.height=e.maxHeight),a){if(r.font=o.string,d){var f=e.lineWidths=[0],h=0;r.textAlign="left",r.textBaseline="middle",m.each(e.legendItems,function(S,k){var O=Cr(n,s)+s/2+r.measureText(S.text).width;(0===k||f[f.length-1]+O+2*n.padding>l.width)&&(h+=s+n.padding,f[f.length-(k>0?0:1)]=0),u[k]={left:0,top:0,width:O,height:s},f[f.length-1]+=O+n.padding}),l.height+=h}else{var p=n.padding,_=e.columnWidths=[],b=e.columnHeights=[],x=n.padding,y=0,T=0;m.each(e.legendItems,function(S,k){var O=Cr(n,s)+s/2+r.measureText(S.text).width;k>0&&T+s+2*p>l.height&&(x+=y+n.padding,_.push(y),b.push(T),y=0,T=0),y=Math.max(y,O),T+=s+p,u[k]={left:0,top:0,width:O,height:s}}),x+=y,_.push(y),b.push(T),l.width+=x}e.width=l.width,e.height=l.height}else e.width=l.width=e.height=l.height=0},afterFit:De,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,n=t.labels,a=P.global,r=a.defaultColor,o=a.elements.line,s=e.height,u=e.columnHeights,l=e.width,d=e.lineWidths;if(t.display){var x,f=ao(t.rtl,e.left,e.minSize.width),h=e.ctx,p=Fe(n.fontColor,a.defaultFontColor),_=m.options._parseFont(n),b=_.size;h.textAlign=f.textAlign("left"),h.textBaseline="middle",h.lineWidth=.5,h.strokeStyle=p,h.fillStyle=p,h.font=_.string;var y=Cr(n,b),T=e.legendHitBoxes,D=function(L,V){switch(t.align){case"start":return n.padding;case"end":return L-V;default:return(L-V+n.padding)/2}},O=e.isHorizontal();x=O?{x:e.left+D(l,d[0]),y:e.top+n.padding,line:0}:{x:e.left+n.padding,y:e.top+D(s,u[0]),line:0},m.rtl.overrideTextDirection(e.ctx,t.textDirection);var q=b+n.padding;m.each(e.legendItems,function(L,V){var H=h.measureText(L.text).width,Q=y+b/2+H,j=x.x,W=x.y;f.setWidth(e.minSize.width),O?V>0&&j+Q+n.padding>e.left+e.minSize.width&&(W=x.y+=q,x.line++,j=x.x=e.left+D(l,d[x.line])):V>0&&W+q>e.top+e.minSize.height&&(j=x.x=j+e.columnWidths[x.line]+n.padding,x.line++,W=x.y=e.top+D(s,u[x.line]));var $=f.x(j);(function(L,V,H){if(!(isNaN(y)||y<=0)){h.save();var Q=Fe(H.lineWidth,o.borderWidth);if(h.fillStyle=Fe(H.fillStyle,r),h.lineCap=Fe(H.lineCap,o.borderCapStyle),h.lineDashOffset=Fe(H.lineDashOffset,o.borderDashOffset),h.lineJoin=Fe(H.lineJoin,o.borderJoinStyle),h.lineWidth=Q,h.strokeStyle=Fe(H.strokeStyle,r),h.setLineDash&&h.setLineDash(Fe(H.lineDash,o.borderDash)),n&&n.usePointStyle){var j=y*Math.SQRT2/2,W=f.xPlus(L,y/2);m.canvas.drawPoint(h,H.pointStyle,j,W,V+b/2,H.rotation)}else h.fillRect(f.leftForLtr(L,y),V,y,b),0!==Q&&h.strokeRect(f.leftForLtr(L,y),V,y,b);h.restore()}})($,W,L),T[V].left=f.leftForLtr($,T[V].width),T[V].top=W,function(L,V,H,Q){var j=b/2,W=f.xPlus(L,y+j),$=V+j;h.fillText(H.text,W,$),H.hidden&&(h.beginPath(),h.lineWidth=2,h.moveTo(W,$),h.lineTo(f.xPlus(W,Q),$),h.stroke())}($,W,L,H),O?x.x+=Q+n.padding:x.y+=q}),m.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var a,r,o,n=this;if(e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom)for(o=n.legendHitBoxes,a=0;a<o.length;++a)if(e>=(r=o[a]).left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height)return n.legendItems[a];return null},handleEvent:function(e){var r,t=this,n=t.options,a="mouseup"===e.type?"click":e.type;if("mousemove"===a){if(!n.onHover&&!n.onLeave)return}else{if("click"!==a)return;if(!n.onClick)return}r=t._getLegendItemAt(e.x,e.y),"click"===a?r&&n.onClick&&n.onClick.call(t,e.native,r):(n.onLeave&&r!==t._hoveredItem&&(t._hoveredItem&&n.onLeave.call(t,e.native,t._hoveredItem),t._hoveredItem=r),n.onHover&&r&&n.onHover.call(t,e.native,r))}});function $r(e,t){var n=new Jr({ctx:e.ctx,options:t,chart:e});ae.configure(e,n,t),ae.addBox(e,n),e.legend=n}var ro={id:"legend",_element:Jr,beforeInit:function(e){var t=e.options.legend;t&&$r(e,t)},beforeUpdate:function(e){var t=e.options.legend,n=e.legend;t?(m.mergeIf(t,P.global.legend),n?(ae.configure(e,n,t),n.options=t):$r(e,t)):n&&(ae.removeBox(e,n),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}},Te=m.noop;P._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Gr=de.extend({initialize:function(e){m.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:Te,update:function(e,t,n){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=n,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeBuildLabels(),a.buildLabels(),a.afterBuildLabels(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:Te,beforeSetDimensions:Te,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Te,beforeBuildLabels:Te,buildLabels:Te,afterBuildLabels:Te,beforeFit:Te,fit:function(){var o,e=this,t=e.options,n=e.minSize={},a=e.isHorizontal();t.display?(o=(m.isArray(t.text)?t.text.length:1)*m.options._parseFont(t).lineHeight+2*t.padding,e.width=n.width=a?e.maxWidth:o,e.height=n.height=a?o:e.maxHeight):e.width=n.width=e.height=n.height=0},afterFit:Te,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=e.options;if(n.display){var h,p,_,a=m.options._parseFont(n),r=a.lineHeight,o=r/2+n.padding,s=0,u=e.top,l=e.left,d=e.bottom,f=e.right;t.fillStyle=m.valueOrDefault(n.fontColor,P.global.defaultFontColor),t.font=a.string,e.isHorizontal()?(p=l+(f-l)/2,_=u+o,h=f-l):(p="left"===n.position?l+o:f-o,_=u+(d-u)/2,h=d-u,s=Math.PI*("left"===n.position?-.5:.5)),t.save(),t.translate(p,_),t.rotate(s),t.textAlign="center",t.textBaseline="middle";var b=n.text;if(m.isArray(b))for(var x=0,y=0;y<b.length;++y)t.fillText(b[y],0,x,h),x+=r;else t.fillText(b,0,0,h);t.restore()}}});function Kr(e,t){var n=new Gr({ctx:e.ctx,options:t,chart:e});ae.configure(e,n,t),ae.addBox(e,n),e.titleBlock=n}var Ee={},oo=no,so=ro,lo={id:"title",_element:Gr,beforeInit:function(e){var t=e.options.title;t&&Kr(e,t)},beforeUpdate:function(e){var t=e.options.title,n=e.titleBlock;t?(m.mergeIf(t,P.global.title),n?(ae.configure(e,n,t),n.options=t):Kr(e,t)):n&&(ae.removeBox(e,n),delete e.titleBlock)}};for(var Xr in Ee.filler=oo,Ee.legend=so,Ee.title=lo,F.helpers=m,function(){function e(a,r,o){var s;return"string"==typeof a?(s=parseInt(a,10),-1!==a.indexOf("%")&&(s=s/100*r.parentNode[o])):s=a,s}function t(a){return null!=a&&"none"!==a}function n(a,r,o){var s=document.defaultView,u=m._getParentNode(a),l=s.getComputedStyle(a)[r],d=s.getComputedStyle(u)[r],f=t(l),h=t(d),p=Number.POSITIVE_INFINITY;return f||h?Math.min(f?e(l,a,o):p,h?e(d,u,o):p):"none"}m.where=function(a,r){if(m.isArray(a)&&Array.prototype.filter)return a.filter(r);var o=[];return m.each(a,function(s){r(s)&&o.push(s)}),o},m.findIndex=Array.prototype.findIndex?function(a,r,o){return a.findIndex(r,o)}:function(a,r,o){o=void 0===o?a:o;for(var s=0,u=a.length;s<u;++s)if(r.call(o,a[s],s,a))return s;return-1},m.findNextWhere=function(a,r,o){m.isNullOrUndef(o)&&(o=-1);for(var s=o+1;s<a.length;s++){var u=a[s];if(r(u))return u}},m.findPreviousWhere=function(a,r,o){m.isNullOrUndef(o)&&(o=a.length);for(var s=o-1;s>=0;s--){var u=a[s];if(r(u))return u}},m.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},m.almostEquals=function(a,r,o){return Math.abs(a-r)<o},m.almostWhole=function(a,r){var o=Math.round(a);return o-r<=a&&o+r>=a},m.max=function(a){return a.reduce(function(r,o){return isNaN(o)?r:Math.max(r,o)},Number.NEGATIVE_INFINITY)},m.min=function(a){return a.reduce(function(r,o){return isNaN(o)?r:Math.min(r,o)},Number.POSITIVE_INFINITY)},m.sign=Math.sign?function(a){return Math.sign(a)}:function(a){return 0==(a=+a)||isNaN(a)?a:a>0?1:-1},m.toRadians=function(a){return a*(Math.PI/180)},m.toDegrees=function(a){return a*(180/Math.PI)},m._decimalPlaces=function(a){if(m.isFinite(a)){for(var r=1,o=0;Math.round(a*r)/r!==a;)r*=10,o++;return o}},m.getAngleFromPoint=function(a,r){var o=r.x-a.x,s=r.y-a.y,u=Math.sqrt(o*o+s*s),l=Math.atan2(s,o);return l<-.5*Math.PI&&(l+=2*Math.PI),{angle:l,distance:u}},m.distanceBetweenPoints=function(a,r){return Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2))},m.aliasPixel=function(a){return a%2==0?0:.5},m._alignPixel=function(a,r,o){var s=a.currentDevicePixelRatio,u=o/2;return Math.round((r-u)*s)/s+u},m.splineCurve=function(a,r,o,s){var u=a.skip?r:a,l=r,d=o.skip?r:o,f=Math.sqrt(Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2)),h=Math.sqrt(Math.pow(d.x-l.x,2)+Math.pow(d.y-l.y,2)),p=f/(f+h),_=h/(f+h),b=s*(p=isNaN(p)?0:p),x=s*(_=isNaN(_)?0:_);return{previous:{x:l.x-b*(d.x-u.x),y:l.y-b*(d.y-u.y)},next:{x:l.x+x*(d.x-u.x),y:l.y+x*(d.y-u.y)}}},m.EPSILON=Number.EPSILON||1e-14,m.splineCurveMonotone=function(a){var s,u,l,d,h,p,_,b,x,r=(a||[]).map(function(y){return{model:y._model,deltaK:0,mK:0}}),o=r.length;for(s=0;s<o;++s)if(!(l=r[s]).model.skip){if(u=s>0?r[s-1]:null,(d=s<o-1?r[s+1]:null)&&!d.model.skip){var f=d.model.x-l.model.x;l.deltaK=0!==f?(d.model.y-l.model.y)/f:0}l.mK=!u||u.model.skip?l.deltaK:!d||d.model.skip?u.deltaK:this.sign(u.deltaK)!==this.sign(l.deltaK)?0:(u.deltaK+l.deltaK)/2}for(s=0;s<o-1;++s)if(d=r[s+1],!(l=r[s]).model.skip&&!d.model.skip){if(m.almostEquals(l.deltaK,0,this.EPSILON)){l.mK=d.mK=0;continue}h=l.mK/l.deltaK,p=d.mK/l.deltaK,!((b=Math.pow(h,2)+Math.pow(p,2))<=9)&&(_=3/Math.sqrt(b),l.mK=h*_*l.deltaK,d.mK=p*_*l.deltaK)}for(s=0;s<o;++s)!(l=r[s]).model.skip&&(d=s<o-1?r[s+1]:null,(u=s>0?r[s-1]:null)&&!u.model.skip&&(l.model.controlPointPreviousX=l.model.x-(x=(l.model.x-u.model.x)/3),l.model.controlPointPreviousY=l.model.y-x*l.mK),d&&!d.model.skip&&(l.model.controlPointNextX=l.model.x+(x=(d.model.x-l.model.x)/3),l.model.controlPointNextY=l.model.y+x*l.mK))},m.nextItem=function(a,r,o){return o?r>=a.length-1?a[0]:a[r+1]:r>=a.length-1?a[a.length-1]:a[r+1]},m.previousItem=function(a,r,o){return o?r<=0?a[a.length-1]:a[r-1]:r<=0?a[0]:a[r-1]},m.niceNum=function(a,r){var o=Math.floor(m.log10(a)),s=a/Math.pow(10,o);return(r?s<1.5?1:s<3?2:s<7?5:10:s<=1?1:s<=2?2:s<=5?5:10)*Math.pow(10,o)},m.requestAnimFrame=typeof window>"u"?function(a){a()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},m.getRelativePosition=function(a,r){var o,s,u=a.originalEvent||a,l=a.target||a.srcElement,d=l.getBoundingClientRect(),f=u.touches;f&&f.length>0?(o=f[0].clientX,s=f[0].clientY):(o=u.clientX,s=u.clientY);var h=parseFloat(m.getStyle(l,"padding-left")),p=parseFloat(m.getStyle(l,"padding-top")),_=parseFloat(m.getStyle(l,"padding-right")),b=parseFloat(m.getStyle(l,"padding-bottom")),y=d.bottom-d.top-p-b;return{x:o=Math.round((o-d.left-h)/(d.right-d.left-h-_)*l.width/r.currentDevicePixelRatio),y:s=Math.round((s-d.top-p)/y*l.height/r.currentDevicePixelRatio)}},m.getConstraintWidth=function(a){return n(a,"max-width","clientWidth")},m.getConstraintHeight=function(a){return n(a,"max-height","clientHeight")},m._calculatePadding=function(a,r,o){return(r=m.getStyle(a,r)).indexOf("%")>-1?o*parseInt(r,10)/100:parseInt(r,10)},m._getParentNode=function(a){var r=a.parentNode;return r&&"[object ShadowRoot]"===r.toString()&&(r=r.host),r},m.getMaximumWidth=function(a){var r=m._getParentNode(a);if(!r)return a.clientWidth;var o=r.clientWidth,l=o-m._calculatePadding(r,"padding-left",o)-m._calculatePadding(r,"padding-right",o),d=m.getConstraintWidth(a);return isNaN(d)?l:Math.min(l,d)},m.getMaximumHeight=function(a){var r=m._getParentNode(a);if(!r)return a.clientHeight;var o=r.clientHeight,l=o-m._calculatePadding(r,"padding-top",o)-m._calculatePadding(r,"padding-bottom",o),d=m.getConstraintHeight(a);return isNaN(d)?l:Math.min(l,d)},m.getStyle=function(a,r){return a.currentStyle?a.currentStyle[r]:document.defaultView.getComputedStyle(a,null).getPropertyValue(r)},m.retinaScale=function(a,r){var o=a.currentDevicePixelRatio=r||typeof window<"u"&&window.devicePixelRatio||1;if(1!==o){var s=a.canvas,u=a.height,l=a.width;s.height=u*o,s.width=l*o,a.ctx.scale(o,o),!s.style.height&&!s.style.width&&(s.style.height=u+"px",s.style.width=l+"px")}},m.fontString=function(a,r,o){return r+" "+a+"px "+o},m.longestText=function(a,r,o,s){var u=(s=s||{}).data=s.data||{},l=s.garbageCollect=s.garbageCollect||[];s.font!==r&&(u=s.data={},l=s.garbageCollect=[],s.font=r),a.font=r;var h,p,_,b,x,d=0,f=o.length;for(h=0;h<f;h++)if(null!=(b=o[h])&&!0!==m.isArray(b))d=m.measureText(a,u,l,d,b);else if(m.isArray(b))for(p=0,_=b.length;p<_;p++)null!=(x=b[p])&&!m.isArray(x)&&(d=m.measureText(a,u,l,d,x));var y=l.length/2;if(y>o.length){for(h=0;h<y;h++)delete u[l[h]];l.splice(0,y)}return d},m.measureText=function(a,r,o,s,u){var l=r[u];return l||(l=r[u]=a.measureText(u).width,o.push(u)),l>s&&(s=l),s},m.numberOfLabelLines=function(a){var r=1;return m.each(a,function(o){m.isArray(o)&&o.length>r&&(r=o.length)}),r},m.color=qe?function(a){return a instanceof CanvasGradient&&(a=P.global.defaultColor),qe(a)}:function(a){return console.error("Color.js not found!"),a},m.getHoverColor=function(a){return a instanceof CanvasPattern||a instanceof CanvasGradient?a:m.color(a).saturate(.5).darken(.1).rgbString()}}(),F._adapters=cr,F.Animation=Mt,F.animationService=Tt,F.controllers=pn,F.DatasetController=X,F.defaults=P,F.Element=de,F.elements=K,F.Interaction=Ie,F.layouts=ae,F.platform=Pe,F.plugins=B,F.Scale=re,F.scaleService=Je,F.Ticks=Nt,F.Tooltip=Rt,F.helpers.each(Wi,function(e,t){F.scaleService.registerScaleType(t,e,e._defaults)}),Ee)Ee.hasOwnProperty(Xr)&&F.plugins.register(Ee[Xr]);F.platform.initialize();var co=F;return typeof window<"u"&&(window.Chart=F),F.Chart=F,F.Legend=Ee.legend._element,F.Title=Ee.title._element,F.pluginService=F.plugins,F.PluginBase=F.Element.extend({}),F.canvasHelpers=F.helpers.canvas,F.layoutService=F.layouts,F.LinearScaleBase=Sn,F.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(e){F[e]=function(t,n){return new F(t,F.helpers.merge(n||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}}),co}(function(){try{return I(15439)}catch{}}())}}]);